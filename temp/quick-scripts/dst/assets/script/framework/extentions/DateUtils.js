
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/script/framework/extentions/DateUtils.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'ffbd0mcHthAlKb59iyTNT1M', 'DateUtils');
// script/framework/extentions/DateUtils.ts

"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const TypeUtils_1 = __importDefault(require("../../common/utils/TypeUtils"));
const UtilMgr_1 = require("../../global/UtilMgr");
// 一天毫秒
const ONE_DAY_MS = 86400000;
class DateUtils {
    /**
     * 获取 月日
     * @param timestamp {number} 时间戳
     * @retrun {string} DD/MM
     */
    static getMD(timestamp) {
        let date = new Date(timestamp);
        let md = "";
        let m = date.getMonth() + 1;
        let d = date.getDate();
        let strM = m < 10 ? ("0" + m) : m.toString();
        let strD = d < 10 ? ("0" + d) : d.toString();
        md = `${strD}/${strM}`;
        return md;
    }
    /**
     * 获取 年月日
     * @param timestamp {number} 时间戳
     * @param symbol {string} 分隔符
     * @return {string} YYYY/MM/DD
     */
    static getYMD(timestamp, symbol) {
        let date = new Date(Number(timestamp));
        let ymd = "";
        let y = date.getFullYear();
        let m = date.getMonth() + 1;
        let d = date.getDate();
        if (TypeUtils_1.default.isNull(symbol)) {
            symbol = "/";
        }
        let strM = m < 10 ? ("0" + m) : m.toString();
        let strD = d < 10 ? ("0" + d) : d.toString();
        ymd = `${y}${symbol}${strM}${symbol}${strD}`;
        return ymd;
    }
    /**
     * 获取 月日 时分
     * @param timestamp {number} 时间戳
     * @return {String} MM-DD HH:MM
     */
    static getMDHM(timestamp) {
        let date = new Date(timestamp);
        let result = "";
        let m = date.getMonth() + 1;
        let d = date.getDate();
        let hour = date.getHours();
        let minute = date.getMinutes();
        let strM = m < 10 ? ("0" + m) : m.toString();
        let strD = d < 10 ? ("0" + d) : d.toString();
        let strHour = hour < 10 ? ("0" + hour) : hour.toString();
        let strMinute = minute < 10 ? ("0" + minute) : minute.toString();
        result = `${strM}-${strD} ${strHour}:${strMinute}`;
        return result;
    }
    /**
     * 获取 月日 时分秒
     * @param timestamp {number} 时间戳
     * @return {String} MM-DD HH:MM:SS
     */
    static getMDHMS(timestamp) {
        let date = new Date(timestamp);
        let result = "";
        let m = date.getMonth() + 1;
        let d = date.getDate();
        let hour = date.getHours();
        let minute = date.getMinutes();
        let sec = date.getSeconds();
        let strM = m < 10 ? ("0" + m) : m.toString();
        let strD = d < 10 ? ("0" + d) : d.toString();
        let strHour = hour < 10 ? ("0" + hour) : hour.toString();
        let strMinute = minute < 10 ? ("0" + minute) : minute.toString();
        let strSec = sec < 10 ? ("0" + sec) : sec.toString();
        result = `${strM}-${strD} ${strHour}:${strMinute}:${strSec}`;
        return result;
    }
    /**
     * 获取 时分秒
     * @param timestamp {number} 时间戳
     * @return {String} HH:MM:SS
     */
    static getHMS(timestamp) {
        let date = new Date(timestamp);
        let result = "";
        let hour = date.getHours();
        let minute = date.getMinutes();
        let sec = date.getSeconds();
        let strHour = hour < 10 ? ("0" + hour) : hour.toString();
        let strMinute = minute < 10 ? ("0" + minute) : minute.toString();
        let strSec = sec < 10 ? ("0" + sec) : sec.toString();
        result = `${strHour}:${strMinute}:${strSec}`;
        return result;
    }
    /**
     * 获取 年月日 时分秒
     * @param timestamp {number} 时间戳
     * @return {String} YYYY.MM.DD HH:MM:SS
     */
    static getYMDHMS(timestamp) {
        let date = new Date(Number(timestamp));
        let ymd = "";
        let y = date.getFullYear();
        let m = date.getMonth() + 1;
        let d = date.getDate();
        let hour = date.getHours();
        let minute = date.getMinutes();
        let sec = date.getSeconds();
        let strM = m < 10 ? ("0" + m) : m.toString();
        let strD = d < 10 ? ("0" + d) : d.toString();
        let strHour = hour < 10 ? ("0" + hour) : hour.toString();
        let strMinute = minute < 10 ? ("0" + minute) : minute.toString();
        let strSec = sec < 10 ? ("0" + sec) : sec.toString();
        ymd = `${y}.${strM}.${strD} ${strHour}:${strMinute}:${strSec}`;
        return ymd;
    }
    /**
     * 获取剩余时间 日时
     * @param currTimestamp {number} 当前时间戳
     * @param endTimestamp {Date} 结束时间戳
     * @return {string} 1D12H
     */
    static getRemainTimeDH(currTimestamp, endTimestamp) {
        let result = "";
        let distTimestamp = endTimestamp - currTimestamp;
        let distSec = distTimestamp / 1000;
        if (distSec <= 0) {
            result = "0H";
        }
        else {
            const DAY_SEC = 86400;
            const HOUR_SEC = 3600;
            let day = Math.floor(distSec / DAY_SEC);
            let hour = Math.ceil((distSec % DAY_SEC) / HOUR_SEC);
            if (day > 0) {
                result = `${day}D`;
            }
            if (hour > 0) {
                result += `${hour}H`;
            }
        }
        return result;
    }
    /**
     * 获取剩余时间 时分秒
     * @param currTimestamp {number} 当前时间戳
     * @param endTimestamp {Date} 结束时间戳
     * @return {string} HH:MM:SS
     */
    static getRemainTimeHMS(currTimestamp, endTimestamp) {
        let result = "";
        let ms = endTimestamp - currTimestamp;
        if (ms <= 0) {
            result = "00:00:00";
        }
        else {
            let hour = Math.floor(ms / 1000 / 60 / 60 % 24);
            let minute = Math.floor(ms / 1000 / 60 % 60);
            let sec = Math.floor(ms / 1000 % 60);
            let strHour = hour < 10 ? ("0" + hour) : hour.toString();
            let strMinute = minute < 10 ? ("0" + minute) : minute.toString();
            let strSec = sec < 10 ? ("0" + sec) : sec.toString();
            result = `${strHour}:${strMinute}:${strSec}`;
        }
        return result;
    }
    /**
     * 获取剩余时间 分秒
     * @param currTimestamp {number} 当前时间戳
     * @param endTimestamp {Date} 结束时间戳
     * @return {string} MMSS
     */
    static getRemainTimeMS(currTimestamp, endTimestamp) {
        let result = "";
        let ms = endTimestamp - currTimestamp;
        if (ms <= 0) {
            result = "0000";
        }
        else {
            let minute = Math.floor(ms / 1000 / 60 % 60);
            let sec = Math.floor(ms / 1000 % 60);
            let strMinute = minute < 10 ? ("0" + minute) : minute.toString();
            let strSec = sec < 10 ? ("0" + sec) : sec.toString();
            result = `${strMinute}${strSec}`;
        }
        return result;
    }
    /**
     * 获取剩余时间 秒
     * @param currTimestamp {number} 当前时间戳
     * @param endTimestamp {Date} 结束时间戳
     * @return {number} SS
     */
    static getRemainTimeS(currTimestamp, endTimestamp) {
        let result = null;
        let ms = endTimestamp - currTimestamp;
        if (ms <= 0) {
            result = 0;
        }
        else {
            let sec = Math.floor(ms / 1000);
            result = sec;
        }
        return result;
    }
    /**
     * 通过毫秒转换为秒
     * @param ms {number} 毫秒
     */
    static getMsToS(ms) {
        if (ms <= 0) {
            return "";
        }
        let sec = ms / 1000;
        return UtilMgr_1.UtilMgr.toPadding(UtilMgr_1.UtilMgr.toFixed(sec, 2), 2);
    }
    /**
     * 精确毫秒时间戳 转换 精确天时间戳
     * @param timestamp {number} 精确毫秒时间戳
     * @returns {number} 精确天时间戳
     */
    static getDayTimestamp(timestamp) {
        let strDate = new Date(timestamp).format("yyyy-MM-dd");
        return this.getTimestampByDate(strDate);
    }
    /**
     * 获取时间戳 通过时间格式
     * @param strDate {string} 字符串日期
     */
    static getTimestampByDate(strDate) {
        return (new Date(strDate)).getTime();
    }
    /**
     * 获取当前时间戳 前后天数 的日期
     * @param timestamp {number} 精确毫秒时间戳
     * @param baDay {number} 前后天数
     * @param format {string} 格式
     * @returns {number} 精确天时间戳
     */
    static getDayBeforeAfter(timestamp, baDay = 0, format = "yyyy-MM-dd") {
        let zeroTimestamp = this.getDayTimestamp(timestamp);
        let targetTimestamp = zeroTimestamp + (ONE_DAY_MS * baDay);
        let strDate = new Date(targetTimestamp).format(format);
        return strDate;
    }
    /**
     * 获取日期时间通过时间戳
     * @param timestamp {number} 时间戳
     * @param format {string} 格式
     */
    static getDateByTimestamp(timestamp, format = "yyyy-MM-dd") {
        return new Date(Number(timestamp)).format(format);
    }
}
exports.default = DateUtils;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9zY3JpcHQvZnJhbWV3b3JrL2V4dGVudGlvbnMvRGF0ZVV0aWxzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsNkVBQXFEO0FBQ3JELGtEQUErQztBQUUvQyxPQUFPO0FBQ1AsTUFBTSxVQUFVLEdBQVcsUUFBUSxDQUFDO0FBRXBDLE1BQXFCLFNBQVM7SUFFMUI7Ozs7T0FJRztJQUNJLE1BQU0sQ0FBQyxLQUFLLENBQUMsU0FBaUI7UUFDakMsSUFBSSxJQUFJLEdBQVMsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDckMsSUFBSSxFQUFFLEdBQVcsRUFBRSxDQUFDO1FBQ3BCLElBQUksQ0FBQyxHQUFXLElBQUksQ0FBQyxRQUFRLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFDcEMsSUFBSSxDQUFDLEdBQVcsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBRS9CLElBQUksSUFBSSxHQUFXLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxFQUFFLENBQUM7UUFDckQsSUFBSSxJQUFJLEdBQVcsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQztRQUVyRCxFQUFFLEdBQUcsR0FBRyxJQUFJLElBQUksSUFBSSxFQUFFLENBQUM7UUFDdkIsT0FBTyxFQUFFLENBQUM7SUFDZCxDQUFDO0lBRUQ7Ozs7O09BS0c7SUFDSSxNQUFNLENBQUMsTUFBTSxDQUFDLFNBQXdCLEVBQUUsTUFBZTtRQUMxRCxJQUFJLElBQUksR0FBUyxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztRQUM3QyxJQUFJLEdBQUcsR0FBVyxFQUFFLENBQUM7UUFDckIsSUFB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RCxPQUFPLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUM1QyxDQUFDO0lBRUQ7OztPQUdHO0lBQ0ksTUFBTSxDQUFDLGtCQUFrQixDQUFDLE9BQWU7UUFDNUMsT0FBTyxDQUFDLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUM7SUFDekMsQ0FBQztJQUVEOzs7Ozs7T0FNRztJQUNJLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxTQUFpQixFQUFFLFFBQWdCLENBQUMsRUFBRSxTQUFpQixZQUFZO1FBQy9GLElBQUksYUFBYSxHQUFXLElBQUksQ0FBQyxlQUFlLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDNUQsSUFBSSxlQUFlLEdBQVcsYUFBYSxHQUFHLENBQUMsVUFBVSxHQUFHLEtBQUssQ0FBQyxDQUFBO1FBQ2xFLElBQUksT0FBTyxHQUFXLElBQUksSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUMvRCxPQUFPLE9BQU8sQ0FBQztJQUNuQixDQUFDO0lBRUQ7Ozs7T0FJRztJQUNJLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxTQUF3QixFQUFFLFNBQWlCLFlBQVk7UUFDcEYsT0FBTyxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDdEQsQ0FBQztDQUNKO0FBcFNELDRCQW9TQyIsImZpbGUiOiIiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBUeXBlVXRpbHMgZnJvbSBcIi4uLy4uL2NvbW1vbi91dGlscy9UeXBlVXRpbHNcIjtcbmltcG9ydCB7IFV0aWxNZ3IgfSBmcm9tIFwiLi4vLi4vZ2xvYmFsL1V0aWxNZ3JcIjtcblxuLy8g5LiA5aSp5q+r56eSXG5jb25zdCBPTkVfREFZX01TOiBudW1iZXIgPSA4NjQwMDAwMDtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRGF0ZVV0aWxzIHtcblxuICAgIC8qKlxuICAgICAqIOiOt+WPliDmnIjml6VcbiAgICAgKiBAcGFyYW0gdGltZXN0YW1wIHtudW1iZXJ9IOaXtumXtOaIs1xuICAgICAqIEByZXRydW4ge3N0cmluZ30gREQvTU1cbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIGdldE1EKHRpbWVzdGFtcDogbnVtYmVyKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IGRhdGU6IERhdGUgPSBuZXcgRGF0ZSh0aW1lc3RhbXApO1xuICAgICAgICBsZXQgbWQ6IHN0cmluZyA9IFwiXCI7XG4gICAgICAgIGxldCBtOiBudW1iZXIgPSBkYXRlLmdldE1vbnRoKCkgKyAxO1xuICAgICAgICBsZXQgZDogbnVtYmVyID0gZGF0ZS5nZXREYXRlKCk7XG5cbiAgICAgICAgbGV0IHN0ck06IHN0cmluZyA9IG0gPCAxMCA/IChcIjBcIiArIG0pIDogbS50b1N0cmluZygpO1xuICAgICAgICBsZXQgc3RyRDogc3RyaW5nID0gZCA8IDEwID8gKFwiMFwiICsgZCkgOiBkLnRvU3RyaW5nKCk7XG5cbiAgICAgICAgbWQgPSBgJHtzdHJEfS8ke3N0ck19YDtcbiAgICAgICAgcmV0dXJuIG1kO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOiOt+WPliDlubTmnIjml6VcbiAgICAgKiBAcGFyYW0gdGltZXN0YW1wIHtudW1iZXJ9IOaXtumXtOaIs1xuICAgICAqIEBwYXJhbSBzeW1ib2wge3N0cmluZ30g5YiG6ZqU56ymXG4gICAgICogQHJldHVybiB7c3RyaW5nfSBZWVlZL01NL0REIFxuICAgICAqL1xuICAgIHB1YmxpYyBzdGF0aWMgZ2V0WU1EKHRpbWVzdGFtcDogbnVtYmVyIHwgTG9uZywgc3ltYm9sPzogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IGRhdGU6IERhdGUgPSBuZXcgRGF0ZShOdW1iZXIodGltZXN0YW1wKSk7XG4gICAgICAgIGxldCB5bWQ6IHN0cmluZyA9IFwiXCI7XG4gICAgICAgIGxldCB5OiBudW1iZXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgIGxldCBtOiBudW1iZXIgPSBkYXRlLmdldE1vbnRoKCkgKyAxO1xuICAgICAgICBsZXQgZDogbnVtYmVyID0gZGF0ZS5nZXREYXRlKCk7XG5cbiAgICAgICAgaWYgKFR5cGVVdGlscy5pc051bGwoc3ltYm9sKSkge1xuICAgICAgICAgICAgc3ltYm9sID0gXCIvXCI7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgc3RyTTogc3RyaW5nID0gbSA8IDEwID8gKFwiMFwiICsgbSkgOiBtLnRvU3RyaW5nKCk7XG4gICAgICAgIGxldCBzdHJEOiBzdHJpbmcgPSBkIDwgMTAgPyAoXCIwXCIgKyBkKSA6IGQudG9TdHJpbmcoKTtcblxuICAgICAgICB5bWQgPSBgJHt5fSR7c3ltYm9sfSR7c3RyTX0ke3N5bWJvbH0ke3N0ckR9YDtcbiAgICAgICAgcmV0dXJuIHltZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDojrflj5Yg5pyI5pelIOaXtuWIhlxuICAgICAqIEBwYXJhbSB0aW1lc3RhbXAge251bWJlcn0g5pe26Ze05oizXG4gICAgICogQHJldHVybiB7U3RyaW5nfSBNTS1ERCBISDpNTVxuICAgICAqL1xuICAgIHB1YmxpYyBzdGF0aWMgZ2V0TURITSh0aW1lc3RhbXA6IG51bWJlcik6IHN0cmluZyB7XG4gICAgICAgIGxldCBkYXRlOiBEYXRlID0gbmV3IERhdGUodGltZXN0YW1wKTtcbiAgICAgICAgbGV0IHJlc3VsdDogc3RyaW5nID0gXCJcIjtcbiAgICAgICAgbGV0IG06IG51bWJlciA9IGRhdGUuZ2V0TW9udGgoKSArIDE7XG4gICAgICAgIGxldCBkOiBudW1iZXIgPSBkYXRlLmdldERhdGUoKTtcbiAgICAgICAgbGV0IGhvdXI6IG51bWJlciA9IGRhdGUuZ2V0SG91cnMoKTtcbiAgICAgICAgbGV0IG1pbnV0ZTogbnVtYmVyID0gZGF0ZS5nZXRNaW51dGVzKCk7XG5cblxuICAgICAgICBsZXQgc3RyTTogc3RyaW5nID0gbSA8IDEwID8gKFwiMFwiICsgbSkgOiBtLnRvU3RyaW5nKCk7XG4gICAgICAgIGxldCBzdHJEOiBzdHJpbmcgPSBkIDwgMTAgPyAoXCIwXCIgKyBkKSA6IGQudG9TdHJpbmcoKTtcbiAgICAgICAgbGV0IHN0ckhvdXI6IHN0cmluZyA9IGhvdXIgPCAxMCA/IChcIjBcIiArIGhvdXIpIDogaG91ci50b1N0cmluZygpO1xuICAgICAgICBsZXQgc3RyTWludXRlOiBzdHJpbmcgPSBtaW51dGUgPCAxMCA/IChcIjBcIiArIG1pbnV0ZSkgOiBtaW51dGUudG9TdHJpbmcoKTtcblxuXG4gICAgICAgIHJlc3VsdCA9IGAke3N0ck19LSR7c3RyRH0gJHtzdHJIb3VyfToke3N0ck1pbnV0ZX1gO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOiOt+WPliDmnIjml6Ug5pe25YiG56eSXG4gICAgICogQHBhcmFtIHRpbWVzdGFtcCB7bnVtYmVyfSDml7bpl7TmiLNcbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9IE1NLUREIEhIOk1NOlNTXG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyBnZXRNREhNUyh0aW1lc3RhbXA6IG51bWJlcik6IHN0cmluZyB7XG4gICAgICAgIGxldCBkYXRlOiBEYXRlID0gbmV3IERhdGUodGltZXN0YW1wKTtcbiAgICAgICAgbGV0IHJlc3VsdDogc3RyaW5nID0gXCJcIjtcbiAgICAgICAgbGV0IG06IG51bWJlciA9IGRhdGUuZ2V0TW9udGgoKSArIDE7XG4gICAgICAgIGxldCBkOiBudW1iZXIgPSBkYXRlLmdldERhdGUoKTtcbiAgICAgICAgbGV0IGhvdXI6IG51bWJlciA9IGRhdGUuZ2V0SG91cnMoKTtcbiAgICAgICAgbGV0IG1pbnV0ZTogbnVtYmVyID0gZGF0ZS5nZXRNaW51dGVzKCk7XG4gICAgICAgIGxldCBzZWM6IG51bWJlciA9IGRhdGUuZ2V0U2Vjb25kcygpO1xuXG5cbiAgICAgICAgbGV0IHN0ck06IHN0cmluZyA9IG0gPCAxMCA/IChcIjBcIiArIG0pIDogbS50b1N0cmluZygpO1xuICAgICAgICBsZXQgc3RyRDogc3RyaW5nID0gZCA8IDEwID8gKFwiMFwiICsgZCkgOiBkLnRvU3RyaW5nKCk7XG4gICAgICAgIGxldCBzdHJIb3VyOiBzdHJpbmcgPSBob3VyIDwgMTAgPyAoXCIwXCIgKyBob3VyKSA6IGhvdXIudG9TdHJpbmcoKTtcbiAgICAgICAgbGV0IHN0ck1pbnV0ZTogc3RyaW5nID0gbWludXRlIDwgMTAgPyAoXCIwXCIgKyBtaW51dGUpIDogbWludXRlLnRvU3RyaW5nKCk7XG4gICAgICAgIGxldCBzdHJTZWM6IHN0cmluZyA9IHNlYyA8IDEwID8gKFwiMFwiICsgc2VjKSA6IHNlYy50b1N0cmluZygpO1xuXG5cbiAgICAgICAgcmVzdWx0ID0gYCR7c3RyTX0tJHtzdHJEfSAke3N0ckhvdXJ9OiR7c3RyTWludXRlfToke3N0clNlY31gO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOiOt+WPliDml7bliIbnp5JcbiAgICAgKiBAcGFyYW0gdGltZXN0YW1wIHtudW1iZXJ9IOaXtumXtOaIs1xuICAgICAqIEByZXR1cm4ge1N0cmluZ30gSEg6TU06U1NcbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIGdldEhNUyh0aW1lc3RhbXA6IG51bWJlcik6IHN0cmluZyB7XG4gICAgICAgIGxldCBkYXRlOiBEYXRlID0gbmV3IERhdGUodGltZXN0YW1wKTtcbiAgICAgICAgbGV0IHJlc3VsdDogc3RyaW5nID0gXCJcIjtcbiAgICAgICAgbGV0IGhvdXI6IG51bWJlciA9IGRhdGUuZ2V0SG91cnMoKTtcbiAgICAgICAgbGV0IG1pbnV0ZTogbnVtYmVyID0gZGF0ZS5nZXRNaW51dGVzKCk7XG4gICAgICAgIGxldCBzZWM6IG51bWJlciA9IGRhdGUuZ2V0U2Vjb25kcygpO1xuXG5cbiAgICAgICAgbGV0IHN0ckhvdXI6IHN0cmluZyA9IGhvdXIgPCAxMCA/IChcIjBcIiArIGhvdXIpIDogaG91ci50b1N0cmluZygpO1xuICAgICAgICBsZXQgc3RyTWludXRlOiBzdHJpbmcgPSBtaW51dGUgPCAxMCA/IChcIjBcIiArIG1pbnV0ZSkgOiBtaW51dGUudG9TdHJpbmcoKTtcbiAgICAgICAgbGV0IHN0clNlYzogc3RyaW5nID0gc2VjIDwgMTAgPyAoXCIwXCIgKyBzZWMpIDogc2VjLnRvU3RyaW5nKCk7XG5cblxuICAgICAgICByZXN1bHQgPSBgJHtzdHJIb3VyfToke3N0ck1pbnV0ZX06JHtzdHJTZWN9YDtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDojrflj5Yg5bm05pyI5pelIOaXtuWIhuenklxuICAgICAqIEBwYXJhbSB0aW1lc3RhbXAge251bWJlcn0g5pe26Ze05oizXG4gICAgICogQHJldHVybiB7U3RyaW5nfSBZWVlZLk1NLkREIEhIOk1NOlNTXG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyBnZXRZTURITVModGltZXN0YW1wOiBudW1iZXIgfCBMb25nKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IGRhdGU6IERhdGUgPSBuZXcgRGF0ZShOdW1iZXIodGltZXN0YW1wKSk7XG4gICAgICAgIGxldCB5bWQ6IHN0cmluZyA9IFwiXCI7XG4gICAgICAgIGxldCB5OiBudW1iZXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgIGxldCBtOiBudW1iZXIgPSBkYXRlLmdldE1vbnRoKCkgKyAxO1xuICAgICAgICBsZXQgZDogbnVtYmVyID0gZGF0ZS5nZXREYXRlKCk7XG4gICAgICAgIGxldCBob3VyOiBudW1iZXIgPSBkYXRlLmdldEhvdXJzKCk7XG4gICAgICAgIGxldCBtaW51dGU6IG51bWJlciA9IGRhdGUuZ2V0TWludXRlcygpO1xuICAgICAgICBsZXQgc2VjOiBudW1iZXIgPSBkYXRlLmdldFNlY29uZHMoKTtcblxuICAgICAgICBsZXQgc3RyTTogc3RyaW5nID0gbSA8IDEwID8gKFwiMFwiICsgbSkgOiBtLnRvU3RyaW5nKCk7XG4gICAgICAgIGxldCBzdHJEOiBzdHJpbmcgPSBkIDwgMTAgPyAoXCIwXCIgKyBkKSA6IGQudG9TdHJpbmcoKTtcblxuICAgICAgICBsZXQgc3RySG91cjogc3RyaW5nID0gaG91ciA8IDEwID8gKFwiMFwiICsgaG91cikgOiBob3VyLnRvU3RyaW5nKCk7XG4gICAgICAgIGxldCBzdHJNaW51dGU6IHN0cmluZyA9IG1pbnV0ZSA8IDEwID8gKFwiMFwiICsgbWludXRlKSA6IG1pbnV0ZS50b1N0cmluZygpO1xuICAgICAgICBsZXQgc3RyU2VjOiBzdHJpbmcgPSBzZWMgPCAxMCA/IChcIjBcIiArIHNlYykgOiBzZWMudG9TdHJpbmcoKVxuXG4gICAgICAgIHltZCA9IGAke3l9LiR7c3RyTX0uJHtzdHJEfSAke3N0ckhvdXJ9OiR7c3RyTWludXRlfToke3N0clNlY31gO1xuICAgICAgICByZXR1cm4geW1kO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOiOt+WPluWJqeS9meaXtumXtCDml6Xml7ZcbiAgICAgKiBAcGFyYW0gY3VyclRpbWVzdGFtcCB7bnVtYmVyfSDlvZPliY3ml7bpl7TmiLNcbiAgICAgKiBAcGFyYW0gZW5kVGltZXN0YW1wIHtEYXRlfSDnu5PmnZ/ml7bpl7TmiLNcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IDFEMTJIXG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyBnZXRSZW1haW5UaW1lREgoY3VyclRpbWVzdGFtcDogbnVtYmVyLCBlbmRUaW1lc3RhbXA6IG51bWJlcik6IHN0cmluZyB7XG4gICAgICAgIGxldCByZXN1bHQ6IHN0cmluZyA9IFwiXCI7XG5cbiAgICAgICAgbGV0IGRpc3RUaW1lc3RhbXA6IG51bWJlciA9IGVuZFRpbWVzdGFtcCAtIGN1cnJUaW1lc3RhbXA7XG4gICAgICAgIGxldCBkaXN0U2VjOiBudW1iZXIgPSBkaXN0VGltZXN0YW1wIC8gMTAwMDtcbiAgICAgICAgaWYgKGRpc3RTZWMgPD0gMCkge1xuICAgICAgICAgICAgcmVzdWx0ID0gXCIwSFwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgREFZX1NFQzogbnVtYmVyID0gODY0MDA7XG4gICAgICAgICAgICBjb25zdCBIT1VSX1NFQzogbnVtYmVyID0gMzYwMFxuICAgICAgICAgICAgbGV0IGRheTogbnVtYmVyID0gTWF0aC5mbG9vcihkaXN0U2VjIC8gREFZX1NFQyk7XG4gICAgICAgICAgICBsZXQgaG91cjogbnVtYmVyID0gTWF0aC5jZWlsKChkaXN0U2VjICUgREFZX1NFQykgLyBIT1VSX1NFQyk7XG4gICAgICAgICAgICBpZiAoZGF5ID4gMCkge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGAke2RheX1EYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChob3VyID4gMCkge1xuICAgICAgICAgICAgICAgIHJlc3VsdCArPSBgJHtob3VyfUhgO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDojrflj5bliankvZnml7bpl7Qg5pe25YiG56eSXG4gICAgICogQHBhcmFtIGN1cnJUaW1lc3RhbXAge251bWJlcn0g5b2T5YmN5pe26Ze05oizXG4gICAgICogQHBhcmFtIGVuZFRpbWVzdGFtcCB7RGF0ZX0g57uT5p2f5pe26Ze05oizXG4gICAgICogQHJldHVybiB7c3RyaW5nfSBISDpNTTpTU1xuICAgICAqL1xuICAgIHB1YmxpYyBzdGF0aWMgZ2V0UmVtYWluVGltZUhNUyhjdXJyVGltZXN0YW1wOiBudW1iZXIsIGVuZFRpbWVzdGFtcDogbnVtYmVyKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IHJlc3VsdDogc3RyaW5nID0gXCJcIjtcblxuICAgICAgICBsZXQgbXM6IG51bWJlciA9IGVuZFRpbWVzdGFtcCAtIGN1cnJUaW1lc3RhbXA7XG4gICAgICAgIGlmIChtcyA8PSAwKSB7XG4gICAgICAgICAgICByZXN1bHQgPSBcIjAwOjAwOjAwXCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZXQgaG91ciA9IE1hdGguZmxvb3IobXMgLyAxMDAwIC8gNjAgLyA2MCAlIDI0KTtcbiAgICAgICAgICAgIGxldCBtaW51dGUgPSBNYXRoLmZsb29yKG1zIC8gMTAwMCAvIDYwICUgNjApO1xuICAgICAgICAgICAgbGV0IHNlYyA9IE1hdGguZmxvb3IobXMgLyAxMDAwICUgNjApO1xuICAgICAgICAgICAgbGV0IHN0ckhvdXI6IHN0cmluZyA9IGhvdXIgPCAxMCA/IChcIjBcIiArIGhvdXIpIDogaG91ci50b1N0cmluZygpO1xuICAgICAgICAgICAgbGV0IHN0ck1pbnV0ZTogc3RyaW5nID0gbWludXRlIDwgMTAgPyAoXCIwXCIgKyBtaW51dGUpIDogbWludXRlLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBsZXQgc3RyU2VjOiBzdHJpbmcgPSBzZWMgPCAxMCA/IChcIjBcIiArIHNlYykgOiBzZWMudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIHJlc3VsdCA9IGAke3N0ckhvdXJ9OiR7c3RyTWludXRlfToke3N0clNlY31gO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDojrflj5bliankvZnml7bpl7Qg5YiG56eSXG4gICAgICogQHBhcmFtIGN1cnJUaW1lc3RhbXAge251bWJlcn0g5b2T5YmN5pe26Ze05oizXG4gICAgICogQHBhcmFtIGVuZFRpbWVzdGFtcCB7RGF0ZX0g57uT5p2f5pe26Ze05oizXG4gICAgICogQHJldHVybiB7c3RyaW5nfSBNTVNTXG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyBnZXRSZW1haW5UaW1lTVMoY3VyclRpbWVzdGFtcDogbnVtYmVyLCBlbmRUaW1lc3RhbXA6IG51bWJlcik6IHN0cmluZyB7XG4gICAgICAgIGxldCByZXN1bHQ6IHN0cmluZyA9IFwiXCI7XG5cbiAgICAgICAgbGV0IG1zOiBudW1iZXIgPSBlbmRUaW1lc3RhbXAgLSBjdXJyVGltZXN0YW1wO1xuICAgICAgICBpZiAobXMgPD0gMCkge1xuICAgICAgICAgICAgcmVzdWx0ID0gXCIwMDAwXCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZXQgbWludXRlID0gTWF0aC5mbG9vcihtcyAvIDEwMDAgLyA2MCAlIDYwKTtcbiAgICAgICAgICAgIGxldCBzZWMgPSBNYXRoLmZsb29yKG1zIC8gMTAwMCAlIDYwKTtcbiAgICAgICAgICAgIGxldCBzdHJNaW51dGU6IHN0cmluZyA9IG1pbnV0ZSA8IDEwID8gKFwiMFwiICsgbWludXRlKSA6IG1pbnV0ZS50b1N0cmluZygpO1xuICAgICAgICAgICAgbGV0IHN0clNlYzogc3RyaW5nID0gc2VjIDwgMTAgPyAoXCIwXCIgKyBzZWMpIDogc2VjLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICByZXN1bHQgPSBgJHtzdHJNaW51dGV9JHtzdHJTZWN9YDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog6I635Y+W5Ymp5L2Z5pe26Ze0IOenklxuICAgICAqIEBwYXJhbSBjdXJyVGltZXN0YW1wIHtudW1iZXJ9IOW9k+WJjeaXtumXtOaIs1xuICAgICAqIEBwYXJhbSBlbmRUaW1lc3RhbXAge0RhdGV9IOe7k+adn+aXtumXtOaIs1xuICAgICAqIEByZXR1cm4ge251bWJlcn0gU1NcbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIGdldFJlbWFpblRpbWVTKGN1cnJUaW1lc3RhbXA6IG51bWJlciwgZW5kVGltZXN0YW1wOiBudW1iZXIpOiBudW1iZXIge1xuICAgICAgICBsZXQgcmVzdWx0OiBudW1iZXIgPSBudWxsO1xuXG4gICAgICAgIGxldCBtczogbnVtYmVyID0gZW5kVGltZXN0YW1wIC0gY3VyclRpbWVzdGFtcDtcbiAgICAgICAgaWYgKG1zIDw9IDApIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IDA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZXQgc2VjID0gTWF0aC5mbG9vcihtcyAvIDEwMDApO1xuICAgICAgICAgICAgcmVzdWx0ID0gc2VjO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDpgJrov4fmr6vnp5LovazmjaLkuLrnp5JcbiAgICAgKiBAcGFyYW0gbXMge251bWJlcn0g5q+r56eSXG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyBnZXRNc1RvUyhtczogbnVtYmVyKTogc3RyaW5nIHtcbiAgICAgICAgaWYgKG1zIDw9IDApIHtcbiAgICAgICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHNlYzogbnVtYmVyID0gbXMgLyAxMDAwO1xuICAgICAgICByZXR1cm4gVXRpbE1nci50b1BhZGRpbmcoVXRpbE1nci50b0ZpeGVkKHNlYywgMiksIDIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOeyvuehruavq+enkuaXtumXtOaIsyDovazmjaIg57K+56Gu5aSp5pe26Ze05oizXG4gICAgICogQHBhcmFtIHRpbWVzdGFtcCB7bnVtYmVyfSDnsr7noa7mr6vnp5Lml7bpl7TmiLNcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSDnsr7noa7lpKnml7bpl7TmiLNcbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIGdldERheVRpbWVzdGFtcCh0aW1lc3RhbXA6IG51bWJlcik6IG51bWJlciB7XG4gICAgICAgIGxldCBzdHJEYXRlOiBzdHJpbmcgPSBuZXcgRGF0ZSh0aW1lc3RhbXApLmZvcm1hdChcInl5eXktTU0tZGRcIik7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFRpbWVzdGFtcEJ5RGF0ZShzdHJEYXRlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDojrflj5bml7bpl7TmiLMg6YCa6L+H5pe26Ze05qC85byPXG4gICAgICogQHBhcmFtIHN0ckRhdGUge3N0cmluZ30g5a2X56ym5Liy5pel5pyfXG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyBnZXRUaW1lc3RhbXBCeURhdGUoc3RyRGF0ZTogc3RyaW5nKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIChuZXcgRGF0ZShzdHJEYXRlKSkuZ2V0VGltZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOiOt+WPluW9k+WJjeaXtumXtOaIsyDliY3lkI7lpKnmlbAg55qE5pel5pyfXG4gICAgICogQHBhcmFtIHRpbWVzdGFtcCB7bnVtYmVyfSDnsr7noa7mr6vnp5Lml7bpl7TmiLNcbiAgICAgKiBAcGFyYW0gYmFEYXkge251bWJlcn0g5YmN5ZCO5aSp5pWwXG4gICAgICogQHBhcmFtIGZvcm1hdCB7c3RyaW5nfSDmoLzlvI9cbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSDnsr7noa7lpKnml7bpl7TmiLNcbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIGdldERheUJlZm9yZUFmdGVyKHRpbWVzdGFtcDogbnVtYmVyLCBiYURheTogbnVtYmVyID0gMCwgZm9ybWF0OiBzdHJpbmcgPSBcInl5eXktTU0tZGRcIik6IHN0cmluZyB7XG4gICAgICAgIGxldCB6ZXJvVGltZXN0YW1wOiBudW1iZXIgPSB0aGlzLmdldERheVRpbWVzdGFtcCh0aW1lc3RhbXApO1xuICAgICAgICBsZXQgdGFyZ2V0VGltZXN0YW1wOiBudW1iZXIgPSB6ZXJvVGltZXN0YW1wICsgKE9ORV9EQVlfTVMgKiBiYURheSlcbiAgICAgICAgbGV0IHN0ckRhdGU6IHN0cmluZyA9IG5ldyBEYXRlKHRhcmdldFRpbWVzdGFtcCkuZm9ybWF0KGZvcm1hdCk7XG4gICAgICAgIHJldHVybiBzdHJEYXRlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOiOt+WPluaXpeacn+aXtumXtOmAmui/h+aXtumXtOaIs1xuICAgICAqIEBwYXJhbSB0aW1lc3RhbXAge251bWJlcn0g5pe26Ze05oizXG4gICAgICogQHBhcmFtIGZvcm1hdCB7c3RyaW5nfSDmoLzlvI9cbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIGdldERhdGVCeVRpbWVzdGFtcCh0aW1lc3RhbXA6IG51bWJlciB8IExvbmcsIGZvcm1hdDogc3RyaW5nID0gXCJ5eXl5LU1NLWRkXCIpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gbmV3IERhdGUoTnVtYmVyKHRpbWVzdGFtcCkpLmZvcm1hdChmb3JtYXQpO1xuICAgIH1cbn0iXX0=