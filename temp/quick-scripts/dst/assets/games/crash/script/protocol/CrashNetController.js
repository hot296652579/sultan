
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/games/crash/script/protocol/CrashNetController.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '38177rPutFL8Jw+gM0UDclH', 'CrashNetController');
// games/crash/script/protocol/CrashNetController.ts

"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const Manager_1 = require("../../../../script/common/manager/Manager");
const CmdResStruct_1 = require("../../../../script/common/net/CmdResStruct");
const LobbyService_1 = require("../../../../script/common/net/LobbyService");
const AppData_1 = __importDefault(require("../../../../script/data/AppData"));
const UserData_1 = __importDefault(require("../../../../script/data/UserData"));
const Controller_1 = __importDefault(require("../../../../script/framework/controller/Controller"));
const Decorators_1 = require("../../../../script/framework/decorator/Decorators");
const protoc_1 = require("../../../../script/framework/external/protoc");
const CrashData_1 = __importDefault(require("../data/CrashData"));
const CrashDefine_1 = require("../define/CrashDefine");
/**
 * @description 逻辑流程控制器
 */
const { ccclass, property } = cc._decorator;
let CrashNetController = class CrashNetController extends Controller_1.default {
    bindingEvents() {
        super.bindingEvents();
        this.registerRes();
        this.registerEvent(protoc_1.MST.OuterOpcode_CrashGame.M2C_GetCrashInfo_Res, this.onM2C_GetCrashInfo_Res);
        this.registerEvent(protoc_1.MST.OuterOpcode_CrashGame.M2C_CrashStart_mes, this.onM2C_CrashStart_mes);
        this.registerEvent(protoc_1.MST.OuterOpcode_CrashGame.M2C_MyCrashBet_Res, this.onM2C_MyCrashBet_Res);
        this.registerEvent(protoc_1.MST.OuterOpcode_CrashGame.M2C_CrashBet_Mes, this.onM2C_CrashBet_Mes);
        this.registerEvent(protoc_1.MST.OuterOpcode_CrashGame.M2C_CrashStop_Mes, this.onM2C_CrashStop_Mes);
        this.registerEvent(protoc_1.MST.OuterOpcode_CrashGame.M2C_CrashStartBet_Mes, this.onM2C_CrashStartBet_Mes);
        this.registerEvent(protoc_1.MST.OuterOpcode_CrashGame.M2C_CrashEscape_Mes, this.onM2C_CrashEscape_Mes);
        this.registerEvent(protoc_1.MST.OuterOpcode_CrashGame.M2C_CrashStopBet_Mes, this.onM2C_CrashStopBet_Mes);
        this.registerEvent(protoc_1.MST.OuterOpcode_CrashGame.M2C_CrashCancelAutoBet_Res, this.onM2C_CrashCancelAutoBet_Res);
        this.registerEvent(protoc_1.MST.OuterOpcode_CrashGame.M2C_CrashCancelAutoBet_Mes, this.onM2C_CrashCancelAutoBet_Mes);
        this.registerEvent(protoc_1.MST.OuterOpcode_CrashGame.M2C_CrashHash_Mes, this.onM2C_CrashHash_Mes);
        this.registerEvent(protoc_1.MST.OuterOpcode_CrashGame.M2C_CrashHashRecord_Res, this.onM2C_CrashHashRecord_Res);
        this.registerEvent(protoc_1.MST.OuterOpcode_CrashGame.S2C_CrashMyRecord, this.onS2C_CrashMyRecord);
        this.registerEvent(protoc_1.MST.OuterOpcode_Map.M2C_TransferMap_Res, this.onM2C_TransferMap_Res);
    }
    registerRes() {
        CmdResStruct_1.CmdResStruct.register(protoc_1.MST.OuterOpcode_CrashGame.M2C_GetCrashInfo_Res, protoc_1.MST.M2C_GetCrashInfo_Res);
        CmdResStruct_1.CmdResStruct.register(protoc_1.MST.OuterOpcode_CrashGame.M2C_CrashStart_mes, protoc_1.MST.M2C_CrashStart_mes);
        CmdResStruct_1.CmdResStruct.register(protoc_1.MST.OuterOpcode_CrashGame.M2C_MyCrashBet_Res, protoc_1.MST.M2C_MyCrashBet_Res);
        CmdResStruct_1.CmdResStruct.register(protoc_1.MST.OuterOpcode_CrashGame.M2C_CrashBet_Mes, protoc_1.MST.M2C_CrashBet_Mes);
        CmdResStruct_1.CmdResStruct.register(protoc_1.MST.OuterOpcode_CrashGame.M2C_CrashStop_Mes, protoc_1.MST.M2C_CrashStop_Mes);
        CmdResStruct_1.CmdResStruct.register(protoc_1.MST.OuterOpcode_CrashGame.M2C_CrashStartBet_Mes, protoc_1.MST.M2C_CrashStartBet_Mes);
        CmdResStruct_1.CmdResStruct.register(protoc_1.MST.OuterOpcode_CrashGame.M2C_CrashEscape_Mes, protoc_1.MST.M2C_CrashEscape_Mes);
        CmdResStruct_1.CmdResStruct.register(protoc_1.MST.OuterOpcode_CrashGame.M2C_CrashStopBet_Mes, protoc_1.MST.M2C_CrashStopBet_Mes);
        CmdResStruct_1.CmdResStruct.register(protoc_1.MST.OuterOpcode_CrashGame.M2C_CrashCancelAutoBet_Res, protoc_1.MST.M2C_CrashCancelAutoBet_Res);
        CmdResStruct_1.CmdResStruct.register(protoc_1.MST.OuterOpcode_CrashGame.M2C_CrashCancelAutoBet_Mes, protoc_1.MST.M2C_CrashCancelAutoBet_Mes);
        CmdResStruct_1.CmdResStruct.register(protoc_1.MST.OuterOpcode_CrashGame.M2C_CrashHash_Mes, protoc_1.MST.M2C_CrashHash_Mes);
        CmdResStruct_1.CmdResStruct.register(protoc_1.MST.OuterOpcode_CrashGame.M2C_CrashHashRecord_Res, protoc_1.MST.M2C_CrashHashRecord_Res);
        CmdResStruct_1.CmdResStruct.register(protoc_1.MST.OuterOpcode_CrashGame.S2C_CrashMyRecord, protoc_1.MST.S2C_CrashMyRecord);
        CmdResStruct_1.CmdResStruct.register(protoc_1.MST.OuterOpcode_Map.M2C_TransferMap_Res, protoc_1.MST.M2C_TransferMap_Res);
    }
    onM2C_GetCrashInfo_Res(data) {
        let crashData = G.DataMgr.get(CrashData_1.default);
        crashData.betList.length = 0;
        crashData.myBetList.length = 0;
        crashData.rateRecordList.length = 0;
        for (let v of data.Bets) {
            let betPlayer = {
                betInfo: v,
                isEscape: crashData.getRate() >= v.Multiple,
            };
            crashData.betList.push(betPlayer);
        }
        for (let v of data.MyBet) {
            let betPlayer = {
                betInfo: v,
                isEscape: crashData.getRate() >= v.Multiple,
            };
            crashData.myBetList.push(betPlayer);
        }
        crashData.betPlayerMap.clear();
        let index = 0;
        for (let i = crashData.myBetList.length - 1; i >= 0; --i) {
            crashData.betPlayerMap.set(index++, crashData.myBetList[i]);
        }
        for (let i = crashData.betList.length - 1; i >= 0; --i) {
            crashData.betPlayerMap.set(index++, crashData.betList[i]);
            if (crashData.betPlayerMap.size >= CrashDefine_1.CrashDefine.BET_LIST_COUNT) {
                break;
            }
        }
        crashData.status = data.Status;
        switch (crashData.status) {
            case protoc_1.MST.CrashStatus.StartBet:
                crashData.stopBetTimestamp = Number(data.StartTimeStamp);
                break;
            case protoc_1.MST.CrashStatus.GameBegin:
                crashData.startGameTimestamp = Number(data.StartTimeStamp);
                break;
            case protoc_1.MST.CrashStatus.GameOver:
                data.Multi = data.MultipleRecord[data.MultipleRecord.length - 1];
                break;
            default:
                crashData.stopBetTimestamp = 0;
                crashData.startGameTimestamp = 0;
                break;
        }
        crashData.rateRecordList = [].concat(data.MultipleRecord);
        crashData.betTotalGold = Number(data.TotalGold);
        crashData.betTotalCount = Number(data.TotalPlayer);
        crashData.autoBetData = data.AtuoBetInfo;
        crashData.hashInfo.serverSeed = data.SeedInfo.ServerSeedHash;
        crashData.hashInfo.publicSeed = data.SeedInfo.PublicSeed;
        crashData.hashInfo.gameNo = data.GameNo;
        if (data.Multi) {
            crashData.roundBombRate = Number(data.Multi);
        }
        dispatch("Event_M2C_GetCrashInfo_Res", data);
    }
    onM2C_CrashStart_mes(data) {
        let crashData = G.DataMgr.get(CrashData_1.default);
        crashData.status = protoc_1.MST.CrashStatus.GameBegin;
        crashData.startGameTimestamp = Number(data.StartTimeStamp);
        if (data.Multi) {
            crashData.roundBombRate = Number(data.Multi);
        }
        dispatch("Event_M2C_CrashStart_mes", data);
    }
    onM2C_MyCrashBet_Res(data) {
        dispatch("Event_M2C_MyCrashBet_Res", data);
    }
    onM2C_CrashBet_Mes(data) {
        let crashData = G.DataMgr.get(CrashData_1.default);
        let userData = G.DataMgr.get(UserData_1.default);
        crashData.betTotalGold = Number(data.TotalGold);
        crashData.betTotalCount = Number(data.TotalPlayer);
        for (let v of data.Bets) {
            let betPlayer = {
                betInfo: v,
                isEscape: false,
            };
            if (v.player.UnitId === userData.id) {
                crashData.myBetList.push(betPlayer);
            }
            else {
                crashData.betList.push(betPlayer);
            }
        }
        crashData.betPlayerMap.clear();
        let index = 0;
        for (let i = crashData.myBetList.length - 1; i >= 0; --i) {
            crashData.betPlayerMap.set(index++, crashData.myBetList[i]);
        }
        for (let i = crashData.betList.length - 1; i >= 0; --i) {
            crashData.betPlayerMap.set(index++, crashData.betList[i]);
            if (crashData.betPlayerMap.size >= CrashDefine_1.CrashDefine.BET_LIST_COUNT) {
                break;
            }
        }
        dispatch("Event_M2C_CrashBet_Mes", data);
    }
    onM2C_CrashStop_Mes(data) {
        let crashData = G.DataMgr.get(CrashData_1.default);
        crashData.status = protoc_1.MST.CrashStatus.GameOver;
        crashData.rateRecordList.push(Number(data.Multiples));
        crashData.bombTimestamp = Number(data.ExplosionTimeStamp);
        crashData.hashInfo.roundHash = data.HashResult;
        crashData.hashInfo.acak = data.Acak;
        crashData.hashInfo.point = Number(data.Multiples);
        dispatch("Event_M2C_CrashStop_Mes", data);
    }
    onM2C_CrashStartBet_Mes(data) {
        let crashData = G.DataMgr.get(CrashData_1.default);
        let appData = G.DataMgr.get(AppData_1.default);
        crashData.initNext();
        crashData.status = protoc_1.MST.CrashStatus.StartBet;
        crashData.startBetTimestamp = appData.getServerTimestamp();
        crashData.stopBetTimestamp = Number(data.StopBetTimeStamp);
        crashData.hashInfo.gameNo = data.GameNo;
        crashData.roundBombRate = null;
        dispatch("Event_M2C_CrashStartBet_Mes", data);
    }
    onM2C_CrashEscape_Mes(data) {
        dispatch("Event_M2C_CrashEscape_Mes", data);
    }
    onM2C_CrashStopBet_Mes(data) {
        let crashData = G.DataMgr.get(CrashData_1.default);
        crashData.status = protoc_1.MST.CrashStatus.StopBet;
        dispatch("Event_M2C_CrashStopBet_Mes", data);
    }
    onM2C_CrashCancelAutoBet_Res(data) {
        let crashData = G.DataMgr.get(CrashData_1.default);
        crashData.autoBetData = null;
        dispatch("Event_M2C_CrashCancelAutoBet_Res", data);
    }
    onM2C_CrashCancelAutoBet_Mes(data) {
        let crashData = G.DataMgr.get(CrashData_1.default);
        crashData.autoBetData = null;
        dispatch("Event_M2C_CrashCancelAutoBet_Mes", data);
    }
    onM2C_CrashHash_Mes(data) {
        let crashData = G.DataMgr.get(CrashData_1.default);
        crashData.hashInfo.serverSeed = data.SeedInfo.ServerSeed;
        crashData.hashInfo.serverSeedHash = data.SeedInfo.ServerSeedHash;
        crashData.hashInfo.publicSeed = data.SeedInfo.PublicSeed;
        dispatch("Event_M2C_CrashHash_Mes", data);
    }
    onM2C_CrashHashRecord_Res(data) {
        let crashData = G.DataMgr.get(CrashData_1.default);
        crashData.totalRecordData = data;
        dispatch("Event_M2C_CrashHashRecord_Res", data);
    }
    onS2C_CrashMyRecord(data) {
        dispatch("Event_S2C_CrashMyRecord", data);
    }
    onM2C_TransferMap_Res(data) {
        let userData = G.DataMgr.get(UserData_1.default);
        userData.inGame = data.RoomName;
        dispatch("Event_M2C_TransferMap_Res", data);
    }
};
CrashNetController = __decorate([
    ccclass,
    Decorators_1.injectService(LobbyService_1.LobbyService.instance)
], CrashNetController);
exports.default = CrashNetController;
Manager_1.Manager.netManager.push(CrashNetController);

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9nYW1lcy9jcmFzaC9zY3JpcHQvcHJvdG9jb2wvQ3Jhc2hOZXRDb250cm9sbGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsdUVBQW9FO0FBQ3BFLDZFQUEwRTtBQUMxRSw2RUFBMEU7QUFFMUUsOEVBQXNEO0FBRXRELGdGQUF3RDtBQUN4RCxvR0FBNEU7QUFDNUUsa0ZBQTJGO0FBQzNGLHlFQUFtRTtBQUNuRSxrRUFBMEM7QUFDMUMsdURBQW9EO0FBR3BEOztHQUVHO0FBQ0gsTUFBTSxFQUFFLE9BQU8sRUFBRSxRQUFRLEVBQUUsR0FBRyxFQUFFLENBQUMsVUFBVSxDQUFDO0FBSTVDLElBQXFCLGtCQUFrQixHQUF2QyxNQUFxQixrQkFBbUIsU0FBUSxvQkFBd0I7SUFFMUQsYUFBYTtRQUNuQixLQUFLLENBQUMsYUFBYSxFQUFFLENBQUM7UUFDdEIsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO1FBQ25CLElBQUksQ0FBQyxhQUFhLENBQUMsWUFBRyxDQUFDLHFCQUFxQixDQUFDLG9CQUFvQixFQUFFLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO1FBQ2hHLElBQUksQ0FBQyxhQUFhLENBQUMsWUFBRyxDQUFDLHFCQUFxQixDQUFDLGtCQUFrQixFQUFFLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDO1FBQzVGLElBQUksQ0FBQyxhQUFhLENBQUMsWUFBRyxDQUFDLHFCQUFxQixDQUFDLGtCQUFrQixFQUFFLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDO1FBQzVGLElBQUksQ0FBQyxhQUFhLENBQUMsWUFBRyxDQUFDLHFCQUFxQixDQUFDLGdCQUFnQixFQUFFLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO1FBQ3hGLElBQUksQ0FBQyxhQUFhLENBQUMsWUFBRyxDQUFDLHFCQUFxQixDQUFDLGlCQUFpQixFQUFFLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO1FBQzFGLElB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O1FBQ2pDLFFBQVEsQ0FBQywrQkFBK0IsRUFBRSxJQUFJLENBQUMsQ0FBQztJQUNwRCxDQUFDO0lBRU0sbUJBQW1CLENBQUMsSUFBNEI7UUFDbkQsUUFBUSxDQUFDLHlCQUF5QixFQUFFLElBQUksQ0FBQyxDQUFDO0lBQzlDLENBQUM7SUFFTSxxQkFBcUIsQ0FBQyxJQUE4QjtRQUN2RCxJQUFJLFFBQVEsR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxrQkFBUSxDQUFDLENBQUM7UUFDdkMsUUFBUSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDO1FBQ2hDLFFBQVEsQ0FBQywyQkFBMkIsRUFBRSxJQUFJLENBQUMsQ0FBQztJQUNoRCxDQUFDO0NBRUosQ0FBQTtBQTdOb0Isa0JBQWtCO0lBRnRDLE9BQU87SUFDUCwwQkFBYSxDQUFDLDJCQUFZLENBQUMsUUFBUSxDQUFDO0dBQ2hCLGtCQUFrQixDQTZOdEM7a0JBN05vQixrQkFBa0I7QUErTnZDLGlCQUFPLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDIiwiZmlsZSI6IiIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTWFuYWdlciB9IGZyb20gXCIuLi8uLi8uLi8uLi9zY3JpcHQvY29tbW9uL21hbmFnZXIvTWFuYWdlclwiO1xuaW1wb3J0IHsgQ21kUmVzU3RydWN0IH0gZnJvbSBcIi4uLy4uLy4uLy4uL3NjcmlwdC9jb21tb24vbmV0L0NtZFJlc1N0cnVjdFwiO1xuaW1wb3J0IHsgTG9iYnlTZXJ2aWNlIH0gZnJvbSBcIi4uLy4uLy4uLy4uL3NjcmlwdC9jb21tb24vbmV0L0xvYmJ5U2VydmljZVwiO1xuaW1wb3J0IE51bWJlclV0aWxzIGZyb20gXCIuLi8uLi8uLi8uLi9zY3JpcHQvY29tbW9uL3V0aWxzL051bWJlclV0aWxzXCI7XG5pbXBvcnQgQXBwRGF0YSBmcm9tIFwiLi4vLi4vLi4vLi4vc2NyaXB0L2RhdGEvQXBwRGF0YVwiO1xuaW1wb3J0IEhhbGxEYXRhIGZyb20gXCIuLi8uLi8uLi8uLi9zY3JpcHQvZGF0YS9IYWxsRGF0YVwiO1xuaW1wb3J0IFVzZXJEYXRhIGZyb20gXCIuLi8uLi8uLi8uLi9zY3JpcHQvZGF0YS9Vc2VyRGF0YVwiO1xuaW1wb3J0IENvbnRyb2xsZXIgZnJvbSBcIi4uLy4uLy4uLy4uL3NjcmlwdC9mcmFtZXdvcmsvY29udHJvbGxlci9Db250cm9sbGVyXCI7XG5pbXBvcnQgeyBpbmplY3RTZXJ2aWNlLCBtYWtlS2V5IH0gZnJvbSBcIi4uLy4uLy4uLy4uL3NjcmlwdC9mcmFtZXdvcmsvZGVjb3JhdG9yL0RlY29yYXRvcnNcIjtcbmltcG9ydCB7IE1TVCB9IGZyb20gXCIuLi8uLi8uLi8uLi9zY3JpcHQvZnJhbWV3b3JrL2V4dGVybmFsL3Byb3RvY1wiO1xuaW1wb3J0IENyYXNoRGF0YSBmcm9tIFwiLi4vZGF0YS9DcmFzaERhdGFcIjtcbmltcG9ydCB7IENyYXNoRGVmaW5lIH0gZnJvbSBcIi4uL2RlZmluZS9DcmFzaERlZmluZVwiO1xuaW1wb3J0IHsgQ3Jhc2hJbnRlcmZhY2UgfSBmcm9tIFwiLi4vaW50ZXJmYWNlL0NyYXNoSW50ZXJmYWNlXCI7XG5cbi8qKlxuICogQGRlc2NyaXB0aW9uIOmAu+i+kea1geeoi+aOp+WItuWZqCAgXG4gKi9cbmNvbnN0IHsgY2NjbGFzcywgcHJvcGVydHkgfSA9IGNjLl9kZWNvcmF0b3I7XG5cbkBjY2NsYXNzXG5AaW5qZWN0U2VydmljZShMb2JieVNlcnZpY2UuaW5zdGFuY2UpXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDcmFzaE5ldENvbnRyb2xsZXIgZXh0ZW5kcyBDb250cm9sbGVyPExvYmJ5U2VydmljZT4ge1xuXG4gICAgcHJvdGVjdGVkIGJpbmRpbmdFdmVudHMoKSB7XG4gICAgICAgIHN1cGVyLmJpbmRpbmdFdmVudHMoKTtcbiAgICAgICAgdGhpcy5yZWdpc3RlclJlcygpO1xuICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoTVNULk91dGVyT3Bjb2RlX0NyYXNoR2FtZS5NMkNfR2V0Q3Jhc2hJbmZvX1JlcywgdGhpcy5vbk0yQ19HZXRDcmFzaEluZm9fUmVzKTtcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KE1TVC5PdXRlck9wY29kZV9DcmFzaEdhbWUuTTJDX0NyYXNoU3RhcnRfbWVzLCB0aGlzLm9uTTJDX0NyYXNoU3RhcnRfbWVzKTtcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KE1TVC5PdXRlck9wY29kZV9DcmFzaEdhbWUuTTJDX015Q3Jhc2hCZXRfUmVzLCB0aGlzLm9uTTJDX015Q3Jhc2hCZXRfUmVzKTtcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KE1TVC5PdXRlck9wY29kZV9DcmFzaEdhbWUuTTJDX0NyYXNoQmV0X01lcywgdGhpcy5vbk0yQ19DcmFzaEJldF9NZXMpO1xuICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoTVNULk91dGVyT3Bjb2RlX0NyYXNoR2FtZS5NMkNfQ3Jhc2hTdG9wX01lcywgdGhpcy5vbk0yQ19DcmFzaFN0b3BfTWVzKTtcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KE1TVC5PdXRlck9wY29kZV9DcmFzaEdhbWUuTTJDX0NyYXNoU3RhcnRCZXRfTWVzLCB0aGlzLm9uTTJDX0NyYXNoU3RhcnRCZXRfTWVzKTtcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KE1TVC5PdXRlck9wY29kZV9DcmFzaEdhbWUuTTJDX0NyYXNoRXNjYXBlX01lcywgdGhpcy5vbk0yQ19DcmFzaEVzY2FwZV9NZXMpO1xuICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoTVNULk91dGVyT3Bjb2RlX0NyYXNoR2FtZS5NMkNfQ3Jhc2hTdG9wQmV0X01lcywgdGhpcy5vbk0yQ19DcmFzaFN0b3BCZXRfTWVzKTtcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KE1TVC5PdXRlck9wY29kZV9DcmFzaEdhbWUuTTJDX0NyYXNoQ2FuY2VsQXV0b0JldF9SZXMsIHRoaXMub25NMkNfQ3Jhc2hDYW5jZWxBdXRvQmV0X1Jlcyk7XG4gICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudChNU1QuT3V0ZXJPcGNvZGVfQ3Jhc2hHYW1lLk0yQ19DcmFzaENhbmNlbEF1dG9CZXRfTWVzLCB0aGlzLm9uTTJDX0NyYXNoQ2FuY2VsQXV0b0JldF9NZXMpO1xuICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoTVNULk91dGVyT3Bjb2RlX0NyYXNoR2FtZS5NMkNfQ3Jhc2hIYXNoX01lcywgdGhpcy5vbk0yQ19DcmFzaEhhc2hfTWVzKTtcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KE1TVC5PdXRlck9wY29kZV9DcmFzaEdhbWUuTTJDX0NyYXNoSGFzaFJlY29yZF9SZXMsIHRoaXMub25NMkNfQ3Jhc2hIYXNoUmVjb3JkX1Jlcyk7XG4gICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudChNU1QuT3V0ZXJPcGNvZGVfQ3Jhc2hHYW1lLlMyQ19DcmFzaE15UmVjb3JkLCB0aGlzLm9uUzJDX0NyYXNoTXlSZWNvcmQpO1xuICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoTVNULk91dGVyT3Bjb2RlX01hcC5NMkNfVHJhbnNmZXJNYXBfUmVzLCB0aGlzLm9uTTJDX1RyYW5zZmVyTWFwX1Jlcyk7XG5cbiAgICB9XG5cbiAgICBwcml2YXRlIHJlZ2lzdGVyUmVzKCkge1xuICAgICAgICBDbWRSZXNTdHJ1Y3QucmVnaXN0ZXIoTVNULk91dGVyT3Bjb2RlX0NyYXNoR2FtZS5NMkNfR2V0Q3Jhc2hJbmZvX1JlcywgTVNULk0yQ19HZXRDcmFzaEluZm9fUmVzKTtcbiAgICAgICAgQ21kUmVzU3RydWN0LnJlZ2lzdGVyKE1TVC5PdXRlck9wY29kZV9DcmFzaEdhbWUuTTJDX0NyYXNoU3RhcnRfbWVzLCBNU1QuTTJDX0NyYXNoU3RhcnRfbWVzKTtcbiAgICAgICAgQ21kUmVzU3RydWN0LnJlZ2lzdGVyKE1TVC5PdXRlck9wY29kZV9DcmFzaEdhbWUuTTJDX015Q3Jhc2hCZXRfUmVzLCBNU1QuTTJDX015Q3Jhc2hCZXRfUmVzKTtcbiAgICAgICAgQ21kUmVzU3RydWN0LnJlZ2lzdGVyKE1TVC5PdXRlck9wY29kZV9DcmFzaEdhbWUuTTJDX0NyYXNoQmV0X01lcywgTVNULk0yQ19DcmFzaEJldF9NZXMpO1xuICAgICAgICBDbWRSZXNTdHJ1Y3QucmVnaXN0ZXIoTVNULk91dGVyT3Bjb2RlX0NyYXNoR2FtZS5NMkNfQ3Jhc2hTdG9wX01lcywgTVNULk0yQ19DcmFzaFN0b3BfTWVzKTtcbiAgICAgICAgQ21kUmVzU3RydWN0LnJlZ2lzdGVyKE1TVC5PdXRlck9wY29kZV9DcmFzaEdhbWUuTTJDX0NyYXNoU3RhcnRCZXRfTWVzLCBNU1QuTTJDX0NyYXNoU3RhcnRCZXRfTWVzKTtcbiAgICAgICAgQ21kUmVzU3RydWN0LnJlZ2lzdGVyKE1TVC5PdXRlck9wY29kZV9DcmFzaEdhbWUuTTJDX0NyYXNoRXNjYXBlX01lcywgTVNULk0yQ19DcmFzaEVzY2FwZV9NZXMpO1xuICAgICAgICBDbWRSZXNTdHJ1Y3QucmVnaXN0ZXIoTVNULk91dGVyT3Bjb2RlX0NyYXNoR2FtZS5NMkNfQ3Jhc2hTdG9wQmV0X01lcywgTVNULk0yQ19DcmFzaFN0b3BCZXRfTWVzKTtcbiAgICAgICAgQ21kUmVzU3RydWN0LnJlZ2lzdGVyKE1TVC5PdXRlck9wY29kZV9DcmFzaEdhbWUuTTJDX0NyYXNoQ2FuY2VsQXV0b0JldF9SZXMsIE1TVC5NMkNfQ3Jhc2hDYW5jZWxBdXRvQmV0X1Jlcyk7XG4gICAgICAgIENtZFJlc1N0cnVjdC5yZWdpc3RlcihNU1QuT3V0ZXJPcGNvZGVfQ3Jhc2hHYW1lLk0yQ19DcmFzaENhbmNlbEF1dG9CZXRfTWVzLCBNU1QuTTJDX0NyYXNoQ2FuY2VsQXV0b0JldF9NZXMpO1xuICAgICAgICBDbWRSZXNTdHJ1Y3QucmVnaXN0ZXIoTVNULk91dGVyT3Bjb2RlX0NyYXNoR2FtZS5NMkNfQ3Jhc2hIYXNoX01lcywgTVNULk0yQ19DcmFzaEhhc2hfTWVzKTtcbiAgICAgICAgQ21kUmVzU3RydWN0LnJlZ2lzdGVyKE1TVC5PdXRlck9wY29kZV9DcmFzaEdhbWUuTTJDX0NyYXNoSGFzaFJlY29yZF9SZXMsIE1TVC5NMkNfQ3Jhc2hIYXNoUmVjb3JkX1Jlcyk7XG4gICAgICAgIENtZFJlc1N0cnVjdC5yZWdpc3RlcihNU1QuT3V0ZXJPcGNvZGVfQ3Jhc2hHYW1lLlMyQ19DcmFzaE15UmVjb3JkLCBNU1QuUzJDX0NyYXNoTXlSZWNvcmQpO1xuICAgICAgICBDbWRSZXNTdHJ1Y3QucmVnaXN0ZXIoTVNULk91dGVyT3Bjb2RlX01hcC5NMkNfVHJhbnNmZXJNYXBfUmVzLCBNU1QuTTJDX1RyYW5zZmVyTWFwX1Jlcyk7XG5cbiAgICB9XG5cbiAgICBwdWJsaWMgb25NMkNfR2V0Q3Jhc2hJbmZvX1JlcyhkYXRhOiBNU1QuSU0yQ19HZXRDcmFzaEluZm9fUmVzKSB7XG4gICAgICAgIGxldCBjcmFzaERhdGE6IENyYXNoRGF0YSA9IEcuRGF0YU1nci5nZXQoQ3Jhc2hEYXRhKTtcbiAgICAgICAgY3Jhc2hEYXRhLmJldExpc3QubGVuZ3RoID0gMDtcbiAgICAgICAgY3Jhc2hEYXRhLm15QmV0TGlzdC5sZW5ndGggPSAwO1xuICAgICAgICBjcmFzaERhdGEucmF0ZVJlY29yZExpc3QubGVuZ3RoID0gMDtcblxuICAgICAgICBmb3IgKGxldCB2IG9mIGRhdGEuQmV0cykge1xuICAgICAgICAgICAgbGV0IGJldFBsYXllcjogQ3Jhc2hJbnRlcmZhY2UuQmV0UGxheWVyID0ge1xuICAgICAgICAgICAgICAgIGJldEluZm86IHYsXG4gICAgICAgICAgICAgICAgaXNFc2NhcGU6IGNyYXNoRGF0YS5nZXRSYXRlKCkgPj0gdi5NdWx0aXBsZSxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNyYXNoRGF0YS5iZXRMaXN0LnB1c2goYmV0UGxheWVyKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCB2IG9mIGRhdGEuTXlCZXQpIHtcbiAgICAgICAgICAgIGxldCBiZXRQbGF5ZXI6IENyYXNoSW50ZXJmYWNlLkJldFBsYXllciA9IHtcbiAgICAgICAgICAgICAgICBiZXRJbmZvOiB2LFxuICAgICAgICAgICAgICAgIGlzRXNjYXBlOiBjcmFzaERhdGEuZ2V0UmF0ZSgpID49IHYuTXVsdGlwbGUsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjcmFzaERhdGEubXlCZXRMaXN0LnB1c2goYmV0UGxheWVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNyYXNoRGF0YS5iZXRQbGF5ZXJNYXAuY2xlYXIoKTtcbiAgICAgICAgbGV0IGluZGV4OiBudW1iZXIgPSAwO1xuICAgICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSBjcmFzaERhdGEubXlCZXRMaXN0Lmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgICAgICBjcmFzaERhdGEuYmV0UGxheWVyTWFwLnNldChpbmRleCsrLCBjcmFzaERhdGEubXlCZXRMaXN0W2ldKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSBjcmFzaERhdGEuYmV0TGlzdC5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICAgICAgY3Jhc2hEYXRhLmJldFBsYXllck1hcC5zZXQoaW5kZXgrKywgY3Jhc2hEYXRhLmJldExpc3RbaV0pO1xuICAgICAgICAgICAgaWYgKGNyYXNoRGF0YS5iZXRQbGF5ZXJNYXAuc2l6ZSA+PSBDcmFzaERlZmluZS5CRVRfTElTVF9DT1VOVCkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY3Jhc2hEYXRhLnN0YXR1cyA9IGRhdGEuU3RhdHVzO1xuICAgICAgICBzd2l0Y2ggKGNyYXNoRGF0YS5zdGF0dXMpIHtcbiAgICAgICAgICAgIGNhc2UgTVNULkNyYXNoU3RhdHVzLlN0YXJ0QmV0OlxuICAgICAgICAgICAgICAgIGNyYXNoRGF0YS5zdG9wQmV0VGltZXN0YW1wID0gTnVtYmVyKGRhdGEuU3RhcnRUaW1lU3RhbXApO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBNU1QuQ3Jhc2hTdGF0dXMuR2FtZUJlZ2luOlxuICAgICAgICAgICAgICAgIGNyYXNoRGF0YS5zdGFydEdhbWVUaW1lc3RhbXAgPSBOdW1iZXIoZGF0YS5TdGFydFRpbWVTdGFtcCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIE1TVC5DcmFzaFN0YXR1cy5HYW1lT3ZlcjpcbiAgICAgICAgICAgICAgICBkYXRhLk11bHRpID0gZGF0YS5NdWx0aXBsZVJlY29yZFtkYXRhLk11bHRpcGxlUmVjb3JkLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBjcmFzaERhdGEuc3RvcEJldFRpbWVzdGFtcCA9IDA7XG4gICAgICAgICAgICAgICAgY3Jhc2hEYXRhLnN0YXJ0R2FtZVRpbWVzdGFtcCA9IDA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY3Jhc2hEYXRhLnJhdGVSZWNvcmRMaXN0ID0gW10uY29uY2F0KGRhdGEuTXVsdGlwbGVSZWNvcmQpO1xuICAgICAgICBjcmFzaERhdGEuYmV0VG90YWxHb2xkID0gTnVtYmVyKGRhdGEuVG90YWxHb2xkKTtcbiAgICAgICAgY3Jhc2hEYXRhLmJldFRvdGFsQ291bnQgPSBOdW1iZXIoZGF0YS5Ub3RhbFBsYXllcik7XG4gICAgICAgIGNyYXNoRGF0YS5hdXRvQmV0RGF0YSA9IGRhdGEuQXR1b0JldEluZm87XG4gICAgICAgIGNyYXNoRGF0YS5oYXNoSW5mby5zZXJ2ZXJTZWVkID0gZGF0YS5TZWVkSW5mby5TZXJ2ZXJTZWVkSGFzaDtcbiAgICAgICAgY3Jhc2hEYXRhLmhhc2hJbmZvLnB1YmxpY1NlZWQgPSBkYXRhLlNlZWRJbmZvLlB1YmxpY1NlZWQ7XG4gICAgICAgIGNyYXNoRGF0YS5oYXNoSW5mby5nYW1lTm8gPSBkYXRhLkdhbWVObztcbiAgICAgICAgaWYgKGRhdGEuTXVsdGkpIHtcbiAgICAgICAgICAgIGNyYXNoRGF0YS5yb3VuZEJvbWJSYXRlID0gTnVtYmVyKGRhdGEuTXVsdGkpO1xuICAgICAgICB9XG4gICAgICAgIGRpc3BhdGNoKFwiRXZlbnRfTTJDX0dldENyYXNoSW5mb19SZXNcIiwgZGF0YSk7XG4gICAgfVxuXG4gICAgcHVibGljIG9uTTJDX0NyYXNoU3RhcnRfbWVzKGRhdGE6IE1TVC5JTTJDX0NyYXNoU3RhcnRfbWVzKSB7XG4gICAgICAgIGxldCBjcmFzaERhdGE6IENyYXNoRGF0YSA9IEcuRGF0YU1nci5nZXQoQ3Jhc2hEYXRhKTtcbiAgICAgICAgY3Jhc2hEYXRhLnN0YXR1cyA9IE1TVC5DcmFzaFN0YXR1cy5HYW1lQmVnaW47XG4gICAgICAgIGNyYXNoRGF0YS5zdGFydEdhbWVUaW1lc3RhbXAgPSBOdW1iZXIoZGF0YS5TdGFydFRpbWVTdGFtcCk7XG4gICAgICAgIGlmIChkYXRhLk11bHRpKSB7XG4gICAgICAgICAgICBjcmFzaERhdGEucm91bmRCb21iUmF0ZSA9IE51bWJlcihkYXRhLk11bHRpKTtcbiAgICAgICAgfVxuICAgICAgICBkaXNwYXRjaChcIkV2ZW50X00yQ19DcmFzaFN0YXJ0X21lc1wiLCBkYXRhKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgb25NMkNfTXlDcmFzaEJldF9SZXMoZGF0YTogTVNULklNMkNfTXlDcmFzaEJldF9SZXMpIHtcbiAgICAgICAgZGlzcGF0Y2goXCJFdmVudF9NMkNfTXlDcmFzaEJldF9SZXNcIiwgZGF0YSk7XG4gICAgfVxuXG4gICAgcHVibGljIG9uTTJDX0NyYXNoQmV0X01lcyhkYXRhOiBNU1QuSU0yQ19DcmFzaEJldF9NZXMpIHtcbiAgICAgICAgbGV0IGNyYXNoRGF0YTogQ3Jhc2hEYXRhID0gRy5EYXRhTWdyLmdldChDcmFzaERhdGEpO1xuICAgICAgICBsZXQgdXNlckRhdGE6IFVzZXJEYXRhID0gRy5EYXRhTWdyLmdldChVc2VyRGF0YSk7XG4gICAgICAgIGNyYXNoRGF0YS5iZXRUb3RhbEdvbGQgPSBOdW1iZXIoZGF0YS5Ub3RhbEdvbGQpO1xuICAgICAgICBjcmFzaERhdGEuYmV0VG90YWxDb3VudCA9IE51bWJlcihkYXRhLlRvdGFsUGxheWVyKTtcbiAgICAgICAgZm9yIChsZXQgdiBvZiBkYXRhLkJldHMpIHtcbiAgICAgICAgICAgIGxldCBiZXRQbGF5ZXI6IENyYXNoSW50ZXJmYWNlLkJldFBsYXllciA9IHtcbiAgICAgICAgICAgICAgICBiZXRJbmZvOiB2LFxuICAgICAgICAgICAgICAgIGlzRXNjYXBlOiBmYWxzZSxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh2LnBsYXllci5Vbml0SWQgPT09IHVzZXJEYXRhLmlkKSB7XG4gICAgICAgICAgICAgICAgY3Jhc2hEYXRhLm15QmV0TGlzdC5wdXNoKGJldFBsYXllcik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNyYXNoRGF0YS5iZXRMaXN0LnB1c2goYmV0UGxheWVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNyYXNoRGF0YS5iZXRQbGF5ZXJNYXAuY2xlYXIoKTtcbiAgICAgICAgbGV0IGluZGV4OiBudW1iZXIgPSAwO1xuICAgICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSBjcmFzaERhdGEubXlCZXRMaXN0Lmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgICAgICBjcmFzaERhdGEuYmV0UGxheWVyTWFwLnNldChpbmRleCsrLCBjcmFzaERhdGEubXlCZXRMaXN0W2ldKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSBjcmFzaERhdGEuYmV0TGlzdC5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICAgICAgY3Jhc2hEYXRhLmJldFBsYXllck1hcC5zZXQoaW5kZXgrKywgY3Jhc2hEYXRhLmJldExpc3RbaV0pO1xuICAgICAgICAgICAgaWYgKGNyYXNoRGF0YS5iZXRQbGF5ZXJNYXAuc2l6ZSA+PSBDcmFzaERlZmluZS5CRVRfTElTVF9DT1VOVCkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZGlzcGF0Y2goXCJFdmVudF9NMkNfQ3Jhc2hCZXRfTWVzXCIsIGRhdGEpO1xuICAgIH1cblxuICAgIHB1YmxpYyBvbk0yQ19DcmFzaFN0b3BfTWVzKGRhdGE6IE1TVC5JTTJDX0NyYXNoU3RvcF9NZXMpIHtcbiAgICAgICAgbGV0IGNyYXNoRGF0YTogQ3Jhc2hEYXRhID0gRy5EYXRhTWdyLmdldChDcmFzaERhdGEpO1xuICAgICAgICBjcmFzaERhdGEuc3RhdHVzID0gTVNULkNyYXNoU3RhdHVzLkdhbWVPdmVyO1xuICAgICAgICBjcmFzaERhdGEucmF0ZVJlY29yZExpc3QucHVzaChOdW1iZXIoZGF0YS5NdWx0aXBsZXMpKTtcbiAgICAgICAgY3Jhc2hEYXRhLmJvbWJUaW1lc3RhbXAgPSBOdW1iZXIoZGF0YS5FeHBsb3Npb25UaW1lU3RhbXApO1xuICAgICAgICBjcmFzaERhdGEuaGFzaEluZm8ucm91bmRIYXNoID0gZGF0YS5IYXNoUmVzdWx0O1xuICAgICAgICBjcmFzaERhdGEuaGFzaEluZm8uYWNhayA9IGRhdGEuQWNhaztcbiAgICAgICAgY3Jhc2hEYXRhLmhhc2hJbmZvLnBvaW50ID0gTnVtYmVyKGRhdGEuTXVsdGlwbGVzKTtcbiAgICAgICAgZGlzcGF0Y2goXCJFdmVudF9NMkNfQ3Jhc2hTdG9wX01lc1wiLCBkYXRhKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgb25NMkNfQ3Jhc2hTdGFydEJldF9NZXMoZGF0YTogTVNULklNMkNfQ3Jhc2hTdGFydEJldF9NZXMpIHtcbiAgICAgICAgbGV0IGNyYXNoRGF0YTogQ3Jhc2hEYXRhID0gRy5EYXRhTWdyLmdldChDcmFzaERhdGEpO1xuICAgICAgICBsZXQgYXBwRGF0YTogQXBwRGF0YSA9IEcuRGF0YU1nci5nZXQoQXBwRGF0YSk7XG4gICAgICAgIGNyYXNoRGF0YS5pbml0TmV4dCgpO1xuICAgICAgICBjcmFzaERhdGEuc3RhdHVzID0gTVNULkNyYXNoU3RhdHVzLlN0YXJ0QmV0O1xuICAgICAgICBjcmFzaERhdGEuc3RhcnRCZXRUaW1lc3RhbXAgPSBhcHBEYXRhLmdldFNlcnZlclRpbWVzdGFtcCgpO1xuICAgICAgICBjcmFzaERhdGEuc3RvcEJldFRpbWVzdGFtcCA9IE51bWJlcihkYXRhLlN0b3BCZXRUaW1lU3RhbXApO1xuICAgICAgICBjcmFzaERhdGEuaGFzaEluZm8uZ2FtZU5vID0gZGF0YS5HYW1lTm87XG4gICAgICAgIGNyYXNoRGF0YS5yb3VuZEJvbWJSYXRlID0gbnVsbDtcbiAgICAgICAgZGlzcGF0Y2goXCJFdmVudF9NMkNfQ3Jhc2hTdGFydEJldF9NZXNcIiwgZGF0YSk7XG4gICAgfVxuXG4gICAgcHVibGljIG9uTTJDX0NyYXNoRXNjYXBlX01lcyhkYXRhOiBNU1QuSU0yQ19DcmFzaEVzY2FwZV9NZXMpIHtcbiAgICAgICAgZGlzcGF0Y2goXCJFdmVudF9NMkNfQ3Jhc2hFc2NhcGVfTWVzXCIsIGRhdGEpO1xuICAgIH1cblxuICAgIHB1YmxpYyBvbk0yQ19DcmFzaFN0b3BCZXRfTWVzKGRhdGE6IE1TVC5JTTJDX0NyYXNoU3RvcEJldF9NZXMpIHtcbiAgICAgICAgbGV0IGNyYXNoRGF0YTogQ3Jhc2hEYXRhID0gRy5EYXRhTWdyLmdldChDcmFzaERhdGEpO1xuICAgICAgICBjcmFzaERhdGEuc3RhdHVzID0gTVNULkNyYXNoU3RhdHVzLlN0b3BCZXQ7XG4gICAgICAgIGRpc3BhdGNoKFwiRXZlbnRfTTJDX0NyYXNoU3RvcEJldF9NZXNcIiwgZGF0YSk7XG4gICAgfVxuXG4gICAgcHVibGljIG9uTTJDX0NyYXNoQ2FuY2VsQXV0b0JldF9SZXMoZGF0YTogTVNULklNMkNfQ3Jhc2hDYW5jZWxBdXRvQmV0X1Jlcyk6IHZvaWQge1xuICAgICAgICBsZXQgY3Jhc2hEYXRhOiBDcmFzaERhdGEgPSBHLkRhdGFNZ3IuZ2V0KENyYXNoRGF0YSk7XG4gICAgICAgIGNyYXNoRGF0YS5hdXRvQmV0RGF0YSA9IG51bGw7XG4gICAgICAgIGRpc3BhdGNoKFwiRXZlbnRfTTJDX0NyYXNoQ2FuY2VsQXV0b0JldF9SZXNcIiwgZGF0YSk7XG4gICAgfVxuXG4gICAgcHVibGljIG9uTTJDX0NyYXNoQ2FuY2VsQXV0b0JldF9NZXMoZGF0YTogTVNULklNMkNfQ3Jhc2hDYW5jZWxBdXRvQmV0X01lcyk6IHZvaWQge1xuICAgICAgICBsZXQgY3Jhc2hEYXRhOiBDcmFzaERhdGEgPSBHLkRhdGFNZ3IuZ2V0KENyYXNoRGF0YSk7XG4gICAgICAgIGNyYXNoRGF0YS5hdXRvQmV0RGF0YSA9IG51bGw7XG4gICAgICAgIGRpc3BhdGNoKFwiRXZlbnRfTTJDX0NyYXNoQ2FuY2VsQXV0b0JldF9NZXNcIiwgZGF0YSk7XG5cbiAgICB9XG5cbiAgICBwdWJsaWMgb25NMkNfQ3Jhc2hIYXNoX01lcyhkYXRhOiBNU1QuSU0yQ19DcmFzaEhhc2hfTWVzKTogdm9pZCB7XG4gICAgICAgIGxldCBjcmFzaERhdGE6IENyYXNoRGF0YSA9IEcuRGF0YU1nci5nZXQoQ3Jhc2hEYXRhKTtcblxuICAgICAgICBjcmFzaERhdGEuaGFzaEluZm8uc2VydmVyU2VlZCA9IGRhdGEuU2VlZEluZm8uU2VydmVyU2VlZDtcbiAgICAgICAgY3Jhc2hEYXRhLmhhc2hJbmZvLnNlcnZlclNlZWRIYXNoID0gZGF0YS5TZWVkSW5mby5TZXJ2ZXJTZWVkSGFzaDtcbiAgICAgICAgY3Jhc2hEYXRhLmhhc2hJbmZvLnB1YmxpY1NlZWQgPSBkYXRhLlNlZWRJbmZvLlB1YmxpY1NlZWQ7XG5cbiAgICAgICAgZGlzcGF0Y2goXCJFdmVudF9NMkNfQ3Jhc2hIYXNoX01lc1wiLCBkYXRhKTtcblxuICAgIH1cblxuICAgIHB1YmxpYyBvbk0yQ19DcmFzaEhhc2hSZWNvcmRfUmVzKGRhdGE6IE1TVC5JTTJDX0NyYXNoSGFzaFJlY29yZF9SZXMpOiB2b2lkIHtcbiAgICAgICAgbGV0IGNyYXNoRGF0YTogQ3Jhc2hEYXRhID0gRy5EYXRhTWdyLmdldChDcmFzaERhdGEpO1xuICAgICAgICBjcmFzaERhdGEudG90YWxSZWNvcmREYXRhID0gZGF0YTtcbiAgICAgICAgZGlzcGF0Y2goXCJFdmVudF9NMkNfQ3Jhc2hIYXNoUmVjb3JkX1Jlc1wiLCBkYXRhKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgb25TMkNfQ3Jhc2hNeVJlY29yZChkYXRhOiBNU1QuSVMyQ19DcmFzaE15UmVjb3JkKTogdm9pZCB7XG4gICAgICAgIGRpc3BhdGNoKFwiRXZlbnRfUzJDX0NyYXNoTXlSZWNvcmRcIiwgZGF0YSk7XG4gICAgfVxuXG4gICAgcHVibGljIG9uTTJDX1RyYW5zZmVyTWFwX1JlcyhkYXRhOiBNU1QuSU0yQ19UcmFuc2Zlck1hcF9SZXMpIHtcbiAgICAgICAgbGV0IHVzZXJEYXRhID0gRy5EYXRhTWdyLmdldChVc2VyRGF0YSk7XG4gICAgICAgIHVzZXJEYXRhLmluR2FtZSA9IGRhdGEuUm9vbU5hbWU7XG4gICAgICAgIGRpc3BhdGNoKFwiRXZlbnRfTTJDX1RyYW5zZmVyTWFwX1Jlc1wiLCBkYXRhKTtcbiAgICB9XG5cbn1cblxuTWFuYWdlci5uZXRNYW5hZ2VyLnB1c2goQ3Jhc2hOZXRDb250cm9sbGVyKTtcbiJdfQ==