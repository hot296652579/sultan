{"version":3,"sources":["assets/games/crash/script/view/CrashBetPlayerItem.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import NumberUtils from \"../../../../script/common/utils/NumberUtils\";\nimport UserData from \"../../../../script/data/UserData\";\nimport Operation from \"../../../../script/framework/extentions/Operation\";\nimport { MST } from \"../../../../script/framework/external/protoc\";\nimport UIView from \"../../../../script/framework/ui/UIView\";\nimport { UtilMgr } from \"../../../../script/global/UtilMgr\";\nimport { CrashColorDefine } from \"../define/CrashColorDefine\";\nimport { CrashInterface } from \"../interface/CrashInterface\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class CrashBetPlayerItem extends UIView {\n\n    @property(cc.Sprite)\n    private imgAvatar: cc.Sprite = null;\n\n    @property(cc.Label)\n    private labPlayer: cc.Label = null;\n\n    @property(cc.Label)\n    private labRate: cc.Label = null;\n\n    @property(cc.Label)\n    private labBetGold: cc.Label = null;\n\n    @property(cc.Label)\n    private labInCome: cc.Label = null;\n\n    private _data: CrashInterface.BetPlayer = null;\n    private _isWin: boolean = null;\n    private _userData: UserData = null;\n\n    onLoad() {\n        this.initData();\n        this.initUI();\n    }\n\n    start() {\n\n    }\n\n    private initData(): void {\n        this._data = null;\n        this._isWin = null;\n        this._userData = G.DataMgr.get(UserData);\n    }\n\n    private initUI(): void {\n        this.imgAvatar.spriteFrame = null;\n        this.labPlayer.string = \"\";\n        this.labRate.string = \"\";\n        this.labBetGold.string = \"\";\n        this.labInCome.string = \"\";\n        this.labPlayer.node.color = CrashColorDefine.ProfitLoss.NORMAL;\n        this.labRate.node.color = CrashColorDefine.ProfitLoss.NORMAL;\n        this.labBetGold.node.color = CrashColorDefine.ProfitLoss.NORMAL;\n        this.labInCome.node.color = CrashColorDefine.ProfitLoss.NORMAL;\n    }\n\n    private refreshUI(): void {\n        UtilMgr.loadHeadImg(this.imgAvatar, this._data.betInfo.player.HeaderUrl, this._data.betInfo.player.UnitId, this);\n        this.labPlayer.string = UtilMgr.setString(this._data.betInfo.player.Nick);\n        this.labBetGold.string = NumberUtils.converToC(Number(this._data.betInfo.BetGold));\n        this.refreshInCome();\n\n        if (this._data.betInfo.player.UnitId === this._userData.id) {\n            this.labRate.string = NumberUtils.converToC(this._data.betInfo.Multiple);\n        }\n    }\n\n    private refreshInCome(): void {\n        if (this._isWin === null) {\n            this.labInCome.node.color = CrashColorDefine.ProfitLoss.NORMAL;\n            this.labInCome.string = \"\";\n        } else {\n            if (this._data.isEscape) {\n                this.labRate.string = NumberUtils.converToC(Number(this._data.betInfo.Multiple));\n                this.labInCome.node.color = CrashColorDefine.ProfitLoss.GREEN;\n                this.labPlayer.node.color = CrashColorDefine.ProfitLoss.GREEN;\n                this.labRate.node.color = CrashColorDefine.ProfitLoss.GREEN;\n                this.labBetGold.node.color = CrashColorDefine.ProfitLoss.GREEN;\n                this.labInCome.string = Math.floor(Operation.mul(Operation.div(Number(this._data.betInfo.BetGold), 100), Operation.div(this._data.betInfo.Multiple, 100))).toString();\n            } else {\n                this.labInCome.node.color = CrashColorDefine.ProfitLoss.RED;\n                this.labPlayer.node.color = CrashColorDefine.ProfitLoss.RED;\n                this.labRate.node.color = CrashColorDefine.ProfitLoss.RED;\n                this.labBetGold.node.color = CrashColorDefine.ProfitLoss.RED;\n                this.labInCome.string = NumberUtils.converToC(Number(this._data.betInfo.BetGold));\n            }\n        }\n    }\n\n    public setIsWin(is: boolean): void {\n        this._isWin = is;\n        this._data.isEscape = is;\n        this.refreshInCome();\n    }\n\n    public getIsWin(): boolean {\n        return this._isWin;\n    }\n\n    public getId(): number {\n        return Number(this._data.betInfo.player.UnitId);\n    }\n\n    public getBetRate(): number {\n        return Number(this._data.betInfo.Multiple);\n    }\n\n    public onShow(data: CrashInterface.BetPlayer): void {\n        this._data = data;\n\n        if (data.isEscape) {\n            this._isWin = data.isEscape;\n        }\n\n        this.initUI();\n        this.refreshUI();\n    }\n\n    public reset(): void {\n        this.initData();\n        this.initUI();\n    }\n\n    // update (dt) {}\n}\n"]}