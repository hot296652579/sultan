{"version":3,"sources":["assets/script/common/view/IndicatorView.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import ListView from \"../../common/component/ListView\";\nimport NoneItem from \"../../common/item/NoneItem\";\nimport TitleItemPage from \"../../common/item/TitleItemPage\";\nimport { Manager } from \"../../common/manager/Manager\";\nimport { LobbyService } from \"../../common/net/LobbyService\";\nimport TypeUtils from \"../../common/utils/TypeUtils\";\nimport AppData from \"../../data/AppData\";\nimport { ENABLE_CHANGE_LANGUAGE } from \"../../framework/base/Defines\";\nimport { IController } from \"../../framework/controller/Controller\";\nimport { injectService } from \"../../framework/decorator/Decorators\";\nimport { EventApi } from \"../../framework/event/EventApi\";\nimport DateUtils from \"../../framework/extentions/DateUtils\";\nimport { MST } from \"../../framework/external/protoc\";\nimport UIView from \"../../framework/ui/UIView\";\nimport { CommonDefine } from \"../define/CommonDefine\";\n\n// 默认宽\nconst DEFAULT_WIDTH: number = 698;\n// 间隔宽\nconst PADDING_WIDTH: number = 10;\n// 间隔高\nconst PADDING_HEIGHT: number = 10;\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\n@injectService(LobbyService.instance)\nexport default class IndicatorView extends UIView implements IController<LobbyService> {\n    service: LobbyService;\n\n    @property(cc.Sprite)\n    private imgArrows: cc.Sprite = null;\n\n    @property(cc.Sprite)\n    private imgBg: cc.Sprite = null;\n\n    @property(cc.Label)\n    private labContent: cc.Label = null;\n\n    // 位置\n    private _pos: cc.Vec2 = null;\n    // 多语言字符串\n    private _language: string = null;\n    // 文本宽度\n    private _width: number = null;\n    // 方向\n    private _direction: CommonDefine.Direction = null;\n\n    public static getPrefabUrl() {\n        return \"common/prefabs/IndicatorView\";\n    }\n\n    onLoad() {\n        super.onLoad();\n\n        this.initData();\n        this.initView();\n\n    }\n\n    start() {\n\n    }\n\n    public show(args?: any[]): void {\n        super.show(args);\n\n        this._pos = args[0];\n        this._language = args[1];\n        this._width = args[2]\n        this._direction = args[3];\n\n        if (TypeUtils.isNull(this._width)) {\n            this._width = DEFAULT_WIDTH;\n        }\n\n        this.refreshContent();\n    }\n\n    private initData(): void {\n\n    }\n\n    private initView(): void {\n        this.labContent.string = \"\";\n        this.imgBg.node.setContentSize(0, 0);\n    }\n\n    private setDirectionLayout(direction: CommonDefine.Direction, isAuto: boolean = false): void {\n        if (TypeUtils.isNull(direction)) {\n            this.setDirectionLayout(CommonDefine.Direction.DOWN);\n            return;\n        }\n\n        let paddingY: number = 0;\n\n        if (direction === CommonDefine.Direction.UP) {\n            paddingY = (this._pos.y + (this.imgArrows.node.height / 2) + this.imgBg.node.height)\n            if (paddingY > (this.node.height / 2) && !isAuto) {\n                this.setDirectionLayout(CommonDefine.Direction.DOWN, true);\n                return\n            }\n            this.imgArrows.node.scaleY = -1;\n            this.imgArrows.node.position = cc.v2(this._pos.x, this._pos.y + (this.imgArrows.node.height / 2));\n            this.imgBg.node.position = cc.v2(0, this.imgArrows.node.y + (this.imgArrows.node.height / 2) + (this.imgBg.node.height / 2));\n        } else if (direction === CommonDefine.Direction.DOWN) {\n            paddingY = (this._pos.y - (this.imgArrows.node.height / 2) - this.imgBg.node.height)\n            if (paddingY < (0 - (this.node.height / 2)) && !isAuto) {\n                this.setDirectionLayout(CommonDefine.Direction.UP, true)\n                return;\n            }\n            this.imgArrows.node.scaleY = 1;\n            this.imgArrows.node.position = cc.v2(this._pos.x, this._pos.y - (this.imgArrows.node.height / 2));\n            this.imgBg.node.position = cc.v2(0, this.imgArrows.node.y - (this.imgArrows.node.height / 2) - (this.imgBg.node.height / 2));\n        }\n    }\n\n    private refreshContent(): void {\n        this.imgBg.node.width = this._width;\n        this.labContent.node.width = this._width - (PADDING_WIDTH * 2);\n        this.labContent.language = this._language;\n        (this.labContent as any)._forceUpdateRenderData();\n        this.imgBg.node.height = this.labContent.node.height + (PADDING_HEIGHT * 2);\n\n        this.setDirectionLayout(this._direction);\n    }\n\n    public onClick(ButtonName: any, ButtonNode: any, data?: string): void {\n        switch (ButtonName) {\n            case \"btnClose\":\n                this.close();\n                break;\n        }\n    }\n\n}\n"]}