{"version":3,"sources":["assets/script/roomlist/RoomListGuide.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import UIView from \"../framework/ui/UIView\";\nimport { User } from \"../global/User\";\nimport { protoPackage, serverType } from \"../common/net/CommonService\";\nimport { injectService } from \"../framework/decorator/Decorators\";\nimport { LobbyService } from \"../common/net/LobbyService\";\nimport RoomListView from \"./RoomListView\";\nimport { com } from \"../framework/external/protoc\";\nimport { Config } from \"../common/config/Config\";\nimport RoomTexaCowTableItem from \"./RoomTexaCowTableItem\";\nimport RoomFruitPartyItem from \"./RoomFruitPartyItem\";\nimport RoomRedVsBlackItem from \"./RoomRedVsBlackItem\";\n\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\n@injectService(LobbyService.instance)\nexport default class RoomListGuide extends UIView {\n    service: LobbyService;\n\n    room: cc.Node;\n    step: number;\n    roomListView: RoomListView;\n\n    private m_data: com.bt.game.proto.hall.IGetRoomListRes = null;\n\n    public static getPrefabUrl() {\n        return \"roomlist/prefabs/RoomListGuide\";\n    }\n\n    onLoad() {\n        super.onLoad()\n        this.room = this.node.getChildByName(\"room\")\n        this.room.active = false\n    }\n    show(args) {\n        super.show(args);\n        if (args[0] && cc.js.getClassName(args[0]) == \"RoomListView\") {\n            this.roomListView = args[0]\n            this.step = 0\n            this.setStep()\n        }\n        this.m_data = args[1];\n      \n    }\n    start() {\n\n    }\n\n    private setStep() {\n        this.step++\n        let wp\n        switch (this.step) {\n            case 1:\n                this.room.active = true\n                if (this.roomListView.scvRoomList.content.children.length> 0) {\n                    wp = this.roomListView.scvRoomList.content.children[0].convertToWorldSpaceAR(cc.v2(0, 0))\n                }\n                this.room.getChildByName(\"mask\").getComponent(cc.Mask).type = cc.Mask.Type.RECT;\n                this.room.getChildByName(\"mask\").setPosition(this.node.convertToNodeSpaceAR(wp));\n                this.room.getChildByName(\"mask\").setContentSize(cc.size(354, 372))\n                this.room.getChildByName(\"jiantou\").active = true\n                this.room.getChildByName(\"jiantou\").x = this.room.getChildByName(\"mask\").x\n                this.room.getChildByName(\"jiantou\").y = this.room.getChildByName(\"mask\").y + this.room.getChildByName(\"mask\").height / 2 + 50\n                \n            break;\n            case 2:\n                this.toGame();\n                this.reqGuide()\n                this.close()\n            break;\n            default:\n                break;\n        }\n\n    }\n    onClick(name, node) {\n        switch (name) {\n            case 'skip':\n                this.node.active = false;\n                this.reqGuide()\n                break;\n            default:\n                this.setStep()\n                break;\n\n        }\n\n    }\n    toGame(){\n        let itemComponent;\n        switch (this.m_data.gameId) {\n            case Config.GameId.TexaCowTable:\n                this.roomListView.scvRoomList.content.children[0].getComponent(RoomTexaCowTableItem);\n                break;\n            case Config.GameId.FruitParty:\n                this.roomListView.scvRoomList.content.children[0].getComponent(RoomFruitPartyItem);\n                break;\n            case Config.GameId.RedVsBlack:\n                this.roomListView.scvRoomList.content.children[0].getComponent(RoomRedVsBlackItem);\n                break;\n        }  \n        itemComponent.onClickEnter();\n    }\n  \n    reqGuide() {\n        G.Logger.log(User._gameIds);\n        if (User._gameIds.indexOf(2002) === -1) {\n            let req = protoPackage.hall.ReqInsertNewPlayerGuid.create({ gameId: 2002 });\n            let buffer = protoPackage.hall.ReqInsertNewPlayerGuid.encode(req).finish();\n            this.service.sendMsg(serverType.Lobby,\n                protoPackage.hall.HallCmd.CMD_ReqInsertNewPlayerGuid,\n                buffer);\n        }\n    }\n    // update (dt) {}\n}\n"]}