{"version":3,"sources":["assets/script/platform/android.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { HotUpdate } from \"../common/base/HotUpdate\";\nimport { LogicEvent } from \"../common/event/LogicEvent\";\nimport { i18n } from \"../common/language/LanguageImpl\";\nimport { Manager } from \"../common/manager/Manager\";\nimport { LoginEvent } from \"../login/LoginView\";\nimport PanelHelp from \"../msgbox/PanelHelp\";\n\nlet\n    AppClassName_Facebook = \"com/threeoctopus/facebookapi/FacebookSDK\",\n    AppClassName_Google = \"com/threeoctopus/googleapi/GoogleSDK\",\n    AppClassName_AF = \"com/flyer/AFActivity\",\n    AppClassName = \"org/cocos2dx/javascript/AppActivity\"\n\nexport enum shareType {\n    LINK = 0,\n    PHOTO = 1,\n}\n\nclass _android {\n\n    //--------------------facebook-------------------------\n    /** facebook 点击登录 */\n    loginToFacebook(isLogin) {\n        jsb.reflection.callStaticMethod(AppClassName_Facebook, \"loginFacebook\", \"(Ljava/lang/String;)V\", isLogin ? \"login\" : \"bind\");\n    }\n\n    /** facebook 登录回调 */\n    loginToFacebookCB(isSuccess) {\n        G.Logger.log('facebook 登录回调 isSuccess', isSuccess);\n\n        if (isSuccess && isSuccess == 'true') {\n            G.Logger.log('getUserInfo', isSuccess);\n            //获取个人信息\n            jsb.reflection.callStaticMethod(AppClassName_Facebook, \"getUserInfo\", \"(Ljava/lang/String;)V\", \"\");\n        } else {\n            // PanelHelp.showTip(i18n.ERRORCODE.E10020007);\n        }\n    }\n\n    /** facebook 获取个人信息回调 用来登录 */\n    getFacebookUserInfoToLogin(fbId, fbName, fbHeadImg) {\n        dispatch(LoginEvent.FACEBOOK, { fbId, fbName, fbHeadImg })\n    }\n\n    /** facebook 点击分享 */\n    shareToFacebook(shareType, shareUrl, imgPath) {\n        let data = {\n            shareType: shareType,\n            shareUrl: shareUrl,\n            imgPath: imgPath\n        };\n        let shareInfo = JSON.stringify(data);\n        jsb.reflection.callStaticMethod(AppClassName_Facebook, \"shareFacebook\", \"(Ljava/lang/String;)V\", shareInfo);\n    }\n\n    /** facebook 分享回调 */\n    shareToFacebookCB(isSuccess) {\n        G.Logger.log('facebook 分享回调 isSuccess', isSuccess);\n\n        if (isSuccess && isSuccess == \"true\") {\n            //分享成功回调\n            PanelHelp.showTip(i18n.TIPS.SHARESUCCESS)\n        } else {\n            //分享失败\n            PanelHelp.showTip(i18n.TIPS.SHAREFAILED)\n        }\n    }\n\n    copyToClip(text, str?) {\n        G.Logger.error('copyToClip : ', text);\n        jsb.reflection.callStaticMethod(AppClassName, \"copyToClip\", \"(Ljava/lang/String;)V\", text.toString());\n        let msg = Manager.makeLanguage(\"Tips.CopySuccess\");\n        if (str) { msg = str; }\n        return PanelHelp.showTip(msg);\n    }\n\n    /**获取设备唯一id*/\n    getDeviceUUID() {\n        G.Logger.log('android : getDeviceUUID');\n        let uuid = jsb.reflection.callStaticMethod(AppClassName, \"getDeviceUUID\", \"()Ljava/lang/String;\");\n        if (!uuid) {\n            uuid = Date.now();\n            return uuid.toString();\n        }\n        return uuid;\n    }\n\n    /**打开链接*/\n    openURL(url) {\n        cc.sys.openURL(url);\n        // ryyl.panel.showWebView(url);\n    }\n    /**获取APPversionName*/\n    getVersionName() {\n        G.Logger.log('android : getVersionName');\n        let versionName = jsb.reflection.callStaticMethod(AppClassName, \"getAPPVersionName\", \"()Ljava/lang/String;\");\n        G.Logger.log('android : getVersionName', versionName);\n        return versionName;\n    }\n    /**获取ResversionName*/\n    getResVersionName() {\n        if (CC_JSB) {\n            let manifestUrl = HotUpdate.hallProjectMainfest;\n            let manifestUrltemp = `project.manifest`;\n            if (jsb.fileUtils.isFileExist(manifestUrltemp)) {\n                let content = jsb.fileUtils.getStringFromFile(manifestUrltemp);\n                let mainifest = JSON.parse(content)\n                G.Logger.log('获取资源版本号1=', mainifest.version);\n                return mainifest.version\n            } else {\n                if (jsb.fileUtils.isFileExist(manifestUrl)) {\n                    let content = jsb.fileUtils.getStringFromFile(manifestUrl);\n                    let mainifest = JSON.parse(content)\n                    G.Logger.log('获取资源版本号2=', mainifest.version);\n                    return mainifest.version\n                }\n            }\n\n        }\n        return 1\n    }\n    /**安卓返回退出游戏*/\n    handleKeyBackClicked() {\n        dispatch(\"handleKeyBackClicked\")\n    }\n    /**安卓返回上传头像 */\n    handleUpLoadPhoto(path) {\n        dispatch(\"handleUpLoadPhoto\", path)\n    }\n    /**打开相册*/\n    localPhotoMethod() {\n        jsb.reflection.callStaticMethod(AppClassName, \"localPhotoMethod\", \"()V\");\n    }\n    /**打开相机*/\n    takePhotoMethod() {\n        jsb.reflection.callStaticMethod(AppClassName, \"takePhotoMethod\", \"()V\");\n    }\n    /**获取渠道号*/\n    getAppQuDaoId() {\n        let qudao = jsb.reflection.callStaticMethod(AppClassName, \"getAppQuDaoId\", \"()I\");\n        G.Logger.log('android : getAppQuDaoId', qudao);\n        return qudao || 0;\n    }\n    /**打开邮箱*/\n    openEmail(email) {\n        jsb.reflection.callStaticMethod(AppClassName, \"openEmail\", \"(Ljava/lang/String;)V\", email.toString());\n    }\n\n    //保存图片到本地\n    saveTextureToLocal(filePath) {\n        jsb.reflection.callStaticMethod(AppClassName, \"saveTextureToLocal\", \"(Ljava/lang/String;)V\", filePath);\n    }\n\n    //调用系统分享\n    shareImageToLocal(shareUrl) {\n        jsb.reflection.callStaticMethod(AppClassName, \"shareImageToLocal\", \"(Ljava/lang/String;)V\", shareUrl);\n    }\n\n    /**图片保存成功回调*/\n    handleSaveImageToLocal(isSuccess) {\n        dispatch(\"handleSaveImageToLocal\", isSuccess)\n    }\n\n    getAllContact() {\n        jsb.reflection.callStaticMethod(AppClassName, \"getAllContact\", \"()V\");\n    }\n\n    phoneInfo(data) {\n        dispatch(\"phoneInfo\", data)\n    }\n    getContactsPermission(isSuccess) {\n        dispatch(\"getContactsPermission\", isSuccess)\n    }\n    //获取剪切板上的信息\n    getClipBoardStr() {\n        let str = jsb.reflection.callStaticMethod(AppClassName, \"getClipBoardStr\", \"()V\");\n        return str || null\n    }\n    handleClipBoardStr(data) {\n        dispatch(\"handleClipBoardStr\", data)\n    }\n    /**設置屏幕方向\n     * true  是橫屏\n     * false 是豎屏\n     */\n    setRequestedOrientation(islandscape) {\n        jsb.reflection.callStaticMethod(AppClassName, \"setRequestedOrientation\", \"(Z)V\", islandscape);\n    }\n    /**\n     * 把引擎层置顶\n     */\n    setSurfaceViewZOrderOnTop(istop) {\n        // jsb.reflection.callStaticMethod(AppClassName, \"setSurfaceViewZOrderOnTop\", \"(Z)V\", istop);\n    }\n\n    /**获取分享参数*/\n    getRoomIdOnShare() {\n        let roomId = jsb.reflection.callStaticMethod(AppClassName, \"getRoomIdOnShare\", \"()Ljava/lang/String;\");\n        return roomId || null;\n    }\n\n    /** AF 购买事件 */\n    sendBuyInfoToAF(rechargeInfo) {\n        let data = {\n            revenue: +rechargeInfo.amount,\n            content_type: rechargeInfo.productName,\n            content_id: rechargeInfo.orderId,\n            currency: rechargeInfo.currency\n        };\n        let BuyInfo = JSON.stringify(data);\n        G.Logger.log(\"send data\", data, BuyInfo);\n        jsb.reflection.callStaticMethod(AppClassName_AF, \"AFBuyInfoInApp\", \"(Ljava/lang/String;)V\", BuyInfo);\n    }\n\n    isInAppSuccess(orderId) {\n        G.Logger.log(\"isInApp orderId\", orderId);\n        if (orderId) {\n            dispatch(\"IN_AFAPP_SUCCESS\", orderId);\n        }\n\n    }\n}\n\nexport const android = new _android();"]}