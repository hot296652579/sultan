{"version":3,"sources":["assets/script/promotion/PromotionUnView.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { Config } from \"../common/config/Config\";\nimport TitleItemPage from \"../common/item/TitleItemPage\";\nimport { Manager } from \"../common/manager/Manager\";\nimport { LobbyService } from \"../common/net/LobbyService\";\nimport NumberUtils from \"../common/utils/NumberUtils\";\nimport UserData from \"../data/UserData\";\nimport { BUNDLE_RESOURCES, ENABLE_CHANGE_LANGUAGE } from \"../framework/base/Defines\";\nimport { IController } from \"../framework/controller/Controller\";\nimport { injectService } from \"../framework/decorator/Decorators\";\nimport { EventApi } from \"../framework/event/EventApi\";\nimport DateUtils from \"../framework/extentions/DateUtils\";\nimport { MST } from \"../framework/external/protoc\";\nimport UIView from \"../framework/ui/UIView\";\nimport LoginNewView from \"../login/LoginNewView\";\nimport { PromotionInterface } from \"./PromotionInterface\";\nimport PromotionRankListView from \"./PromotionRankListView\";\nimport PromotionView from \"./PromotionView\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\n@injectService(LobbyService.instance)\nexport default class PromotionUnView extends UIView implements IController<LobbyService>{\n    service: LobbyService;\n\n    @property(cc.Label)\n    private labCollaborateTitle: cc.Label = null;\n\n    @property(cc.Label)\n    private labCollaborateContent: cc.Label = null;\n\n    @property(cc.Label)\n    private labGetInvitationContent: cc.Label = null;\n\n    @property(cc.Label)\n    private labGotAwardTitle: cc.Label = null;\n\n    @property(cc.Label)\n    private labLevelContent: cc.Label = null;\n\n    @property(cc.Label)\n    private labLevelTitle0: cc.Label = null;\n\n    @property(cc.Label)\n    private labLevelContent0: cc.Label = null;\n\n    @property(cc.Label)\n    private labLevelTitle1: cc.Label = null;\n\n    @property(cc.Label)\n    private labLevelContent1: cc.Label = null;\n\n    @property(cc.Label)\n    private labLevelTitle2: cc.Label = null;\n\n    @property(cc.Label)\n    private labLevelContent2: cc.Label = null;\n\n    @property(cc.Label)\n    private labAwardTitle: cc.Label = null;\n\n    @property(cc.Label)\n    private labAwardContent: cc.Label = null;\n\n    @property(cc.Label)\n    private labBrokerageTitle: cc.Label = null;\n\n    @property(cc.Label)\n    private labBrokerageContent: cc.Label = null;\n\n    @property(cc.Label)\n    private labRankTitle: cc.Label = null;\n\n    @property(cc.Label)\n    private labLogin0: cc.Label = null;\n\n    @property(cc.Label)\n    private labLogin1: cc.Label = null;\n\n    @property(PromotionRankListView)\n    private lsvRank: PromotionRankListView = null;\n\n    @property(TitleItemPage)\n    private titleItemPage: TitleItemPage = null;\n\n    // 用户数据\n    private _userData: UserData = null;\n    // 数据\n    private _data: MST.IS2C_PromotionInfo = null;\n\n    public static getPrefabUrl() {\n        return \"promotion/prefabs/PromotionUnView\";\n    }\n\n    onLoad() {\n        super.onLoad();\n\n        this.initData();\n        this.initUI();\n\n        this.C2S_PromotionInfo();\n    }\n\n    start() {\n\n    }\n\n    private initData(): void {\n        this._userData = G.DataMgr.get(UserData);\n    }\n\n    private initUI(): void {\n        this.labCollaborateTitle.string = \"\";\n        this.labCollaborateContent.string = \"\";\n        this.labGetInvitationContent.string = \"\";\n        this.labGotAwardTitle.string = \"\";\n        this.labLevelContent.string = \"\";\n        this.labLevelTitle0.string = \"\";\n        this.labLevelContent0.string = \"\";\n        this.labLevelTitle1.string = \"\";\n        this.labLevelContent1.string = \"\";\n        this.labLevelTitle2.string = \"\";\n        this.labLevelContent2.string = \"\";\n        this.labAwardTitle.string = \"\";\n        this.labAwardContent.string = \"\";\n        this.labBrokerageTitle.string = \"\";\n        this.labBrokerageContent.string = \"\";\n        this.labRankTitle.string = \"\";\n        this.labLogin0.string = \"\";\n        this.labLogin1.string = \"\";\n    }\n\n    protected bindingEvents(): void {\n        super.bindingEvents();\n\n        if (ENABLE_CHANGE_LANGUAGE) {\n            this.registerEvent(EventApi.CHANGE_LANGUAGE, this.onLanguageChange);\n        }\n\n        this.registerEvent(\"Event_S2C_PromotionInfo\", this.onEvent_S2C_PromotionInfo);\n        this.registerEvent(\"updateUserInfo\", this.onUpdateUserInfo)\n\n    }\n\n    private onLanguageChange(): void {\n        this.titleItemPage.languagePageName(Manager.makeLanguage(\"Promotion.labPageName\"));\n        this.labCollaborateTitle.language = Manager.makeLanguage(\"Promotion.labCollaborateTitle\");\n        this.labCollaborateContent.language = Manager.makeLanguage(\"Promotion.labCollaborateContent\");\n        this.labGetInvitationContent.language = Manager.makeLanguage(\"Promotion.labGetInvitationContent\");\n        this.labGotAwardTitle.language = Manager.makeLanguage(\"Promotion.labGotAwardTitle\");\n        this.labLevelContent.language = Manager.makeLanguage(\"Promotion.labLevelContent\");\n        this.labLevelTitle0.language = Manager.makeLanguage(\"Promotion.labLevelTitle0\");\n        this.labLevelContent0.language = Manager.makeLanguage(\"Promotion.labLevelContent0\");\n        this.labLevelTitle1.language = Manager.makeLanguage(\"Promotion.labLevelTitle1\");\n        this.labLevelContent1.language = Manager.makeLanguage(\"Promotion.labLevelContent1\");\n        this.labLevelTitle2.language = Manager.makeLanguage(\"Promotion.labLevelTitle2\");\n        this.labLevelContent2.language = Manager.makeLanguage(\"Promotion.labLevelContent2\");\n        this.labAwardTitle.language = Manager.makeLanguage(\"Promotion.labAwardTitle\");\n        this.labAwardContent.language = Manager.makeLanguage(\"Promotion.labAwardContent\");\n        this.labBrokerageTitle.language = Manager.makeLanguage(\"Promotion.labBrokerageTitle\");\n        this.labBrokerageContent.language = Manager.makeLanguage(\"Promotion.labBrokerageContent\");\n        this.labLogin0.language = Manager.makeLanguage(\"Promotion.labLogin\");\n        this.labLogin1.language = Manager.makeLanguage(\"Promotion.labLogin\");\n        this.labRankTitle.language = Manager.makeLanguage(\"Promotion.labRankTitle\");\n\n    }\n\n    public show(args?: any[]): void {\n        super.show(args);\n\n        this.onLanguageChange();\n    }\n\n    private refreshRank(): void {\n        this.lsvRank.set(this.getRankPlayerList());\n    }\n\n    public onClick(ButtonName: any, ButtonNode: any, data?: string): void {\n        switch (ButtonName) {\n            case \"btnLogin\":\n                Manager.uiManager.open({ type: LoginNewView, bundle: BUNDLE_RESOURCES });\n                break;\n            case \"btnClose\":\n                this.close();\n                break;\n        }\n    }\n\n    /**\n     * 请求推广信息\n     */\n    private C2S_PromotionInfo(): void {\n        let req = MST.C2S_PromotionInfo.create({\n            serial: Manager.netManager.getNewSeqId(),\n        });\n        let buffer = MST.C2S_PromotionInfo.encode(req).finish();\n        LobbyService.instance.sendMsg(MST.C2S_PromotionInfo, MST.OuterOpcode_Lobby.C2S_PromotionInfo, buffer);\n    }\n\n    /**\n     * 响应推广信息\n     */\n    private onEvent_S2C_PromotionInfo(data: MST.IS2C_PromotionInfo): void {\n        this._data = data;\n        this.refreshRank();\n    }\n\n    private getRankPlayerList(): PromotionInterface.PlayerBrokerageRank[] {\n        let list: PromotionInterface.PlayerBrokerageRank[] = [];\n        for (let i = 0; i < this._data.promotionRankInfo.length; ++i) {\n            let playerBrokerageRank: PromotionInterface.PlayerBrokerageRank = {\n                rank: i + 1,\n                data: this._data.promotionRankInfo[i],\n            }\n            list[i] = playerBrokerageRank;\n        }\n        return list;\n    }\n\n    private onUpdateUserInfo(): void {\n        Manager.uiManager.open({ type: PromotionView, bundle: BUNDLE_RESOURCES });\n        this.close();\n    }\n\n}\n"]}