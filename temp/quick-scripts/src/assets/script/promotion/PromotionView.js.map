{"version":3,"sources":["assets/script/promotion/PromotionView.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { Config } from \"../common/config/Config\";\nimport { CommonDefine } from \"../common/define/CommonDefine\";\nimport TitleItemPage from \"../common/item/TitleItemPage\";\nimport { Manager } from \"../common/manager/Manager\";\nimport { LobbyService } from \"../common/net/LobbyService\";\nimport NumberUtils from \"../common/utils/NumberUtils\";\nimport IndicatorView from \"../common/view/IndicatorView\";\nimport AppData from \"../data/AppData\";\nimport UserData from \"../data/UserData\";\nimport { BUNDLE_RESOURCES, ENABLE_CHANGE_LANGUAGE } from \"../framework/base/Defines\";\nimport { IController } from \"../framework/controller/Controller\";\nimport { injectService } from \"../framework/decorator/Decorators\";\nimport { EventApi } from \"../framework/event/EventApi\";\nimport DateUtils from \"../framework/extentions/DateUtils\";\nimport { MST } from \"../framework/external/protoc\";\nimport UIView from \"../framework/ui/UIView\";\nimport { UtilMgr } from \"../global/UtilMgr\";\nimport { PromotionInterface } from \"./PromotionInterface\";\nimport PromotionRankListView from \"./PromotionRankListView\";\n\n// 最小推广下级收益百分比\nconst MIN_PROMOTION_INCOME_PERCENT: number = 30;\n// 最大推广下级收益百分比\nconst MAX_PROMOTION_INCOME_PERCENT: number = 50;\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\n@injectService(LobbyService.instance)\nexport default class PromotionView extends UIView implements IController<LobbyService>{\n    service: LobbyService;\n\n    @property(cc.Label)\n    private labLevelTitle: cc.Label = null;\n\n    @property(cc.Sprite)\n    private imgFill: cc.Sprite = null;\n\n    @property([cc.Sprite])\n    private imgBar: cc.Sprite[] = [];\n\n    @property(cc.Label)\n    private labInvitationCodeTitle: cc.Label = null;\n\n    @property(cc.Label)\n    private labInvitationCodeContent: cc.Label = null;\n\n    @property(cc.Label)\n    private labInvitationUrlTitle: cc.Label = null;\n\n    @property(cc.Label)\n    private labInvitationUrlContent: cc.Label = null;\n\n    @property(cc.Label)\n    private labStatTitle: cc.Label = null;\n\n    @property(cc.Label)\n    private labTotalGoldTitle: cc.Label = null;\n\n    @property(cc.Label)\n    private labTotalGoldContent: cc.Label = null;\n\n    @property(cc.Label)\n    private labWithdrawGoldTitle: cc.Label = null;\n\n    @property(cc.Label)\n    private labWithdrawGoldContent: cc.Label = null;\n\n    @property(cc.Label)\n    private labYesterdayGoldTitle: cc.Label = null;\n\n    @property(cc.Label)\n    private labYesterdayGoldContent: cc.Label = null;\n\n    @property(cc.Label)\n    private labYesterdayInvitationTitle: cc.Label = null;\n\n    @property(cc.Label)\n    private labYesterdayInvitationContent: cc.Label = null;\n\n    @property(cc.Label)\n    private labAllInvitationTitle: cc.Label = null;\n\n    @property(cc.Label)\n    private labAllInvitationContent: cc.Label = null;\n\n    @property(cc.Label)\n    private labUpdateDate: cc.Label = null;\n\n    @property(cc.Label)\n    private labGoldGraphTitle: cc.Label = null;\n\n    @property(cc.Node)\n    private nodGoldGraph: cc.Node = null;\n\n    @property(cc.Graphics)\n    private gphIncome: cc.Graphics = null;\n\n    @property(cc.Label)\n    private labInvitationGraphTitle: cc.Label = null;\n\n    @property(cc.Node)\n    private nodInvitationGraph: cc.Node = null;\n\n    @property(cc.Graphics)\n    private gphRegister: cc.Graphics = null;\n\n    @property(cc.Graphics)\n    private gphValid: cc.Graphics = null;\n\n    @property(cc.Label)\n    private labRankTitle: cc.Label = null;\n\n    @property(PromotionRankListView)\n    private lsvRank: PromotionRankListView = null;\n\n    @property(TitleItemPage)\n    private titleItemPage: TitleItemPage = null;\n\n    // 用户数据\n    private _userData: UserData = null;\n    // 应用数据\n    private _appData: AppData = null;\n    // 数据\n    private _data: MST.IS2C_PromotionInfo = null;\n    // 原始等级经验宽度\n    private _originFillWidth: number = null;\n    // 原始邀请人数绘图高度\n    private _originInvitationHeight: number = null;\n    // 原始推广收入绘图高度\n    private _originIncomeHeight: number = null;\n    // 7 天最大推广收入\n    private _maxIncomeGold: number = null;\n    // 7 天最大注册人数\n    private _maxRegisterCount: number = null;\n    // 7 天最大有效人数\n    private _maxValidCount: number = null;\n\n    public static getPrefabUrl() {\n        return \"promotion/prefabs/PromotionView\";\n    }\n\n    onLoad() {\n        super.onLoad();\n\n        this.initData();\n        this.initUI();\n\n        this.C2S_PromotionInfo();\n    }\n\n    start() {\n\n    }\n\n    private initData(): void {\n        this._userData = G.DataMgr.get(UserData);\n        this._appData = G.DataMgr.get(AppData);\n        this._originFillWidth = this.imgFill.node.width;\n        this._originInvitationHeight = this.nodInvitationGraph.getChildByName(\"imgRegisterLine\").height;\n        this._originIncomeHeight = this.nodGoldGraph.getChildByName(\"imgGoldLine\").height;\n    }\n\n    private initUI(): void {\n        this.labLevelTitle.string = \"\";\n        this.labInvitationCodeTitle.string = \"\";\n        this.labInvitationCodeContent.string = \"\";\n        this.labInvitationUrlTitle.string = \"\";\n        this.labInvitationUrlContent.string = \"\";\n        this.labStatTitle.string = \"\";\n        this.labTotalGoldTitle.string = \"\";\n        this.labTotalGoldContent.string = \"\";\n        this.labWithdrawGoldTitle.string = \"\";\n        this.labWithdrawGoldContent.string = \"\";\n        this.labYesterdayGoldTitle.string = \"\";\n        this.labYesterdayGoldContent.string = \"\";\n        this.labYesterdayInvitationTitle.string = \"\";\n        this.labYesterdayInvitationContent.string = \"\";\n        this.labAllInvitationTitle.string = \"\";\n        this.labAllInvitationContent.string = \"\";\n        this.labUpdateDate.string = \"\";\n        this.labGoldGraphTitle.string = \"\";\n        this.labInvitationGraphTitle.string = \"\";\n        this.labRankTitle.string = \"\";\n        this.imgFill.node.width = 0;\n\n        for (let v of this.imgBar) {\n            v.node.active = false;\n        }\n    }\n\n    protected bindingEvents(): void {\n        super.bindingEvents();\n\n        if (ENABLE_CHANGE_LANGUAGE) {\n            this.registerEvent(EventApi.CHANGE_LANGUAGE, this.onLanguageChange);\n        }\n\n        this.registerEvent(\"Event_S2C_PromotionInfo\", this.onEvent_S2C_PromotionInfo);\n\n    }\n\n    private onLanguageChange(): void {\n        this.titleItemPage.languagePageName(Manager.makeLanguage(\"Promotion.labPageName\"));\n        this.labLevelTitle.language = Manager.makeLanguage(\"Promotion.labLevelTitle\");\n        this.labInvitationCodeTitle.language = Manager.makeLanguage(\"Promotion.labInvitationCodeTitle\");\n        this.labInvitationUrlTitle.language = Manager.makeLanguage(\"Promotion.labInvitationUrlTitle\");\n        this.labStatTitle.language = Manager.makeLanguage(\"Promotion.labStatTitle\");\n        this.labTotalGoldTitle.language = Manager.makeLanguage(\"Promotion.labTotalGoldTitle\");\n        this.labWithdrawGoldTitle.language = Manager.makeLanguage(\"Promotion.labWithdrawGoldTitle\");\n        this.labYesterdayGoldTitle.language = Manager.makeLanguage(\"Promotion.labYesterdayGoldTitle\");\n        this.labYesterdayInvitationTitle.language = Manager.makeLanguage(\"Promotion.labYesterdayInvitationTitle\");\n        this.labAllInvitationTitle.language = Manager.makeLanguage(\"Promotion.labAllInvitationTitle\");\n        this.labGoldGraphTitle.language = Manager.makeLanguage(\"Promotion.labGoldGraphTitle\");\n        this.labInvitationGraphTitle.language = Manager.makeLanguage(\"Promotion.labInvitationGraphTitle\");\n        this.labRankTitle.language = Manager.makeLanguage(\"Promotion.labRankTitle\");\n\n        this.refreshStatLastDate();\n    }\n\n    public show(args?: any[]): void {\n        super.show(args);\n\n        this.onLanguageChange();\n    }\n\n    private drawIncomeLine(): void {\n        let latDate: cc.Layout = this.nodGoldGraph.getChildByName(\"latDate\").getComponent(cc.Layout);\n        this.gphIncome.clear();\n        let targetPos: cc.Vec2 = cc.v2(0, 0);\n        for (let i: number = 0; i < this._data.incomeList.length; ++i) {\n            let v = this._data.incomeList[i];\n            let btnGraph: cc.Button = latDate.node.getChildByName(`btnGraph${i}`).getComponent(cc.Button);\n            let worldPos: cc.Vec2 = btnGraph.node.convertToWorldSpaceAR(cc.v2(0, 0));\n            let localPos: cc.Vec2 = this.gphIncome.node.parent.convertToNodeSpaceAR(worldPos);\n            targetPos.x = localPos.x;\n            targetPos.y = this.getDrawLineHeight(this._originIncomeHeight, this._maxIncomeGold, v);\n            this.gphIncome.lineTo(targetPos.x, targetPos.y);\n            this.gphIncome.stroke();\n            this.gphIncome.moveTo(targetPos.x, targetPos.y);\n        }\n    }\n\n    private drawValidCountLine(): void {\n        let latDate: cc.Layout = this.nodInvitationGraph.getChildByName(\"latDate\").getComponent(cc.Layout);\n        this.gphValid.clear();\n        let targetPos: cc.Vec2 = cc.v2(0, 0);\n        for (let i: number = 0; i < this._data.validCountList.length; ++i) {\n            let v = this._data.validCountList[i];\n            let btnGraph: cc.Button = latDate.node.getChildByName(`btnGraph${i}`).getComponent(cc.Button);\n            let worldPos: cc.Vec2 = btnGraph.node.convertToWorldSpaceAR(cc.v2(0, 0));\n            let localPos: cc.Vec2 = this.gphValid.node.parent.convertToNodeSpaceAR(worldPos);\n            targetPos.x = localPos.x;\n            targetPos.y = this.getDrawLineHeight(this._originInvitationHeight, this._maxRegisterCount, v);\n            this.gphValid.lineTo(targetPos.x, targetPos.y);\n            this.gphValid.stroke();\n            this.gphValid.moveTo(targetPos.x, targetPos.y);\n        }\n    }\n\n    private drawRegisterCountLine(): void {\n        let latDate: cc.Layout = this.nodInvitationGraph.getChildByName(\"latDate\").getComponent(cc.Layout);\n        this.gphRegister.clear();\n        let targetPos: cc.Vec2 = cc.v2(0, 0);\n        for (let i: number = 0; i < this._data.registerCountList.length; ++i) {\n            let v = this._data.registerCountList[i];\n            let btnGraph: cc.Button = latDate.node.getChildByName(`btnGraph${i}`).getComponent(cc.Button);\n            let worldPos: cc.Vec2 = btnGraph.node.convertToWorldSpaceAR(cc.v2(0, 0));\n            let localPos: cc.Vec2 = this.gphRegister.node.parent.convertToNodeSpaceAR(worldPos);\n            targetPos.x = localPos.x;\n            targetPos.y = this.getDrawLineHeight(this._originInvitationHeight, this._maxRegisterCount, v);\n            this.gphRegister.lineTo(targetPos.x, targetPos.y);\n            this.gphRegister.stroke();\n            this.gphRegister.moveTo(targetPos.x, targetPos.y);\n        }\n    }\n\n    private getDrawLineHeight(maxHeight: number, maxCount: number, currCount: number | Long): number {\n        return (Number(currCount) / maxCount) * maxHeight;\n    }\n\n    private refreshLevel(): void {\n        let maxStepPercent: number = 100 / (Object.values(MST.PromotionLevel).length - 1);\n        let percent: number = 0;\n        let halfPercent: number = (this._data.levelPercent / 100) * maxStepPercent;\n        if (halfPercent > maxStepPercent) {\n            halfPercent = maxStepPercent;\n        }\n        if (this._data.level === MST.PromotionLevel.Level0) {\n            percent = halfPercent / 100;\n        } else if (this._data.level === MST.PromotionLevel.Level1) {\n            percent = (maxStepPercent + halfPercent) / 100;\n        } else {\n            percent = 1;\n        }\n        let width: number = percent * this._originFillWidth;\n        if (width > this._originFillWidth) {\n            width = this._originFillWidth;\n        } else if (width < 0) {\n            width = 0;\n        }\n        this.imgFill.node.width = width;\n\n        for (let i: number = 0; i <= this._data.level; ++i) {\n            this.imgBar[i].node.active = true;\n        }\n    }\n\n    private refreshInvitationInfo(): void {\n        this.labInvitationCodeContent.string = this._userData.extendCode;\n        this.labInvitationUrlContent.string = UtilMgr.setString(this.getInvitationURL(), 35, true);\n    }\n\n    private refreshStatLastDate(): void {\n        if (this._data) {\n            this.labUpdateDate.language = Manager.makeLanguage([\"Promotion.labUpdateDate\", DateUtils.getYMD(this._data.promotionDataInfo.lastUpdateTime, \"-\")]);\n        }\n    }\n\n    private refreshStatInfo(): void {\n        this.labTotalGoldContent.language = Manager.makeLanguage([\"Promotion.RpGold\", NumberUtils.converToC(this._data.promotionDataInfo.totalIncomeGold)]);\n        this.labWithdrawGoldContent.language = Manager.makeLanguage([\"Promotion.RpGold\", NumberUtils.converToC(this._data.promotionDataInfo.totalWithdrawGold)]);\n        this.labYesterdayGoldContent.language = Manager.makeLanguage([\"Promotion.RpGold\", NumberUtils.converToC(this._data.promotionDataInfo.ayerIncomeGold)]);\n        this.labYesterdayInvitationContent.language = this._data.promotionDataInfo.ayerInvitationCount.toString();\n        this.labAllInvitationContent.string = this._data.promotionDataInfo.totalInvitationCount.toString();\n        this.refreshStatLastDate();\n    }\n\n    private refreshRank(): void {\n        this.lsvRank.set(this.getRankPlayerList());\n    }\n\n    private refreshIncomeGraph(): void {\n        let latDate: cc.Layout = this.nodGoldGraph.getChildByName(\"latDate\").getComponent(cc.Layout);\n        for (let i: number = 0; i < latDate.node.childrenCount; ++i) {\n            let btnInvitation: cc.Button = latDate.node.getChildByName(`btnGraph${i}`).getComponent(cc.Button);\n            let labDate: cc.Label = btnInvitation.node.getChildByName(\"labDate\").getComponent(cc.Label);\n            labDate.string = DateUtils.getDayBeforeAfter(this._appData.getClientTimestamp(), -(latDate.node.childrenCount - (i + 1)), \"MM.dd\");\n        }\n\n        this.drawIncomeLine();\n    }\n\n    private refreshInvitationGraph(): void {\n        let latDate: cc.Layout = this.nodInvitationGraph.getChildByName(\"latDate\").getComponent(cc.Layout);\n        for (let i: number = 0; i < latDate.node.childrenCount; ++i) {\n            let btnInvitation: cc.Button = latDate.node.getChildByName(`btnGraph${i}`).getComponent(cc.Button);\n            let labDate: cc.Label = btnInvitation.node.getChildByName(\"labDate\").getComponent(cc.Label);\n            labDate.string = DateUtils.getDayBeforeAfter(this._appData.getClientTimestamp(), -(latDate.node.childrenCount - (i + 1)), \"MM.dd\");\n        }\n\n        this.drawValidCountLine();\n        this.drawRegisterCountLine();\n    }\n\n    private getInvitationURL(): string {\n        let url: string = window.location.href.replace(window.location.search, \"\");\n        return `${url}?invcode=${this._userData.extendCode}`;\n    }\n\n    private getRankPlayerList(): PromotionInterface.PlayerBrokerageRank[] {\n        let list: PromotionInterface.PlayerBrokerageRank[] = [];\n        for (let i = 0; i < this._data.promotionRankInfo.length; ++i) {\n            let playerBrokerageRank: PromotionInterface.PlayerBrokerageRank = {\n                rank: i + 1,\n                data: this._data.promotionRankInfo[i],\n            }\n            list[i] = playerBrokerageRank;\n        }\n        return list;\n    }\n\n    private clickInvitationGraph(): void {\n\n    }\n\n\n    private clickIndicator(targetNode: cc.Node): void {\n        let worldPos: cc.Vec2 = targetNode.convertToWorldSpaceAR(cc.v2(0, 0));\n        let localPos: cc.Vec2 = this.node.convertToNodeSpaceAR(worldPos);\n\n        Manager.uiManager.open({ type: IndicatorView, bundle: this.bundle, args: [localPos, Manager.makeLanguage(\"Promotion.promotionUpdateDateTips\"), 400, CommonDefine.Direction.UP] });\n    }\n\n    public onClick(ButtonName: any, ButtonNode: any, data?: string): void {\n        switch (ButtonName) {\n            case \"btnInvitationCodeCopy\":\n                window['platformUtil'].copyToClip(this.labInvitationCodeContent.string);\n                break;\n            case \"btnInvitationUrlCopy\":\n                window['platformUtil'].copyToClip(this.getInvitationURL());\n                break;\n            case \"btnInvitation0\":\n            case \"btnInvitation1\":\n            case \"btnInvitation2\":\n            case \"btnInvitation3\":\n            case \"btnInvitation4\":\n            case \"btnInvitation5\":\n            case \"btnInvitation6\":\n                this.clickInvitationGraph();\n                break;\n            case \"btnUpdateDateTips\":\n                this.clickIndicator(ButtonNode);\n                break;\n            case \"btnClose\":\n                this.close();\n                break;\n        }\n    }\n\n    private getArrayMaxValue(arr: (number | Long)[]): number {\n        let maxValue: number = 0;\n        for (let v of arr) {\n            let numValue: number = Number(v);\n            maxValue = Math.max(numValue, maxValue);\n        }\n        return maxValue\n    }\n\n    /**\n     * 请求推广信息\n     */\n    private C2S_PromotionInfo(): void {\n        let req = MST.C2S_PromotionInfo.create({\n            serial: Manager.netManager.getNewSeqId(),\n        });\n        let buffer = MST.C2S_PromotionInfo.encode(req).finish();\n        LobbyService.instance.sendMsg(MST.C2S_PromotionInfo, MST.OuterOpcode_Lobby.C2S_PromotionInfo, buffer);\n    }\n\n    private testData(): void {\n        // this._data.incomeList = [];\n        // this._data.incomeList[0] = 100000;\n        // this._data.incomeList[1] = 48899;\n        // this._data.incomeList[2] = 5534413;\n        // this._data.incomeList[3] = 443537;\n        // this._data.incomeList[4] = 121014;\n        // this._data.incomeList[5] = 6510606;\n        // this._data.incomeList[6] = 65464;\n\n        this._data.registerCountList = [];\n        this._data.registerCountList[0] = 0;\n        this._data.registerCountList[1] = 1;\n        this._data.registerCountList[2] = 2;\n        this._data.registerCountList[3] = 0;\n        this._data.registerCountList[4] = 0;\n        this._data.registerCountList[5] = 0;\n        this._data.registerCountList[6] = 0;\n\n        this._data.validCountList = [];\n        this._data.validCountList[0] = 0;\n        this._data.validCountList[1] = 0;\n        this._data.validCountList[2] = 0;\n        this._data.validCountList[3] = 0;\n        this._data.validCountList[4] = 1;\n        this._data.validCountList[5] = 0;\n        this._data.validCountList[6] = 0;\n\n        this._data.level = 1;\n        this._data.levelPercent = 45;\n\n        this._data.promotionDataInfo.totalIncomeGold = 1;\n        this._data.promotionDataInfo.totalWithdrawGold = 2;\n        this._data.promotionDataInfo.ayerIncomeGold = 3;\n        this._data.promotionDataInfo.ayerInvitationCount = 4;\n        this._data.promotionDataInfo.totalInvitationCount = 5;\n    }\n\n    /**\n     * 响应推广信息\n     */\n    private onEvent_S2C_PromotionInfo(data: MST.IS2C_PromotionInfo): void {\n        this._data = data;\n\n        // this.testData();\n\n        this._maxIncomeGold = this.getArrayMaxValue(this._data.incomeList);\n        this._maxRegisterCount = this.getArrayMaxValue(this._data.registerCountList);\n        this._maxValidCount = this.getArrayMaxValue(this._data.validCountList);\n\n        this.refreshLevel();\n        this.refreshInvitationInfo();\n        this.refreshStatInfo();\n        this.refreshRank();\n        this.refreshIncomeGraph();\n        this.refreshInvitationGraph();\n    }\n\n}\n"]}