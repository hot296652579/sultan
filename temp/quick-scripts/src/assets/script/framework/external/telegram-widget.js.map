{"version":3,"sources":["assets/script/framework/external/telegram-widget.js"],"names":["window","__parseFunction","__func","__attrs","join","execScript","eval","addEvent","el","event","handler","events","split","i","length","addEventListener","attachEvent","removeEvent","removeEventListener","detachEvent","getCssProperty","prop","getComputedStyle","getPropertyValue","currentStyle","geById","el_or_id","String","document","getElementById","HTMLElement","getWidgetsOrigin","default_origin","dev_origin","link","createElement","origin","href","currentScript","src","protocol","hostname","getPageCanonical","a","querySelector","getAttribute","links","getElementsByTagName","getXHR","navigator","appName","ActiveXObject","XMLHttpRequest","Telegram","__WidgetUuid","__WidgetLastId","__WidgetCallbacks","postMessageToIframe","iframe","data","callback","_ready","_readyQueue","push","_cb","contentWindow","postMessage","JSON","stringify","e","initWidget","widgetEl","widgetId","widgetElId","widgetsOrigin","existsEl","styles","allowedAttrs","defWidth","defHeight","scrollable","onInitAuthUser","onAuthUser","onUnauth","tagName","toUpperCase","classList","contains","_iframe","comment","replace","minWidth","websitePageUrl","encodeURIComponent","hasAttribute","location","size","user","authUrl","indexOf","params","key","btoa","attr","novalue","substr","slice","data_attr","attr_value","getCurCoords","docEl","documentElement","frect","getBoundingClientRect","frameTop","top","frameBottom","bottom","frameLeft","left","frameRight","right","frameWidth","width","frameHeight","height","scrollTop","pageYOffset","scrollLeft","pageXOffset","clientWidth","clientHeight","visibilityHandler","isVisible","frame","focusHandler","has_focus","hasFocus","postMessageHandler","source","parse","style","queue_item","value","scrollTo","x","y","init","auth_data","cb_data","console","warn","id","setAttribute","overflow","border","parentNode","insertBefore","removeChild","padding","node","val","visibility","display","opacity","rect","html","innerHeight","innerWidth","getAllWidgets","widgets","querySelectorAll","Array","prototype","apply","concat","getWidgetInfo","setWidgetOptions","options","TelegramLogin","popups","auth","bot_id","parseInt","Error","Math","max","screen","availLeft","availTop","onMessage","onAuthDone","result","authData","authFinished","checkClose","closed","getAuthData","setTimeout","popup_url","request_access","lang","popup","open","focus","xhr","url","setRequestHeader","onreadystatechange","readyState","responseBody","responseText","onerror","withCredentials","send","Login"],"mappings":"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","sourceRoot":"/","sourcesContent":["(function (window) {\n  (function (window) {\n    window.__parseFunction = function (__func, __attrs) {\n      __attrs = __attrs || [];\n      __func = '(function(' + __attrs.join(',') + '){' + __func + '})';\n      return window.execScript ? window.execScript(__func) : eval(__func);\n    }\n  }(window));\n  (function (window) {\n\n    function addEvent(el, event, handler) {\n      var events = event.split(/\\s+/);\n      for (var i = 0; i < events.length; i++) {\n        if (el.addEventListener) {\n          el.addEventListener(events[i], handler);\n        } else {\n          el.attachEvent('on' + events[i], handler);\n        }\n      }\n    }\n    function removeEvent(el, event, handler) {\n      var events = event.split(/\\s+/);\n      for (var i = 0; i < events.length; i++) {\n        if (el.removeEventListener) {\n          el.removeEventListener(events[i], handler);\n        } else {\n          el.detachEvent('on' + events[i], handler);\n        }\n      }\n    }\n    function getCssProperty(el, prop) {\n      if (window.getComputedStyle) {\n        return window.getComputedStyle(el, '').getPropertyValue(prop) || null;\n      } else if (el.currentStyle) {\n        return el.currentStyle[prop] || null;\n      }\n      return null;\n    }\n    function geById(el_or_id) {\n      if (typeof el_or_id == 'string' || el_or_id instanceof String) {\n        return document.getElementById(el_or_id);\n      } else if (el_or_id instanceof HTMLElement) {\n        return el_or_id;\n      }\n      return null;\n    }\n\n    var getWidgetsOrigin = function (default_origin, dev_origin) {\n      var link = document.createElement('A'), origin;\n      link.href = document.currentScript && document.currentScript.src || default_origin;\n      origin = link.origin || link.protocol + '//' + link.hostname;\n      if (origin == 'https://telegram.org') {\n        origin = default_origin;\n      } else if (origin == 'https://telegram-js.azureedge.net' || origin == 'https://tg.dev') {\n        origin = dev_origin;\n      }\n      return origin;\n    };\n\n    var getPageCanonical = function () {\n      var a = document.createElement('A'), link, href;\n      if (document.querySelector) {\n        link = document.querySelector('link[rel=\"canonical\"]');\n        if (link && (href = link.getAttribute('href'))) {\n          a.href = href;\n          return a.href;\n        }\n      } else {\n        var links = document.getElementsByTagName('LINK');\n        for (var i = 0; i < links.length; i++) {\n          if ((link = links[i]) &&\n            (link.getAttribute('rel') == 'canonical') &&\n            (href = link.getAttribute('href'))) {\n            a.href = href;\n            return a.href;\n          }\n        }\n      }\n      return false;\n    };\n\n    function getXHR() {\n      if (navigator.appName == \"Microsoft Internet Explorer\") {\n        return new ActiveXObject(\"Microsoft.XMLHTTP\");\n      } else {\n        return new XMLHttpRequest();\n      }\n    }\n\n    if (!window.Telegram) {\n      window.Telegram = {};\n    }\n    if (!window.Telegram.__WidgetUuid) {\n      window.Telegram.__WidgetUuid = 0;\n    }\n    if (!window.Telegram.__WidgetLastId) {\n      window.Telegram.__WidgetLastId = 0;\n    }\n    if (!window.Telegram.__WidgetCallbacks) {\n      window.Telegram.__WidgetCallbacks = {};\n    }\n\n    function postMessageToIframe(iframe, event, data, callback) {\n      if (!iframe._ready) {\n        if (!iframe._readyQueue) iframe._readyQueue = [];\n        iframe._readyQueue.push([event, data, callback]);\n        return;\n      }\n      try {\n        data = data || {};\n        data.event = event;\n        if (callback) {\n          data._cb = ++window.Telegram.__WidgetLastId;\n          window.Telegram.__WidgetCallbacks[data._cb] = {\n            iframe: iframe,\n            callback: callback\n          };\n        }\n        iframe.contentWindow.postMessage(JSON.stringify(data), '*');\n      } catch (e) { }\n    }\n\n    function initWidget(widgetEl) {\n      var widgetId, widgetElId, widgetsOrigin, existsEl,\n        src, styles = {}, allowedAttrs = [],\n        defWidth, defHeight, scrollable = false, onInitAuthUser, onAuthUser, onUnauth;\n      if (!widgetEl.tagName ||\n        !(widgetEl.tagName.toUpperCase() == 'SCRIPT' ||\n          widgetEl.tagName.toUpperCase() == 'BLOCKQUOTE' &&\n          widgetEl.classList.contains('telegram-post'))) {\n        return null;\n      }\n      if (widgetEl._iframe) {\n        return widgetEl._iframe;\n      }\n      if (widgetId = widgetEl.getAttribute('data-telegram-post')) {\n        var comment = widgetEl.getAttribute('data-comment') || '';\n        widgetsOrigin = getWidgetsOrigin('https://t.me', 'https://post.tg.dev');\n        widgetElId = 'telegram-post-' + widgetId.replace(/[^a-z0-9_]/ig, '-') + (comment ? '-comment' + comment : '');\n        src = widgetsOrigin + '/' + widgetId + '?embed=1';\n        allowedAttrs = ['comment', 'userpic', 'mode', 'single?', 'color', 'dark', 'dark_color'];\n        defWidth = widgetEl.getAttribute('data-width') || '100%';\n        defHeight = '';\n        styles.minWidth = '320px';\n      }\n      else if (widgetId = widgetEl.getAttribute('data-telegram-discussion')) {\n        widgetsOrigin = getWidgetsOrigin('https://t.me', 'https://post.tg.dev');\n        widgetElId = 'telegram-discussion-' + widgetId.replace(/[^a-z0-9_]/ig, '-') + '-' + (++window.Telegram.__WidgetUuid);\n        var websitePageUrl = widgetEl.getAttribute('data-page-url');\n        if (!websitePageUrl) {\n          websitePageUrl = getPageCanonical();\n        }\n        src = widgetsOrigin + '/' + widgetId + '?embed=1&discussion=1' + (websitePageUrl ? '&page_url=' + encodeURIComponent(websitePageUrl) : '');\n        allowedAttrs = ['comments_limit', 'color', 'colorful', 'dark', 'dark_color', 'width', 'height'];\n        defWidth = widgetEl.getAttribute('data-width') || '100%';\n        defHeight = widgetEl.getAttribute('data-height') || 0;\n        styles.minWidth = '320px';\n        if (defHeight > 0) {\n          scrollable = true;\n        }\n      }\n      else if (widgetEl.hasAttribute('data-telegram-login')) {\n        widgetId = widgetEl.getAttribute('data-telegram-login');\n        widgetsOrigin = getWidgetsOrigin('https://oauth.telegram.org', 'https://oauth.tg.dev');\n        widgetElId = 'telegram-login-' + widgetId.replace(/[^a-z0-9_]/ig, '-');\n        src = widgetsOrigin + '/embed/' + widgetId + '?origin=' + encodeURIComponent(location.origin || location.protocol + '//' + location.hostname);\n        allowedAttrs = ['size', 'userpic', 'init_auth', 'request_access', 'radius', 'min_width', 'max_width', 'lang'];\n        defWidth = 186;\n        defHeight = 28;\n        if (widgetEl.hasAttribute('data-size')) {\n          var size = widgetEl.getAttribute('data-size');\n          if (size == 'small') defWidth = 148, defHeight = 20;\n          else if (size == 'large') defWidth = 238, defHeight = 40;\n        }\n        if (widgetEl.hasAttribute('data-onauth')) {\n          onInitAuthUser = onAuthUser = __parseFunction(widgetEl.getAttribute('data-onauth'), ['user']);\n        }\n        else if (widgetEl.hasAttribute('data-auth-url')) {\n          var a = document.createElement('A');\n          a.href = widgetEl.getAttribute('data-auth-url');\n          onAuthUser = function (user) {\n            var authUrl = a.href;\n            authUrl += (authUrl.indexOf('?') >= 0) ? '&' : '?';\n            var params = [];\n            for (var key in user) {\n              params.push(key + '=' + encodeURIComponent(user[key]));\n            }\n            authUrl += params.join('&');\n            location.href = authUrl;\n          };\n        }\n        if (widgetEl.hasAttribute('data-onunauth')) {\n          onUnauth = __parseFunction(widgetEl.getAttribute('data-onunauth'));\n        }\n      }\n      else if (widgetId = widgetEl.getAttribute('data-telegram-share-url')) {\n        widgetsOrigin = getWidgetsOrigin('https://t.me', 'https://post.tg.dev');\n        widgetElId = 'telegram-share-' + window.btoa(widgetId);\n        src = widgetsOrigin + '/share/embed?origin=' + encodeURIComponent(location.origin || location.protocol + '//' + location.hostname);\n        allowedAttrs = ['telegram-share-url', 'comment', 'size', 'text'];\n        defWidth = 60;\n        defHeight = 20;\n        if (widgetEl.getAttribute('data-size') == 'large') {\n          defWidth = 76;\n          defHeight = 28;\n        }\n      }\n      else {\n        return null;\n      }\n      existsEl = document.getElementById(widgetElId);\n      if (existsEl) {\n        return existsEl;\n      }\n      for (var i = 0; i < allowedAttrs.length; i++) {\n        var attr = allowedAttrs[i];\n        var novalue = attr.substr(-1) == '?';\n        if (novalue) {\n          attr = attr.slice(0, -1);\n        }\n        var data_attr = 'data-' + attr.replace(/_/g, '-');\n        if (widgetEl.hasAttribute(data_attr)) {\n          var attr_value = novalue ? '1' : encodeURIComponent(widgetEl.getAttribute(data_attr));\n          src += '&' + attr + '=' + attr_value;\n        }\n      }\n      function getCurCoords(iframe) {\n        var docEl = document.documentElement;\n        var frect = iframe.getBoundingClientRect();\n        return {\n          frameTop: frect.top,\n          frameBottom: frect.bottom,\n          frameLeft: frect.left,\n          frameRight: frect.right,\n          frameWidth: frect.width,\n          frameHeight: frect.height,\n          scrollTop: window.pageYOffset,\n          scrollLeft: window.pageXOffset,\n          clientWidth: docEl.clientWidth,\n          clientHeight: docEl.clientHeight\n        };\n      }\n      function visibilityHandler() {\n        if (isVisible(iframe, 50)) {\n          postMessageToIframe(iframe, 'visible', { frame: widgetElId });\n        }\n      }\n      function focusHandler() {\n        postMessageToIframe(iframe, 'focus', { has_focus: document.hasFocus() });\n      }\n      function postMessageHandler(event) {\n        if (event.source !== iframe.contentWindow ||\n          event.origin != widgetsOrigin) {\n          return;\n        }\n        try {\n          var data = JSON.parse(event.data);\n        } catch (e) {\n          var data = {};\n        }\n        if (data.event == 'resize') {\n          if (data.height) {\n            iframe.style.height = data.height + 'px';\n          }\n          if (data.width) {\n            iframe.style.width = data.width + 'px';\n          }\n        }\n        else if (data.event == 'ready') {\n          iframe._ready = true;\n          focusHandler();\n          for (var i = 0; i < iframe._readyQueue.length; i++) {\n            var queue_item = iframe._readyQueue[i];\n            postMessageToIframe(iframe, queue_item[0], queue_item[1], queue_item[2]);\n          }\n          iframe._readyQueue = [];\n        }\n        else if (data.event == 'visible_off') {\n          removeEvent(window, 'scroll', visibilityHandler);\n          removeEvent(window, 'resize', visibilityHandler);\n        }\n        else if (data.event == 'get_coords') {\n          postMessageToIframe(iframe, 'callback', {\n            _cb: data._cb,\n            value: getCurCoords(iframe)\n          });\n        }\n        else if (data.event == 'scroll_to') {\n          try {\n            window.scrollTo(data.x || 0, data.y || 0);\n          } catch (e) { }\n        }\n        else if (data.event == 'auth_user') {\n          if (data.init) {\n            onInitAuthUser && onInitAuthUser(data.auth_data);\n          } else {\n            onAuthUser && onAuthUser(data.auth_data);\n          }\n        }\n        else if (data.event == 'unauthorized') {\n          onUnauth && onUnauth();\n        }\n        else if (data.event == 'callback') {\n          var cb_data = null;\n          if (cb_data = window.Telegram.__WidgetCallbacks[data._cb]) {\n            if (cb_data.iframe === iframe) {\n              cb_data.callback(data.value);\n              delete window.Telegram.__WidgetCallbacks[data._cb];\n            }\n          } else {\n            console.warn('Callback #' + data._cb + ' not found');\n          }\n        }\n      }\n      var iframe = document.createElement('iframe');\n      iframe.id = widgetElId;\n      iframe.src = src;\n      iframe.width = defWidth;\n      iframe.height = defHeight;\n      iframe.setAttribute('frameborder', '0');\n      if (!scrollable) {\n        iframe.setAttribute('scrolling', 'no');\n        iframe.style.overflow = 'hidden';\n      }\n      iframe.style.border = 'none';\n      for (var prop in styles) {\n        iframe.style[prop] = styles[prop];\n      }\n      if (widgetEl.parentNode) {\n        widgetEl.parentNode.insertBefore(iframe, widgetEl);\n        if (widgetEl.tagName.toUpperCase() == 'BLOCKQUOTE') {\n          widgetEl.parentNode.removeChild(widgetEl);\n        }\n      }\n      iframe._ready = false;\n      iframe._readyQueue = [];\n      widgetEl._iframe = iframe;\n      addEvent(iframe, 'load', function () {\n        removeEvent(iframe, 'load', visibilityHandler);\n        addEvent(window, 'scroll', visibilityHandler);\n        addEvent(window, 'resize', visibilityHandler);\n        visibilityHandler();\n      });\n      addEvent(window, 'focus blur', focusHandler);\n      addEvent(window, 'message', postMessageHandler);\n      return iframe;\n    }\n    function isVisible(el, padding) {\n      var node = el, val;\n      var visibility = getCssProperty(node, 'visibility');\n      if (visibility == 'hidden') return false;\n      while (node) {\n        if (node === document.documentElement) break;\n        var display = getCssProperty(node, 'display');\n        if (display == 'none') return false;\n        var opacity = getCssProperty(node, 'opacity');\n        if (opacity !== null && opacity < 0.1) return false;\n        node = node.parentNode;\n      }\n      if (el.getBoundingClientRect) {\n        padding = +padding || 0;\n        var rect = el.getBoundingClientRect();\n        var html = document.documentElement;\n        if (rect.bottom < padding ||\n          rect.right < padding ||\n          rect.top > (window.innerHeight || html.clientHeight) - padding ||\n          rect.left > (window.innerWidth || html.clientWidth) - padding) {\n          return false;\n        }\n      }\n      return true;\n    }\n\n    function getAllWidgets() {\n      var widgets = [];\n      if (document.querySelectorAll) {\n        widgets = document.querySelectorAll('script[data-telegram-post],blockquote.telegram-post,script[data-telegram-discussion],script[data-telegram-login],script[data-telegram-share-url]');\n      } else {\n        widgets = Array.prototype.slice.apply(document.getElementsByTagName('SCRIPT'));\n        widgets = widgets.concat(Array.prototype.slice.apply(document.getElementsByTagName('BLOCKQUOTE')));\n      }\n      return widgets;\n    }\n\n    function getWidgetInfo(el_or_id, callback) {\n      var e = null, iframe = null;\n      if (el = geById(el_or_id)) {\n        if (el.tagName &&\n          el.tagName.toUpperCase() == 'IFRAME') {\n          iframe = el;\n        } else if (el._iframe) {\n          iframe = el._iframe;\n        }\n        if (iframe && callback) {\n          postMessageToIframe(iframe, 'get_info', {}, callback);\n        }\n      }\n    }\n\n    function setWidgetOptions(options, el_or_id) {\n      var e = null, iframe = null;\n      if (typeof el_or_id === 'undefined') {\n        var widgets = getAllWidgets();\n        for (var i = 0; i < widgets.length; i++) {\n          if (iframe = widgets[i]._iframe) {\n            postMessageToIframe(iframe, 'set_options', { options: options });\n          }\n        }\n      } else {\n        if (el = geById(el_or_id)) {\n          if (el.tagName &&\n            el.tagName.toUpperCase() == 'IFRAME') {\n            iframe = el;\n          } else if (el._iframe) {\n            iframe = el._iframe;\n          }\n          if (iframe) {\n            postMessageToIframe(iframe, 'set_options', { options: options });\n          }\n        }\n      }\n    }\n\n    if (!document.currentScript ||\n      !initWidget(document.currentScript)) {\n      var widgets = getAllWidgets();\n      for (var i = 0; i < widgets.length; i++) {\n        initWidget(widgets[i]);\n      }\n    }\n\n    var TelegramLogin = {\n      popups: {},\n      auth: function (options, callback) {\n        var bot_id = parseInt(options.bot_id);\n        if (!bot_id) {\n          throw new Error('Bot id required');\n        }\n        var width = 550;\n        var height = 470;\n        var left = Math.max(0, (screen.width - width) / 2) + (screen.availLeft | 0),\n          top = Math.max(0, (screen.height - height) / 2) + (screen.availTop | 0);\n        var onMessage = function (event) {\n          try {\n            var data = JSON.parse(event.data);\n          } catch (e) {\n            var data = {};\n          }\n          if (!TelegramLogin.popups[bot_id]) return;\n          if (event.source !== TelegramLogin.popups[bot_id].window) return;\n          if (data.event == 'auth_result') {\n            onAuthDone(data.result);\n          }\n        };\n        var onAuthDone = function (authData) {\n          if (!TelegramLogin.popups[bot_id]) return;\n          if (TelegramLogin.popups[bot_id].authFinished) return;\n          callback && callback(authData);\n          TelegramLogin.popups[bot_id].authFinished = true;\n          removeEvent(window, 'message', onMessage);\n        };\n        var checkClose = function (bot_id) {\n          if (!TelegramLogin.popups[bot_id]) return;\n          if (!TelegramLogin.popups[bot_id].window ||\n            TelegramLogin.popups[bot_id].window.closed) {\n            return TelegramLogin.getAuthData(options, function (origin, authData) {\n              onAuthDone(authData);\n            });\n          }\n          setTimeout(checkClose, 100, bot_id);\n        }\n        //Telegram.Login.widgetsOrigin\n        var popup_url = 'https://oauth.telegram.org/auth?bot_id=' + encodeURIComponent(options.bot_id) + '&origin=' + encodeURIComponent(location.origin || location.protocol + '//' + location.hostname) + (options.request_access ? '&request_access=' + encodeURIComponent(options.request_access) : '') + (options.lang ? '&lang=' + encodeURIComponent(options.lang) : '');\n        var popup = window.open(popup_url, 'telegram_oauth_bot' + bot_id, 'width=' + width + ',height=' + height + ',left=' + left + ',top=' + top + ',status=0,location=0,menubar=0,toolbar=0');\n        TelegramLogin.popups[bot_id] = {\n          window: popup,\n          authFinished: false\n        };\n        if (popup) {\n          addEvent(window, 'message', onMessage);\n          popup.focus();\n          checkClose(bot_id);\n        }\n      },\n      getAuthData: function (options, callback) {\n        var bot_id = parseInt(options.bot_id);\n        if (!bot_id) {\n          throw new Error('Bot id required');\n        }\n        var xhr = getXHR();\n        var url = 'https://oauth.telegram.org/auth/get';\n        xhr.open('POST', url);\n        xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');\n        xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n        xhr.onreadystatechange = function () {\n          if (xhr.readyState == 4) {\n            if (typeof xhr.responseBody == 'undefined' && xhr.responseText) {\n              try {\n                var result = JSON.parse(xhr.responseText);\n              } catch (e) {\n                var result = {};\n              }\n              if (result.user) {\n                callback(result.origin, result.user);\n              } else {\n                callback(result.origin, false);\n              }\n            } else {\n              callback('*', false);\n            }\n          }\n        };\n        xhr.onerror = function () {\n          callback('*', false);\n        };\n        xhr.withCredentials = true;\n        xhr.send('bot_id=' + encodeURIComponent(options.bot_id) + (options.lang ? '&lang=' + encodeURIComponent(options.lang) : ''));\n      }\n    };\n\n    window.Telegram.getWidgetInfo = getWidgetInfo;\n    window.Telegram.setWidgetOptions = setWidgetOptions;\n    window.Telegram.Login = {\n      auth: TelegramLogin.auth,\n      widgetsOrigin: getWidgetsOrigin('https://oauth.telegram.org', 'https://oauth.tg.dev')\n    };\n\n  }(window));\n})(window);"]}