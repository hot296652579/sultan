{"version":3,"sources":["assets/script/framework/ui/UIView.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import EventComponent from \"../base/EventComponent\";\nimport AudioComponent from \"../base/AudioComponent\";\n// import { Manager } from \"../Framework\";\nimport { BUNDLE_RESOURCES } from \"../base/Defines\";\nimport { Manager } from \"../../common/manager/Manager\";\nimport UserData from \"../../data/UserData\";\nimport { i18n } from \"../../common/language/LanguageImpl\";\nimport { ViewZOrder } from \"../../common/config/Config\";\nimport { EventDefine } from \"../../common/define/EventDefine\";\n\n/**\n * @description 视图基类\n */\nconst { ccclass, property } = cc._decorator;\n\nexport interface UIClass<T extends UIView> {\n    new(): T;\n    /**\n     *@description 视图prefab 地址 resources目录下如z_panels/WeiZoneLayer \n     */\n    getPrefabUrl(): string;\n}\n\n@ccclass\nexport default abstract class UIView extends EventComponent {\n\n    /**@description 是否允许接受键盘事件 */\n    private _isEnableKey = false;\n\n    /**@description 按钮点击状态 */\n    private curClickState = false;\n    private allCurTimeout: any;\n    protected scvRoot: cc.ScrollView = null;\n\n    public static getPrefabUrl(): string {\n        if (CC_DEBUG) {\n            cc.error(`请求实现public static getPrefabUrl`);\n        }\n        return \"unknown\";\n    }\n\n    /**@description init代码参数 */\n    private _args: any[] = null;\n    /**@description 当前传入参数，即通过UI管理器打开时的传入参数 */\n    public get args() {\n        return this._args;\n    }\n\n    /**\n     * @description 查找子节点\n     * @param path 子节点路径\n     * @param referenceNode 从哪一个节点开始查找，\n     * referenceNode如果有值，从传入节点中查找，\n     * referenceNode如果没有值，this.content有值，默认从this.content进行查找\n     * referenceNode如不传入，且this.content没有值，相当于使用了cc.find\n     */\n    protected find(path: string, referenceNode?: cc.Node) {\n        if (referenceNode) {\n            return cc.find(path, referenceNode);\n        } else {\n            if (this.content) {\n                return cc.find(path, this.content);\n            } else {\n                return cc.find(path, referenceNode);\n            }\n        }\n    }\n\n    /**\n     * @description 当前界面的节点，如果界面需要使用动画打开或关闭，\n     * 可直接对content进行赋值，\n     * 使用showWithAction 有动画显示\n     * 使用hideWithAction 有动画隐藏\n     * 使用closeWithAction 有动画关闭\n     * */\n    private _content: cc.Node = null;\n    protected set content(value: cc.Node) {\n        this._content = value;\n    }\n    protected get content() {\n        return this._content;\n    }\n\n    /**本组件的类名 */\n    private _className: string = \"unknow\";\n    public set className(value: string) {\n        this._className = value;\n    }\n    public get className(): string {\n        return this._className;\n    }\n\n    private _bundle: BUNDLE_TYPE = null;\n    /**指向当前View打开时的bundle */\n    public set bundle(value) {\n        this._bundle = value;\n    }\n    public get bundle() {\n        return this._bundle;\n    }\n\n    public close() {\n        Manager.uiManager.close(this.className);\n    }\n\n    /**@description args为open代入的参数 */\n    public show(args?: any[]) {\n        //再如果界面已经存在于界面管理器中，不会再进入init函数，此时传入新的参数，只从show里面过来,这里重新对_args重新赋值\n        this._args = args;\n        if (this.node) this.node.active = true;\n    }\n\n    public hide() {\n        Manager.uiManager.close(this.className);\n\n        // if (this.node) this.node.removeFromParent(false);\n    }\n    playDefaultEffect(buttonName?: string) {\n        switch (buttonName) {\n            case \"close\":\n                // ryyl.audio.playSoundEffectByPath(\"modules/public/res/audio/close\");\n                if (this.audioHelper) {\n                    this.audioHelper.playEffect(\"common/audio/close\", BUNDLE_RESOURCES);\n                }\n                break;\n            // default: ryyl.audio.playSoundEffectByPath(\"modules/public/res/audio/click\");\n            default:\n                if (this.audioHelper) {\n                    this.audioHelper.playEffect(\"common/audio/click\", BUNDLE_RESOURCES);\n                }\n\n        }\n    }\n    /**\n    * @param event\n    * @param type UI编辑器传参 有值就不做按钮连点过滤\n    * @Explain Button点击事件统一调用\n    */\n\n    public onClickButton(event, type) {\n        let buttonName = event.target.name;\n        let buttonNode = event.target;\n        if (type === null || type === undefined) {\n            if (this.curClickState) return;\n            this.curClickState = true;\n            this.allCurTimeout = this.allCurTimeout || [];\n            this.allCurTimeout.push(setTimeout(() => {\n                this.curClickState = false;\n            }, 100));\n        }\n        //G.Logger.log(`点击了button -> ${buttonName}`);\n        this.playDefaultEffect(buttonName)\n        this.onClick(buttonName, buttonNode, type);\n    }\n\n    public onClickCheckButton(event, type) {\n        let buttonName = event.target.name;\n        let buttonNode = event.target;\n        if (type === null || type === undefined) {\n            if (this.curClickState) return;\n            this.curClickState = true;\n            this.allCurTimeout = this.allCurTimeout || [];\n            this.allCurTimeout.push(setTimeout(() => {\n                this.curClickState = false;\n            }, 100));\n        }\n        //G.Logger.log(`点击了button -> ${buttonName}`);\n        this.playDefaultEffect(buttonName)\n\n        if (!G.DataMgr.get(UserData).isLogined()) {\n            // PanelHelp.showTip(i18n.Tips.SilakanMasuk);\n            dispatch(EventDefine.NOT_LOGIN_CLICK_BUTTON);\n            return;\n        }\n\n        this.onClick(buttonName, buttonNode, type);\n    }\n\n    /**\n    * @param ButtonName\n    * @param ButtonNode\n    * @param data {index} 编辑器传入数据\n    * @Explain 子类需要重写这个接口来触发点击事件\n    */\n    public onClick(ButtonName, ButtonNode, data?: string) { }\n\n    public clearCurTimeout() {\n        if (!this.allCurTimeout) return;\n        let count = this.allCurTimeout.length;\n        for (let i = 0; i < count; i++) {\n            clearTimeout(this.allCurTimeout[i]);\n        }\n    }\n\n\n    /**@description 动画显示界面 \n     *@param isOverrideShow 是否是重写show调用的,如果是重写show调用了,必将此参数设置为true,否则会产生死循环递归调用 \n     *@param completeCallback 完成回调\n     *@example \n     *  示例： 通常在init/onLoad函数中调用 showWithAction,\n     *  但如果需要界面通过hide隐藏，而不是关闭界面时，下一次显示时\n     *  管理器直接调用了show,没有执行界面的打开动画，如果还需要界面打开动画\n     *  需要按如下方式重写show方法\n     *  show( args : any[] ){\n     *      super.show(args);\n     *      this.showWithAction(true);\n     *      //to do => \n     *  }\n     */\n    public showWithAction(isOverrideShow = false, completeCallback?: () => void) {\n        if (this.content) {\n            if (!isOverrideShow) this.show(this.args);\n            this.content.stopAllActions();\n            if (this.content.getComponent(cc.Widget)) {\n                this.content.getComponent(cc.Widget).enabled = false\n            }\n            cc.tween(this.content)\n                .set({ scale: 0.2 })\n                .to(0.1, { scale: 1.15 })\n                .delay(0.05)\n                .to(0.1, { scale: 1.0 })\n                .call(() => {\n                    if (completeCallback) completeCallback();\n                    if (this.content.getComponent(cc.Widget)) {\n                        this.content.getComponent(cc.Widget).enabled = true\n                    }\n                })\n                .start();\n        }\n    }\n\n    /**@description 动画隐藏界面 \n     *@param isOverrideHide 是否是重写hide调用的,如果是重写hide调用了,必将此参数设置为true,否则会产生死循环递归调用 \n     *@param completeCallback 完成回调\n     */\n    public hideWithAction(completeCallback?: () => void) {\n        if (this.content) {\n            this.content.stopAllActions();\n            cc.tween(this.content)\n                .to(0.1, { scale: 1.15 })\n                .to(0.1, { scale: 0.3 })\n                .call(() => {\n                    this.hide();\n                    this.content.scale = 1.0;\n                    if (completeCallback) completeCallback();\n                })\n                .start();\n        }\n    }\n\n    /**@description 动画关闭界面 \n     *@param completeCallback 完成回调\n     */\n    public closeWithAction(completeCallback?: () => void) {\n        if (this.content && this.content.getNumberOfRunningActions() == 0) {\n            this.content.stopAllActions();\n            cc.tween(this.content)\n                .to(0.1, { scale: 1.15 })\n                .to(0.1, { scale: 0.3 })\n                .call(() => {\n                    if (completeCallback) completeCallback();\n                    this.close();\n                })\n                .start();\n        }\n    }\n\n    /**\n     * @description 启用物理返回键按钮\n     * @param isEnabled true 启用，\n     * @example 重写onKeyBack方法\n     */\n    protected setEnabledKeyBack(isEnabled: boolean) {\n        if (isEnabled) {\n            cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\n            cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\n        } else {\n            cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\n        }\n\n        this._isEnableKey = isEnabled;\n    }\n\n    protected isEnabledKeyBack() {\n        return this._isEnableKey;\n    }\n\n    protected onKeyUp(ev: cc.Event.EventKeyboard) {\n        if (CC_DEBUG) {\n            cc.log(`[${cc.js.getClassName(this)}] onKeyUp keyCode : ${ev.keyCode}`);\n        }\n        if (ev.keyCode == cc.macro.KEY.escape) {\n            this.onKeyBack(ev);\n        } else {\n            ev.stopPropagation();\n        }\n    }\n\n    protected onKeyBack(ev: cc.Event.EventKeyboard) {\n        //只有一个接受，不再向上传播\n        ev.stopPropagation();\n    }\n\n    protected audioHelper: AudioComponent = null;\n\n    onLoad() {\n        this.audioHelper = this.addComponent(AudioComponent);\n        this.audioHelper.owner = this;\n\n        let nodRoot: cc.Node = this.node.getChildByName(\"scvRoot\");\n        if (nodRoot) {\n            let scvRoot: cc.ScrollView = nodRoot.getComponent(cc.ScrollView);\n            if (scvRoot) {\n                this.scvRoot = scvRoot;\n            }\n        }\n        super.onLoad();\n    }\n\n    onDestroy() {\n        this.setEnabledKeyBack(false);\n        this.enableFrontAndBackgroundSwitch = false;\n        this.clearCurTimeout();\n        super.onDestroy();\n    }\n\n    private _enterBackgroundTime = 0;\n    private _enableFrontAndBackgroundSwitch = false;\n    public set enableFrontAndBackgroundSwitch(value) {\n        this._enableFrontAndBackgroundSwitch = value;\n        if (value) {\n            cc.game.on(cc.game.EVENT_SHOW, this._onEnterForgeGround, this);\n            cc.game.on(cc.game.EVENT_HIDE, this._onEnterBackground, this);\n        } else {\n            cc.game.off(cc.game.EVENT_SHOW, this._onEnterForgeGround, this);\n            cc.game.off(cc.game.EVENT_HIDE, this._onEnterBackground, this);\n        }\n    }\n    public get enableFrontAndBackgroundSwitch() {\n        return this._enableFrontAndBackgroundSwitch;\n    }\n\n    protected _onEnterBackground() {\n        this._enterBackgroundTime = Date.timeNow();\n        this.onEnterBackground();\n    }\n\n    private _onEnterForgeGround() {\n        let now = Date.timeNow();\n        let inBackgroundTime = now - this._enterBackgroundTime;\n        this.onEnterForgeground(inBackgroundTime);\n    }\n\n    protected onEnterForgeground(inBackgroundTime: number) {\n\n    }\n    protected onEnterBackground() {\n\n    }\n\n    public onScrollTop(): void {\n        if (this.scvRoot) {\n            this.scvRoot.stopAutoScroll();\n            this.scvRoot.scrollToTop();\n        }\n    }\n}\n"]}