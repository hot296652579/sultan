{"version":3,"sources":["assets/script/framework/extentions/Utils.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import UIView from \"../ui/UIView\";\nimport { ResourceInfo, ResourceType, BUNDLE_RESOURCES } from \"../base/Defines\";\nimport { Manager } from \"../Framework\";\n\n/*\n * @Author: your name\n * @Date: 2020-03-20 10:07:02\n * @LastEditTime: 2020-04-10 15:29:14\n * @LastEditors: Please set LastEditors\n * @Description: In User Settings Edit\n * @FilePath: \\ddz\\assets\\framework\\extentions\\Utils.ts\n */\n\n/**@description 添加加载本地的资源 */\nexport function addExtraLoadResource(view: UIView, info: ResourceInfo) {\n    let uiManager = Manager.uiManager;\n    if (view == <any>(uiManager.retainMemory)) {\n        uiManager.retainMemory.addLocal(info);\n    }\n    else if (view && view instanceof UIView) {\n        uiManager.addLocal(info, view.className);\n    } else {\n        uiManager.garbage.addLocal(info);\n    }\n}\n\n/**@description 添加加载远程的资源 */\nexport function addRemoteLoadResource(view: UIView, info: ResourceInfo) {\n    let uiManager = Manager.uiManager;\n    if (view == <any>(uiManager.retainMemory)) {\n        uiManager.retainMemory.addRemote(info);\n    }\n    else if (view && view instanceof UIView) {\n        uiManager.addRemote(info, view.className);\n    } else {\n        uiManager.garbage.addRemote(info);\n    }\n}\n\n/**@description 获取Bundle,如果没有传入，会默认指定当前View打开时的bundle,否则批定resources */\nexport function getBundle( config : { bundle? : BUNDLE_TYPE , view? : UIView}){\n    let bundle : BUNDLE_TYPE = BUNDLE_RESOURCES;\n    if ( config.bundle != BUNDLE_RESOURCES ){\n        if( config.view ){\n            bundle = config.view.bundle;\n        }\n    }\n    return bundle;\n}\n\nfunction isValidComponent(component: cc.Component): boolean {\n    if (cc.isValid(component) && component.node && cc.isValid(component.node)) {\n        return true;\n    }\n    return false;\n}\n\n/**\n * @description 设置cc.Sprite组件精灵帧\n * @param {*} view 持有视图\n * @param {*} url url\n * @param {*} sprite Sprite组件\n * @param {*} spriteFrame 新的精灵帧\n * @param {*} completeCallback 完成回调(data: cc.SpriteFrame) => void\n * @param {*} resourceType 资源类型 默认为ResourceType.Local\n * @param {*} retain 是否常驻内存 默认为false\n * @param {*} isAtlas 是否是大纹理图集加载 默认为false\n */\nexport function setSpriteSpriteFrame(\n    view: UIView,\n    url: string,\n    sprite: cc.Sprite,\n    spriteFrame: cc.SpriteFrame,\n    completeCallback: (data: cc.SpriteFrame) => void,\n    bundle:BUNDLE_TYPE,\n    resourceType: ResourceType = ResourceType.Local,\n    retain: boolean = false,\n    isAtlas: boolean = false) {\n\n    if (!isAtlas) {\n        //纹理只需要把纹理单独添加引用，不需要把spirteFrame也添加引用\n        let info = new ResourceInfo;\n        info.url = url;\n        info.type = cc.SpriteFrame;\n        info.data = spriteFrame;\n        info.retain = retain;\n        info.bundle = bundle;\n        if (resourceType == ResourceType.Remote) {\n            addRemoteLoadResource(view, info);\n        } else {\n            addExtraLoadResource(view, info);\n        }\n    }\n\n    if (spriteFrame && isValidComponent(sprite)) {\n        let oldSpriteFrame = sprite.spriteFrame;\n        let replaceData = cc.isValid(spriteFrame) ? spriteFrame : null;\n        try {\n            if (replaceData) sprite.spriteFrame = replaceData;\n            if (completeCallback) completeCallback(replaceData);\n        } catch (error) {\n            let temp = cc.isValid(oldSpriteFrame) ? oldSpriteFrame : null;\n            sprite.spriteFrame = temp;\n            if (completeCallback) completeCallback(null);\n            //把数据放到全局的垃圾回收中 //好像有点不行，\n            cc.error(`${url} : ${error ? error : \"replace spriteframe error\"}`);\n        }\n    } else {\n        //完成回调\n        if (completeCallback && isValidComponent(sprite)) completeCallback(spriteFrame);\n    }\n}\n\nexport enum ButtonSpriteMemberName {\n    Norml = \"normalSprite\",\n    Pressed = \"pressedSprite\",\n    Hover = \"hoverSprite\",\n    Disable = \"disabledSprite\",\n}\n\n/**\n * @description 设置按钮精灵帧\n * @param view 持有视图\n * @param url url \n * @param button \n * @param spriteFrame 新的spriteFrame\n * @param memberName 替换成员变量名\n * @param completeCallback 完成回调\n * @param isAtlas 是否是从大纹理图集中加载的\n */\nfunction _setSpriteFrame(\n    view: UIView,\n    url: string,\n    button: cc.Button,\n    spriteFrame: cc.SpriteFrame,\n    memberName: string,\n    completeCallback: (type: string, data: cc.SpriteFrame) => void,\n    isAtlas: boolean,\n    bundle:BUNDLE_TYPE) {\n\n    if (!isAtlas) {\n        let info = new ResourceInfo;\n        info.url = url;\n        info.type = cc.SpriteFrame;\n        info.data = spriteFrame;\n        info.bundle = bundle;\n        addExtraLoadResource(view, info);\n    }\n\n    if (spriteFrame && isValidComponent(button)) {\n        let oldSpriteFrame: cc.SpriteFrame = button[memberName];\n        try {\n            let replaceData = cc.isValid(spriteFrame) ? spriteFrame : null;\n            if (replaceData) button[memberName] = replaceData;\n            if (completeCallback) completeCallback(memberName, replaceData);\n        } catch (error) {\n            let temp = cc.isValid(oldSpriteFrame) ? oldSpriteFrame : null;\n            button[memberName] = temp;\n            if (completeCallback) completeCallback(memberName, null);\n            //把数据放到全局的垃圾回收中 //好像有点不行，\n            cc.error(`${url} : ${error ? error : \"replace spriteframe error\"}`);\n        }\n    } else {\n        if (completeCallback && isValidComponent(button)) completeCallback(memberName, spriteFrame);\n    }\n\n};\n\n/**\n * @description 设置按钮精灵帧\n * @param button 按钮组件 \n * @param memberName 成员变量名 \n * @param view 持有视图\n * @param url url\n * @param spriteFrame 待替换的精灵帧 \n * @param completeCallback 完成回调\n * @param isAtlas 是否是从大纹理图集中加载的 默认为false\n */\nfunction _setButtonSpriteFrame(\n    button: cc.Button,\n    memberName: ButtonSpriteMemberName,\n    view: UIView,\n    url: string,\n    spriteFrame: cc.SpriteFrame,\n    completeCallback: (type: string, data: cc.SpriteFrame) => void,\n    bundle: BUNDLE_TYPE,\n    isAtlas: boolean = false) {\n\n    if (spriteFrame && isValidComponent(button)) {\n        _setSpriteFrame(view, url, button, spriteFrame, memberName, completeCallback, isAtlas,bundle);\n    } else {\n        //完成回调\n        if (completeCallback && isValidComponent(button)) completeCallback(memberName, spriteFrame);\n    }\n}\n\n/**\n * @description 根据类型设置按钮\n * @param button \n * @param memberName 成员变量名\n * @param view \n * @param url \n * @param completeCallback \n */\nfunction _setButtonWithType(\n    button: cc.Button,\n    memberName: ButtonSpriteMemberName,\n    view: UIView,\n    url: string | { urls: string[], key: string },\n    completeCallback?: (type: string, spriteFrame: cc.SpriteFrame) => void,\n    bundle ?: BUNDLE_TYPE\n) {\n    if (url) {\n        if (typeof url == \"string\") {\n            Manager.cacheManager.getCacheByAsync(url, cc.SpriteFrame,bundle).then((spriteFrame) => {\n                _setButtonSpriteFrame(button, memberName, view, url, spriteFrame, completeCallback,bundle);\n            });\n        } else {\n            //在纹理图集中查找\n            Manager.cacheManager.getSpriteFrameByAsync(url.urls, url.key, view, addExtraLoadResource,bundle).then((data) => {\n                if (data && data.isTryReload) {\n                    //来到这里面，程序已经崩溃，无意义在处理\n                } else {\n                    _setButtonSpriteFrame(button, memberName, view, data.url, data.spriteFrame, completeCallback,bundle, true);\n                }\n            });\n        }\n    }\n}\n\n/**\n * @description 设置按钮精灵\n * @param button 按钮组件\n * @param config 配置信息\n */\nexport function setButtonSpriteFrame(button: cc.Button, config: {\n    normalSprite?: string | { urls: string[], key: string },\n    view: any,//UIView的子类\n    pressedSprite?: string | { urls: string[], key: string },\n    hoverSprite?: string | { urls: string[], key: string },\n    disabledSprite?: string | { urls: string[], key: string },\n    completeCallback?: (type: string, spriteFrame: cc.SpriteFrame) => void,\n    bundle?:BUNDLE_TYPE\n}) {\n    let bundle = getBundle(config);\n    _setButtonWithType(button, ButtonSpriteMemberName.Norml, config.view, config.normalSprite, config.completeCallback,bundle);\n    _setButtonWithType(button, ButtonSpriteMemberName.Pressed, config.view, config.pressedSprite, config.completeCallback,bundle);\n    _setButtonWithType(button, ButtonSpriteMemberName.Hover, config.view, config.hoverSprite, config.completeCallback,bundle);\n    _setButtonWithType(button, ButtonSpriteMemberName.Disable, config.view, config.disabledSprite, config.completeCallback,bundle);\n}\n\n/**\n * @description 设置特效\n * @param component 特效组件\n * @param config 配置信息\n * @param data 特效数据\n */\nexport function setParticleSystemFile(\n    component: cc.ParticleSystem,\n    config: { url: string, view: any, completeCallback?: (file: cc.ParticleAsset) => void , bundle:BUNDLE_TYPE},\n    data: cc.ParticleAsset\n) {\n    let info = new ResourceInfo;\n    info.url = config.url;\n    info.type = cc.ParticleAsset;\n    info.data = data;\n    info.bundle = getBundle(config);\n    addExtraLoadResource(config.view, info);\n    if (data && isValidComponent(component)) {\n        let oldFile = component.file;\n        try {\n            let replaceData = cc.isValid(data) ? data : null;\n            if (replaceData) component.file = replaceData;\n            if (config.completeCallback) config.completeCallback(replaceData);\n        } catch (error) {\n            let temp = cc.isValid(oldFile) ? oldFile : null;\n            component.file = temp;\n            if (config.completeCallback) config.completeCallback(null);\n            //把数据放到全局的垃圾回收中 //好像有点不行，\n            cc.error(`${config.url} : ${error ? error : \"replace file error\"}`);\n        }\n    } else {\n        //完成回调\n        if (config.completeCallback && isValidComponent(component)) config.completeCallback(data);\n    }\n}\n\n/**\n * @description 设置字体\n * @param component 字体组件\n * @param config 配置信息\n * @param data 字体数据\n */\nexport function setLabelFont(\n    component: cc.Label,\n    config: { font: string, view: any, completeCallback?: (font: cc.Font) => void , bundle:BUNDLE_TYPE },\n    data: cc.Font) {\n    let info = new ResourceInfo;\n    info.url = config.font;\n    info.type = cc.Font;\n    info.data = data;\n    info.bundle = getBundle(config);\n    addExtraLoadResource(config.view, info);\n    if (data && isValidComponent(component)) {\n        let oldFont = component.font;\n        try {\n            let replaceData = cc.isValid(data) ? data : null;\n            if (replaceData) component.font = replaceData;\n            if (config.completeCallback) config.completeCallback(replaceData);\n        } catch (error) {\n            let temp = cc.isValid(oldFont) ? oldFont : null;\n            component.font = temp;\n            if (config.completeCallback) config.completeCallback(null);\n            //把数据放到全局的垃圾回收中 //好像有点不行，\n            cc.error(`${config.font} : ${error ? error : \"replace font error\"}`);\n        }\n    } else {\n        //完成回调\n        if (config.completeCallback && isValidComponent(component)) config.completeCallback(data);\n    }\n}\n\n/**\n * @description 设置spine动画数据\n * @param component spine组件\n * @param config 配置信息\n * @param data 动画数据\n */\nexport function setSkeletonSkeletonData(\n    component: sp.Skeleton,\n    config: { url: string, view: any, completeCallback: (data: sp.SkeletonData) => void , bundle:BUNDLE_TYPE} |\n    { view: any, path: string, name: string, completeCallback: (data: sp.SkeletonData) => void, bundle:BUNDLE_TYPE , isNeedCache?: boolean, retain?: boolean },\n    data: sp.SkeletonData,\n    resourceType: ResourceType = ResourceType.Local) {\n    let url = \"\";\n    let retain = false;\n    if (resourceType == ResourceType.Remote) {\n        let realConfig: { view: any, path: string, name: string, completeCallback: (data: sp.SkeletonData) => void, isNeedCache?: boolean, retain?: boolean } = <any>config;\n        url = `${realConfig.path}/${realConfig.name}`;\n        retain = realConfig.retain ? true : false;\n    } else {\n        let realConfig: { url: string, view: any, completeCallback: (data: sp.SkeletonData) => void } = <any>config;\n        url = realConfig.url;\n    }\n    let info = new ResourceInfo;\n    info.url = url;\n    info.type = sp.SkeletonData;\n    info.data = data;\n    info.retain = retain;\n    info.bundle = getBundle(config);\n    if (resourceType == ResourceType.Remote) {\n        addRemoteLoadResource(config.view, info);\n    } else {\n        addExtraLoadResource(config.view, info);\n    }\n    if (data && isValidComponent(component)) {\n        let oldSkeletonData = component.skeletonData;\n        try {\n            let replaceData = cc.isValid(data) ? data : null;\n            if (replaceData) component.skeletonData = replaceData;\n            if (config.completeCallback) config.completeCallback(replaceData);\n        } catch (error) {\n            let temp = cc.isValid(oldSkeletonData) ? oldSkeletonData : null;\n            component.skeletonData = temp;\n            if (config.completeCallback) config.completeCallback(null);\n            //把数据放到全局的垃圾回收中 //好像有点不行，\n            cc.error(`${url} : ${error ? error : \"replace skeletonData error\"}`);\n        }\n    } else {\n        //完成回调\n        if (config.completeCallback && isValidComponent(component)) config.completeCallback(data);\n    }\n}\n\n/**\n * @description 通过预置体创建Node\n * @param config 配置信息\n */\nexport function createNodeWithPrefab(config: { bundle:BUNDLE_TYPE , url: string, view: any, completeCallback: (node: cc.Node) => void }, data: cc.Prefab) {\n    let info = new ResourceInfo;\n    info.url = config.url;\n    info.type = cc.Prefab;\n    info.data = data;\n    info.bundle = getBundle(config);\n    addExtraLoadResource(config.view, info);\n    if (data && isValidComponent(config.view) && config.completeCallback) {\n        let node = cc.instantiate(data);\n        config.completeCallback(node);\n    }\n}"]}