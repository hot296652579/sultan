{"version":3,"sources":["assets/script/framework/extentions/CocosExtention.js"],"names":["Reflect","defineProperty","cc","Node","prototype","value","writable","userData","Sprite","loadRemoteImage","config","me","isNeedCache","undefined","isRetain","retain","bundle","Manager","assetManager","remote","loadImage","url","then","data","view","completeCallback","ResourceType","Remote","defaultSpriteFrame","cacheManager","getCacheByAsync","SpriteFrame","BUNDLE_RESOURCES","spriteFrame","isValid","getSpriteFrameByAsync","urls","key","addExtraLoadResource","isTryReload","Local","createPrefab","Prefab","sp","Skeleton","loadRemoteSkeleton","loadSkeleton","path","name","SkeletonData","Button","loadButton","Label","loadFont","font","Font","forceDoLayout","_forceUpdateRenderData","_updateRenderData","ParticleSystem","loadFile","ParticleAsset","updateAlignment","node","backcc","_widgetManager","CC_DEBUG","error","_logTag","CC_EDITOR","sys","isBrowser","CC_PREVIEW","os","OS_WINDOWS","log","CocosExtentionInit","get","_language","set","v","self","updateLanguage","cb","Array","isArray","length","concat","string","language","ENABLE_CHANGE_LANGUAGE","isUsing","_isUsinglanguage","eventDispatcher","addEventListener","EventApi","CHANGE_LANGUAGE","_onChangeLanguage","removeEventListener","__label_onDestroy__","onDestroy","call","__label_onLoad__","onLoad","indexOf","USING_LAN_KEY"],"mappings":"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","sourceRoot":"/","sourcesContent":["import WebEditBoxImpl from \"./WebEditBoxImpl\";\nimport { ResourceType, ENABLE_CHANGE_LANGUAGE, USING_LAN_KEY, BUNDLE_RESOURCES } from \"../base/Defines\";\nimport {\n    addExtraLoadResource, setSpriteSpriteFrame, setButtonSpriteFrame,\n    setParticleSystemFile, setLabelFont, setSkeletonSkeletonData,\n    createNodeWithPrefab, getBundle\n} from \"./Utils\";\nimport { EventApi } from \"../event/EventApi\";\nimport { Manager } from \"../Framework\";\n\n/**@description 对cc.Node 扩展一个临时存储的用户自定义数据 */\nif (typeof Reflect == \"object\") {\n    //在浏览器中已经有反射\n    Reflect.defineProperty(cc.Node.prototype, \"userData\", {\n        value: null,\n        writable: true,\n    });\n} else {\n    cc.Node.prototype.userData = null;\n}\n\n/**\n * @description 从网络加载图片，推荐使用第二种方式\n * @param url 网络地址，如 : http://tools.itharbors.com/res/logo.png\n * @param completeCallback 加载完成回调\n * @param defaultSpriteFrame 加载图片失败后，使用的默认图片,当传入string时，会动态加载该默认图片\n * @param isNeedCache 是否需要缓存到本地,如果不需要，每次都会从网络拉取资源,默认都会缓存到本地\n * @param config.retain 远程加载的资源是否驻留在内存中,默认都不驻留内存\n * @example\n * 示例1：\n * let sprite = imageNode.getComponent(cc.Sprite);\n * sprite.loadRemoteImage({url :\"http://tools.itharbors.com/res/logo.png\", defaultSpriteFrame : HALL(\"textures/avatar_default_0.png\"), view : this,completeCallback : (data)=>{\n * \t\tif ( data ) { do something }\n * }});\n * \n * 示例2:\n * let sprite = imageNode.getComponent(cc.Sprite);\n * sprite.loadRemoteImage({url :\"http://tools.itharbors.com/res/logo.png\", defaultSpriteFrame : HALL(\"textures/avatar_default_0.png\"), view : this});\n * \n * 示例3：\n * let sprite = imageNode.getComponent(cc.Sprite);\n * sprite.loadRemoteImage({url :\"http://tools.itharbors.com/res/logo.png\", view : this});\n * }\n */\n\n//config : {url: string, view : any , completeCallback?: (data: cc.SpriteFrame) => void, defaultSpriteFrame?: string , isNeedCache ?: boolean }\ncc.Sprite.prototype.loadRemoteImage = function (config) {\n    let me = this;\n    if (config.isNeedCache == undefined || config.isNeedCache == null) {\n        config.isNeedCache = true;\n    }\n    let isRetain = false;\n    if (config.retain) {\n        isRetain = true;\n    }\n    let bundle = getBundle(config);\n    Manager.assetManager.remote.loadImage(config.url, config.isNeedCache).then((data) => {\n        if (data) {\n            setSpriteSpriteFrame(config.view, config.url, me, data, config.completeCallback, bundle, ResourceType.Remote, isRetain);\n        } else {\n            if (config.defaultSpriteFrame) {\n                if (typeof config.defaultSpriteFrame == \"string\") {\n                    //动态加载了一张图片，把资源通知管理器\n                    Manager.cacheManager.getCacheByAsync(config.defaultSpriteFrame, cc.SpriteFrame, BUNDLE_RESOURCES).then((spriteFrame) => {\n                        setSpriteSpriteFrame(config.view, config.defaultSpriteFrame, me, spriteFrame, config.completeCallback, bundle);\n                    });\n                }\n            }\n        }\n        if (config.completeCallback && cc.isValid(me)) config.completeCallback(data);\n    });\n};\n\n/**\n * @description 加载本地图片\n * @param url 图片路径 {urls:string[],key:string} urls 为纹理名如果有此纹理会打包成多张，此时需要传入所有纹理的地址，key指纹理中名字\n * @param view 所属视图，UIView的子类\n * @param completeCallback 完成回调\n * @example\n * 示例1：\n * sprite.getComponent(cc.Sprite).loadImage({url:{urls:[\"plist/fish_30\",\"plist/fish_30_1\",\"plist/fish_30_2\"],key:\"fishMove_030_28\"},view:this});\n * 示例2：\n * sprite.getComponent(cc.Sprite).loadImage({url:\"hall/a\",view:this});\n */\n//loadImage( config : { url : string | {urls:string[],key:string} , view : any , completeCallback?:(data : SpriteFrame)=>void});\ncc.Sprite.prototype.loadImage = function (config) {\n\n    let me = this;\n    let view = config.view;\n    let url = config.url;\n    let completeCallback = config.completeCallback;\n    let bundle = getBundle(config);\n    if (typeof url == \"string\") {\n        Manager.cacheManager.getCacheByAsync(url, cc.SpriteFrame, bundle).then((spriteFrame) => {\n            setSpriteSpriteFrame(view, url, me, spriteFrame, completeCallback, bundle, ResourceType.Remote, true);\n        });\n    } else {\n        //在纹理图集中查找\n        Manager.cacheManager.getSpriteFrameByAsync(url.urls, url.key, view, addExtraLoadResource, bundle).then((data) => {\n            if (data && data.isTryReload) {\n                //来到这里面程序已经崩溃了，无意义在处理了\n            } else {\n                setSpriteSpriteFrame(view, data.url, me, data.spriteFrame, completeCallback, bundle, ResourceType.Local, false, true);\n            }\n        });\n    }\n}\n\n/**@description 通过预置体路径创建节点 \n * @param config 配置信息\n * @param config.url 预置体路径\n * @param config.view 预置视图资源管理器，继承自UIView\n * @param config.completeCallback 创建完成回调 \n * @example \n * cc.createPrefab({url :GAME_RES(\"res/animations/shzDealerCommon\"),view:this,completeCallback:(node)=>{\n *     if ( node ){\n *         // to do \n *     }\n * }});\n */\ncc.createPrefab = function (config) {\n    let url = config.url;\n    let bundle = getBundle(config);\n    Manager.cacheManager.getCacheByAsync(url, cc.Prefab, bundle).then((data) => {\n        createNodeWithPrefab(config, data)\n    });\n}\n\n/**\n * @description 扩展方法\n * @param remotePath 远程资源路径\n * @param name 远程Spine文件名，不再后缀\n * @param completeCallback 完成回调\n * @param isNeedCache 是否需要缓存到本地,如果不需要，每次都会从网络拉取资源,默认都会缓存到本地\n * @param config.retain 远程加载的资源是否驻留在内存中,默认都不驻留内存\n * @example\n * var skeleton = node.addComponent(sp.Skeleton);\n *\n * let path = \"https://bc-test1.oss-cn-shenzhen.aliyuncs.com/image/action\";\n * let name = \"nnoh_v4\";\n * skeleton.loadRemoteSkeleton({view : this , path : path, name : name, completeCallback : (data:sp.SkeletonData)=>{\n *    if (data) {\n *        skeleton.animation = 'loop';\n *        skeleton.premultipliedAlpha = false;\n *    }\n * }});\n */\n\nsp.Skeleton.prototype.loadRemoteSkeleton = function (config) {\n    let me = this;\n    if (config.isNeedCache == undefined || config.isNeedCache == null) {\n        config.isNeedCache = true;\n    }\n    Manager.assetManager.remote.loadSkeleton(config.path, config.name, config.isNeedCache).then((data) => {\n        setSkeletonSkeletonData(me, config, data, ResourceType.Remote);\n    });\n}\n\n/**\n * @description 加载动画\n * @example\n * action.loadSkeleton({url:\"hall/vip/vipAction/vip_10\",view:this,completeCallback:(data)=>{\n *\tif ( data ){\n *\t\taction.animation = \"loop\";\n *\t\taction.loop = true;\n *\t\taction.premultipliedAlpha = false;\n *\t}\n * }});\n */\nsp.Skeleton.prototype.loadSkeleton = function (config) {\n    let me = this;\n    let url = config.url;\n    let bundle = getBundle(config);\n    Manager.cacheManager.getCacheByAsync(url, sp.SkeletonData, bundle).then((data) => {\n        setSkeletonSkeletonData(me, config, data);\n    });\n}\n\n/**\n * @description 加载按钮\n * @example\n * let button = cc.find(\"button\",this.node);\n * button.getComponent(cc.Button).loadButton({normalSprite : \"hall/a\",view:this});\n * button.getComponent(cc.Button).loadButton({normalSprite : \"hall/b\",pressedSprite : \"hall/c\",view:this});\n */\ncc.Button.prototype.loadButton = function (config) {\n    setButtonSpriteFrame(this, config);\n}\n\n/**\n * @description 加载字体\n * @example\n * let content = cc.find(\"content\",this.node); \n * content.getComponent(cc.Label).loadFont({font:roomPath + dfFont,view:this});\n */\ncc.Label.prototype.loadFont = function (config) {\n    let font = config.font;\n    let me = this;\n    let bundle = getBundle(config);\n    Manager.cacheManager.getCacheByAsync(font, cc.Font, bundle).then((data) => {\n        setLabelFont(me, config, data);\n    });\n}\n\n/**@description 强制label在当前帧进行绘制 */\ncc.Label.prototype.forceDoLayout = function () {\n    //2.2.0\n    if (this._forceUpdateRenderData) {\n        this._forceUpdateRenderData();\n    }\n    //2.2.0以下版本\n    else if (this._updateRenderData) {\n        this._updateRenderData(true);\n    }\n}\n\n/**\n * @description 加载特效文件 view 为null时，加载之前不会释\n * @example\n * let node = new cc.Node();\n * let par = node.addComponent(cc.ParticleSystem);\n * par.loadFile({url:GAME_RES( \"res/action/DDZ_win_lizi\" ),view:null});\n * this.node.addChild(node);\n */\ncc.ParticleSystem.prototype.loadFile = function (config) {\n    let me = this;\n    let url = config.url;\n    let bundle = getBundle(config);\n    Manager.cacheManager.getCacheByAsync(url, cc.ParticleAsset, bundle).then((data) => {\n        setParticleSystemFile(me, config, data);\n    });\n}\n\n/**\n * @description 强制节点在当前帧进行一次布局 \n * @example\n * cc.updateAlignment(this.node);\n * */\ncc.updateAlignment = function (node) {\n    if (node) {\n        //强制当前节点进行本帧强制布局\n        let backcc = cc;\n        if (backcc._widgetManager) {\n            backcc._widgetManager.updateAlignment(node);\n        } else {\n            if (CC_DEBUG) cc.error(this._logTag, `引擎变化,原始引擎版本2.1.2，找不到cc._widgetManager`);\n        }\n    }\n}\n\n\nif (!CC_EDITOR) {\n\n    //对引擎输入框进行修改 ,原始引擎版本2.1.2\n    if (cc.sys.isBrowser && !CC_PREVIEW && cc.sys.os != cc.sys.OS_WINDOWS) {\n        if (CC_DEBUG) cc.log(`浏览器`);\n        // cc.EditBox._ImplClass = WebEditBoxImpl; \n    }\n}\n\nexport function CocosExtentionInit() {\n    //cc.log(\"CocosExtentionInit\");\n}\n\nReflect.defineProperty(cc.Label.prototype, \"language\", {\n    get: function () {\n        return this._language;\n    },\n    set: function (v) {\n        //该游戏允许在游戏中进行语言包切换,当设置的值为 null | [] 时，清除language的事件绑定\n        let self = this;\n        let updateLanguage = (v, cb) => {\n            if (v && ((Array.isArray(v) && v.length > 0) || !!v)) {\n                let value = null;\n                if (Array.isArray(v)) {\n                    value = v;\n                } else {\n                    value = [v];\n                }\n                cb && cb(true);\n                self._language = [].concat(value);\n                self.string = Manager.language.get(value);\n            } else {\n                cb && cb(false);\n                self._language = null;\n                self.string = \"\";\n            }\n        }\n        if (ENABLE_CHANGE_LANGUAGE) {\n            if (self.isValid) {\n                updateLanguage(v, (isUsing) => {\n                    if (isUsing) {\n                        if (!!!self._isUsinglanguage) {\n                            self._isUsinglanguage = true;\n                            Manager.eventDispatcher.addEventListener(EventApi.CHANGE_LANGUAGE, self._onChangeLanguage, self);\n                        }\n                    } else {\n                        if (self._language) {\n                            Manager.eventDispatcher.removeEventListener(EventApi.CHANGE_LANGUAGE, self);\n                        }\n                    }\n                })\n            }\n\n        } else {\n            updateLanguage(v, null);\n        }\n    }\n});\n\nif (!CC_EDITOR && ENABLE_CHANGE_LANGUAGE) {\n    cc.Label.prototype._onChangeLanguage = function () {\n        this.language = this.language;\n    }\n\n    let __label_onDestroy__ = cc.Label.prototype.onDestroy;\n    cc.Label.prototype.onDestroy = function () {\n        if (this._isUsinglanguage) {\n            Manager.eventDispatcher.removeEventListener(EventApi.CHANGE_LANGUAGE, this);\n        }\n        __label_onDestroy__ && __label_onDestroy__.call(this);\n    }\n\n    let __label_onLoad__ = cc.Label.prototype.onLoad;\n    cc.Label.prototype.onLoad = function () {\n        if (this.string.indexOf(USING_LAN_KEY) > -1) {\n            this.language = [this.string];\n        }\n        __label_onLoad__ && __label_onLoad__.call(this);\n    }\n\n}\n"]}