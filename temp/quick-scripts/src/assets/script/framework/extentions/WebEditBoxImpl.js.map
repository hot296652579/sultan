{"version":3,"sources":["assets/script/framework/extentions/WebEditBoxImpl.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { Manager } from \"../Framework\";\n\nclass WebEditBoxHelper {\n    private static _instance: WebEditBoxHelper = null;\n    public static get instance() { return this._instance || (this._instance = new WebEditBoxHelper()); }\n    private input: HTMLInputElement = null;\n    private textarea: HTMLTextAreaElement = null;\n    private div: HTMLDivElement = null;\n    init() {\n        if (this.div == null) {\n            //创建一个全黑色的半透明背景\n            let div = window.document.createElement(\"div\");\n            div.style.width = \"100%\";\n            div.style.height = \"100%\";\n            div.style.margin = \"0px\";\n            div.style.position = \"absolute\";\n            div.style.zIndex = \"1000\";\n            div.style.bottom = \"0px\";\n            div.style.left = \"0px\";\n            div.style.backgroundColor = \"#000\";\n            div.style.opacity = \"0.5\";\n            div.style.visibility = \"hidden\";\n            div.id = \"input_background\";\n\n            cc.game.container.appendChild(div);\n            this.div = div;\n        }\n\n        if (this.input == null) {\n            let input = window.document.createElement(\"input\");\n            input.style.zIndex = \"1001\"\n            input.id = \"EditBox_Input\";\n            input.style.visibility = \"hidden\";\n            input.style.width = \"98%\";\n            input.style.height = \"30px\";\n            input.style.border = \"2px\";\n            input.style.borderColor = \"blue\";\n            input.style.position = \"absolute\";\n            input.style.top = \"5px\";\n            input.style.left = \"1%\";\n            input.style.borderRadius = \"5px\";\n            input.style.fontSize = \"25px\";\n            (<any>input.style).type = \"text\";\n            input.style['-moz-appearance'] = \"textfield\";\n\n            cc.game.container.appendChild(input);\n            this.input = input;\n        }\n\n        if (this.textarea == null) {\n            let textarea = window.document.createElement(\"textarea\");\n            textarea.style.zIndex = \"1001\";\n            textarea.id = \"EditBox_Textarea\";\n            textarea.style.visibility = \"hidden\"\n            textarea.style.width = \"98%\";\n            textarea.style.height = \"50px\";\n            textarea.style.border = \"2px\";\n            textarea.style.borderColor = \"blue\";\n            textarea.style.position = \"absolute\";\n            textarea.style.top = \"5px\";\n            textarea.style.left = \"1%\";\n            textarea.style.borderRadius = \"5px\";\n            textarea.style.resize = \"none\";\n            textarea.style.fontSize = \"25px\";\n            (<any>textarea.style).overflow_y = \"scroll\";\n            textarea.style.overflowY = \"scroll\";\n            cc.game.container.appendChild(textarea);\n            this.textarea = textarea;\n        }\n\n        window.addEventListener(\"orientationchange\", this.onOrientationChange.bind(this), false);\n\n        this.hideDom();\n    }\n\n\n    private onOrientationChange() {\n        if (this.input) this.input.blur();\n        if (this.textarea) this.textarea.blur();\n    }\n\n    private adjust(rotate: number | string) {\n        if (rotate == 0 || rotate == 180) {\n            let height = parseInt(cc.game.container.style.height);\n            let rate = 0.90;\n            let width = height * rate;\n            if (this.input) {\n                this.input.style.width = `${width}px`;\n                this.input.style.top = `${width / 2}px`;\n                this.input.style.transform = \"rotate(-90deg)\";\n                this.input.style.left = `-${width / 2 - 30}px`;\n            }\n            if (this.textarea) {\n                this.textarea.style.width = `${width}px`;\n                this.textarea.style.top = `${width / 2}px`;\n                this.textarea.style.transform = \"rotate(-90deg)\";\n                this.textarea.style.left = `-${width - 50}px`;\n            }\n        } else {\n            if (this.input) {\n                this.input.style.width = \"98%\";\n                this.input.style.top = \"5px\";\n                this.input.style.transform = \"rotate(0deg)\";\n                this.input.style.left = \"1%\";\n            }\n            if (this.textarea) {\n                this.textarea.style.width = \"98%\";\n                this.textarea.style.top = \"5px\";\n                this.textarea.style.transform = \"rotate(0deg)\";\n                this.textarea.style.left = \"1%\";\n            }\n        }\n    }\n\n    createTextArea() {\n        return this.textarea;\n    }\n\n    createInput() {\n        return this.input;\n    }\n\n    hideDom() {\n        if (this.div) { this.div.style.visibility = \"hidden\"; }\n        if (this.input) { this.input.style.visibility = \"hidden\"; }\n        if (this.textarea) { this.textarea.style.visibility = \"hidden\"; }\n    }\n\n    showDom(isTextArea: boolean) {\n        if (this.input && this.textarea) {\n            if (this.div) { this.div.style.visibility = \"visible\"; }\n            this.input.style.visibility = isTextArea ? \"hidden\" : \"visible\";\n            this.textarea.style.visibility = isTextArea ? \"visible\" : \"hidden\";\n            this.adjust(window.orientation);\n        }\n    }\n}\n\nexport default class WebEditBoxImpl {\n\n    private _delegate = null;\n    private _elem: HTMLElement = null;\n    private _isTextArea = false;\n    // event listeners\n    private _eventListeners: any = {};\n    private _isFocus = false;\n\n    init(delegate) {\n        if (!delegate) {\n            return;\n        }\n        this._delegate = delegate;\n        WebEditBoxHelper.instance.init();\n\n        if (delegate.inputMode === cc.EditBox.InputMode.ANY) {\n            this._createTextArea();\n        } else {\n            this._createInput();\n        }\n    }\n\n    enable() {\n        //do nothing\n    }\n\n    disable() {\n        if (this._isFocus) {\n            this._elem.blur();\n        }\n    }\n\n    clear() {\n        if (this._isFocus) {\n            this._removeEventListeners();\n            WebEditBoxHelper.instance.hideDom();\n        }\n    }\n\n    update() {\n\n    }\n\n    setTabIndex(index) {\n        // Only support on Web platform\n    }\n\n    setSize(width, height) {\n        // Only support on Web platform\n    }\n\n    setFocus(value) {\n        if (value) {\n            this.beginEditing();\n        } else {\n            this._isFocus = false;\n        }\n    }\n\n    isFocused() {\n        return this._isFocus;\n    }\n\n    beginEditing() {\n        this._isFocus = true;\n        Manager.adaptor.isShowKeyboard = true;\n        this._showDom();\n        this._registerEventListeners();\n        this._elem.focus();\n\n        this._delegate.editBoxEditingDidBegan();\n    }\n\n    endEditing() {\n\n    }\n\n    private _createTextArea() {\n        this._isTextArea = true;\n        this._elem = WebEditBoxHelper.instance.createTextArea();\n    }\n\n    private _createInput() {\n        this._isTextArea = false;\n        this._elem = WebEditBoxHelper.instance.createInput();\n    }\n\n    private _showDom() {\n        WebEditBoxHelper.instance.showDom(this._isTextArea);\n        this._updateMaxLength();\n        this._updateInputType();\n        this._updateStyleSheet();\n        //this._delegate._hideLabels();\n    }\n\n    private _hideDom() {\n        if (this._isFocus) {\n            WebEditBoxHelper.instance.hideDom();\n            //this._delegate._showLabels();\n        }\n    }\n\n    private _updateInputType() {\n        let delegate = this._delegate,\n            inputMode = delegate.inputMode,\n            inputFlag = delegate.inputFlag,\n            returnType = delegate.returnType,\n            elem = this._elem;\n\n        // FIX ME: TextArea actually dose not support password type.\n        if (this._isTextArea) {\n            // input flag\n            let textTransform = 'none';\n            if (inputFlag === cc.EditBox.InputFlag.INITIAL_CAPS_ALL_CHARACTERS) {\n                textTransform = 'uppercase';\n            }\n            else if (inputFlag === cc.EditBox.InputFlag.INITIAL_CAPS_WORD) {\n                textTransform = 'capitalize';\n            }\n            elem.style.textTransform = textTransform;\n            return;\n        }\n\n        // begin to updateInputType\n        if (inputFlag === cc.EditBox.InputFlag.PASSWORD) {\n            (<any>elem).type = 'password';\n            return;\n        }\n\n        // input mode\n        let type = (<any>elem).type;\n        if (inputMode === cc.EditBox.InputMode.EMAIL_ADDR) {\n            type = 'email';\n        } else if (inputMode === cc.EditBox.InputMode.NUMERIC || inputMode === cc.EditBox.InputMode.DECIMAL) {\n            type = 'number';\n        } else if (inputMode === cc.EditBox.InputMode.PHONE_NUMBER) {\n            type = 'number';\n            (<any>elem).pattern = '[0-9]*';\n        } else if (inputMode === cc.EditBox.InputMode.URL) {\n            type = 'url';\n        } else {\n            type = 'text';\n\n            if (returnType === cc.EditBox.KeyboardReturnType.SEARCH) {\n                type = 'search';\n            }\n        }\n        (<any>elem).type = type;\n\n        // input flag\n        let textTransform = 'none';\n        if (inputFlag === cc.EditBox.InputFlag.INITIAL_CAPS_ALL_CHARACTERS) {\n            textTransform = 'uppercase';\n        }\n        else if (inputFlag === cc.EditBox.InputFlag.INITIAL_CAPS_WORD) {\n            textTransform = 'capitalize';\n        }\n        elem.style.textTransform = textTransform;\n    }\n\n    private _updateMaxLength() {\n        let maxLength = this._delegate.maxLength;\n        if (maxLength < 0) {\n            //we can't set Number.MAX_VALUE to input's maxLength property\n            //so we use a magic number here, it should works at most use cases.\n            maxLength = 65535;\n        }\n        (<any>this)._elem.maxLength = maxLength;\n    }\n\n    private _updateStyleSheet() {\n        let delegate = this._delegate,\n            elem = this._elem;\n        (<any>elem).value = delegate.string;\n        (<any>elem).placeholder = delegate.placeholder;\n    }\n\n\n    private _registerEventListeners() {\n        let impl = this,\n            elem = this._elem,\n            inputLock = false,\n            cbs = this._eventListeners;\n\n        cbs.compositionStart = function () {\n            inputLock = true;\n        };\n\n        cbs.compositionEnd = function () {\n            inputLock = false;\n            impl._delegate.editBoxTextChanged((<any>elem).value);\n        };\n\n        cbs.onInput = function () {\n            if (inputLock) {\n                return;\n            }\n\n            let _elem: any = elem;\n\n            if (_elem.value.length > _elem.maxLength) _elem.value = _elem.value.slice(0, _elem.maxLength);\n\n            impl._delegate.editBoxTextChanged((<any>elem).value);\n        };\n\n        cbs.onKeydown = function (e) {\n            if (e.keyCode === cc.macro.KEY.enter) {\n                e.stopPropagation();\n                impl._delegate.editBoxEditingReturn();\n\n                if (!impl._isTextArea) {\n                    elem.blur();\n                }\n            }\n            else if (e.keyCode === cc.macro.KEY.tab) {\n                e.stopPropagation();\n                e.preventDefault();\n            }\n        };\n\n        cbs.onBlur = function () {\n            impl._hideDom();\n            impl._isFocus = false;\n            Manager.adaptor.isShowKeyboard = false;\n            //删除注册事件\n            impl._removeEventListeners();\n            impl._delegate.editBoxEditingDidEnded();\n        };\n\n        elem.addEventListener('compositionstart', cbs.compositionStart);\n        elem.addEventListener('compositionend', cbs.compositionEnd);\n        elem.addEventListener('input', cbs.onInput);\n        elem.addEventListener('keydown', cbs.onKeydown);\n        elem.addEventListener('blur', cbs.onBlur);\n        elem.addEventListener('touchstart', cbs.onClick);\n    }\n\n    private _removeEventListeners() {\n        let elem = this._elem,\n            cbs = this._eventListeners;\n\n        let len = Object.keys(cbs).length;\n        if (len > 0) {\n            elem.removeEventListener('compositionstart', cbs.compositionStart);\n            elem.removeEventListener('compositionend', cbs.compositionEnd);\n            elem.removeEventListener('input', cbs.onInput);\n            elem.removeEventListener('keydown', cbs.onKeydown);\n            elem.removeEventListener('blur', cbs.onBlur);\n            elem.removeEventListener('touchstart', cbs.onClick);\n\n            cbs.compositionStart = null;\n            cbs.compositionEnd = null;\n            cbs.onInput = null;\n            cbs.onKeydown = null;\n            cbs.onBlur = null;\n            cbs.onClick = null;\n            this._eventListeners = {};\n        }\n    }\n\n}"]}