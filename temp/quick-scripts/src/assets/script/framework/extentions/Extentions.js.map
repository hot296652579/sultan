{"version":3,"sources":["assets/script/framework/extentions/Extentions.js"],"names":["window","base64Encrypt","obj","base64Encode","base64Decrypt","word","_CryptoJS","CryptoJS","parsedWordArray","enc","Base64","parse","parsedStr","toString","Utf8","md5","data","MD5","makeRemoteUrl","remoteUrl","path","fileName","parseRemoteUrl","url","replace","slice","lastIndexOf","fileDir","substr","length","md5path","CC_JSB","Date","prototype","format","date","getMonth","getDate","getHours","getMinutes","getSeconds","Math","floor","getMilliseconds","test","RegExp","$1","getFullYear","k","timeNow","timeNowMillisecons","now","getTime","String","param","i","l","arguments","push","statment","CC_EDITOR","cc","error","shift","Array","isArray","m","n","extentionsInit"],"mappings":"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","sourceRoot":"/","sourcesContent":["/**\n * @description 对cocos 进行扩展，本脚本以插件方式运行\n * \n * \n */\n\nwindow.base64Encrypt = function(obj) {\n    // let _CryptoJS = CryptoJS;\n    // let word = JSON.stringify(obj);\n    // let key = _CryptoJS.enc.Utf8.parse(\"btgame^&*!@#123Abc\");\n    // let srcs = _CryptoJS.enc.Utf8.parse(word);\n    // let encrypted = _CryptoJS.DES.encrypt(srcs, key, {  mode: _CryptoJS.mode.ECB, padding: _CryptoJS.pad.Pkcs7 });\n    // return encrypted.ciphertext.toString();\n    // let _CryptoJS = CryptoJS;\n    // let word = JSON.stringify(obj);\n    // let srcs = _CryptoJS.enc.Utf8.parse(obj);\n    // var base64 = _CryptoJS.enc.Base64.stringify(srcs);\n    return  window.base64Encode(obj);\n}\nwindow.base64Decrypt = function(word) {\n    // let _CryptoJS = CryptoJS;\n    // let key = _CryptoJS.enc.Utf8.parse(\"btgame^&*!@#123Abc\");\n    // let encryptedHexStr = _CryptoJS.enc.Hex.parse(word);\n    // let srcs = _CryptoJS.enc.Base64.stringify(encryptedHexStr);\n    // let decrypt = _CryptoJS.DES.decrypt(srcs, key, {  mode: _CryptoJS.mode.ECB, padding: _CryptoJS.pad.Pkcs7 });\n    // let decryptedStr = decrypt.toString(_CryptoJS.enc.Utf8);\n    // return decryptedStr.toString();\n    let _CryptoJS = CryptoJS;\n    var parsedWordArray = _CryptoJS.enc.Base64.parse(word);\n    var parsedStr = parsedWordArray.toString(CryptoJS.enc.Utf8);\n    return parsedStr.toString();\n}\nwindow.md5 = function md5(data) {\n    return this.CryptoJS.MD5(data);\n}\n\nwindow.makeRemoteUrl = function (remoteUrl) {\n    return `${remoteUrl.path}/${remoteUrl.fileName}`;\n}\n\nwindow.parseRemoteUrl = function (url) {\n    url = url.replace(/\\s*/g, \"\");\n\n    let data = { url: null, path: null, fileName: null };\n    data.url = url;\n    //摘取文件\n    let fileName = data.url.slice(data.url.lastIndexOf(\"/\") + 1);\n    let fileDir = data.url.substr(0, data.url.length - fileName.length - 1);\n    let md5path = fileDir;\n    if (CC_JSB) {\n        md5path = window.md5(fileDir).toString();\n        data.path = md5path;\n    } else {\n        data.path = fileDir;\n    }\n    data.fileName = fileName;\n    return data;\n}\n\nDate.prototype.format = function (format) {\n    var date = {\n        \"M+\": this.getMonth() + 1,\n        \"d+\": this.getDate(),\n        \"h+\": this.getHours(),\n        \"m+\": this.getMinutes(),\n        \"s+\": this.getSeconds(),\n        \"q+\": Math.floor((this.getMonth() + 3) / 3),\n        \"S+\": this.getMilliseconds()\n    };\n    if (/(y+)/i.test(format)) {\n        format = format.replace(RegExp.$1, (this.getFullYear() + '').substr(4 - RegExp.$1.length));\n    }\n    for (var k in date) {\n        if (new RegExp(\"(\" + k + \")\").test(format)) {\n            format = format.replace(RegExp.$1, RegExp.$1.length == 1 ?\n                date[k] : (\"00\" + date[k]).substr((\"\" + date[k]).length));\n        }\n    }\n    return format;\n};\n\n/**@description 返回当前时间的秒数 */\nDate.timeNow = function () {\n    return Math.floor(Date.timeNowMillisecons() / 1000);\n}\n/**@description 返回当前时间的毫秒数 */\nDate.timeNowMillisecons = function () {\n    let now = new Date();\n    return now.getTime();\n}\n\nString.format = function () {\n    var param = [];\n    for (var i = 0, l = arguments.length; i < l; i++) {\n        param.push(arguments[i]);\n    }\n    var statment = param[0]; // get the first element(the original statement)\n    if ( typeof statment != \"string\" ){\n        if ( !CC_EDITOR )\n            cc.error(`String.format error,first param is not a string`);\n        return \"\";\n    }\n    param.shift(); // remove the first element from array\n    if ( Array.isArray(param[0]) && param.length == 1 ){\n        param = param[0];\n    }\n    return statment.replace(/\\{(\\d+)\\}/g, function (m, n) {\n        return param[n];\n    });\n}\n\nexport function extentionsInit(){\n    //cc.log(`extentionsInit`);\n}\n\n\n\n"]}