{"version":3,"sources":["assets/script/turntable/AwardWinningView.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\nimport { LobbyService } from \"../common/net/LobbyService\";\nimport { BUNDLE_RESOURCES } from \"../framework/base/Defines\";\nimport { IController } from \"../framework/controller/Controller\";\nimport { injectService } from \"../framework/decorator/Decorators\";\nimport { com } from \"../framework/external/protoc\";\nimport { Manager } from \"../framework/Framework\";\nimport UIView from \"../framework/ui/UIView\";\nimport { User } from \"../global/User\";\nimport { shareType } from \"../platform/android\";\nimport AddressView from \"./AddressView\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\n@injectService(LobbyService.instance)\nexport default class AwardWinningView extends UIView implements IController<LobbyService> {\n\n    service: LobbyService;\n\n\n    @property(cc.Node)\n    btn_share: cc.Node = null;\n\n    @property(cc.Node)\n    btn_spinAgain: cc.Node = null;\n\n    @property(cc.Node)\n    btn_address: cc.Node = null;\n\n    @property(cc.Sprite)\n    spr_Prize: cc.Sprite = null;\n\n    @property(cc.Node)\n    winNode: cc.Node = null;\n\n    @property(cc.Node)\n    loseNode: cc.Node = null;\n\n    @property(cc.Label)\n    prizeName: cc.Label = null;\n\n    awardData: com.bt.game.proto.hall.IPlayTurntableRes = null;\n    prizeData: com.bt.game.proto.hall.IActivityTurntable = null;\n    \n    public static getPrefabUrl() {\n        return \"turntable/prefab/AwardWinningView\";\n    }\n    onLoad() {\n        super.onLoad();\n        this.content = this.node.getChildByName('content');\n\n    }\n\n    start() {\n        this.updateView();\n    }\n\n    show(args) {\n        super.show(args);\n        this.showWithAction(true);\n        if (args && args[0]) {\n            this.awardData = args[0];\n        }\n        if (args && args[1]) {\n            this.prizeData = args[1];\n        }\n    }\n\n\n    bindingEvents() {\n        super.bindingEvents();\n        this.registerEvent(\"UPDATE_PRIZE_RECORD\", this.changeBtnStuate);\n    }\n\n    onClick(name, node) {\n        switch (name) {\n            case \"mask\":\n            case \"close\": this.closeWithAction(); break;\n            case \"btn_share\": this.shareToFacebook(); break;\n            case \"btn_spinAgain\": this.closeWithAction(); break;\n            case \"btn_address\": Manager.uiManager.open({ type: AddressView, bundle: BUNDLE_RESOURCES, args: [this.awardData.id] }); break;\n            default: G.Logger.error(\"no find button name -> %s\", name);\n        }\n    }\n    private shareToFacebook() {\n        window['platformUtil'].shareToFacebook(shareType.PHOTO, User._promoteUrl, User._shareImgUrl);\n    }\n    updateView() {\n        if (this.awardData) {\n            this.btn_address.active = false;\n            this.btn_share.active = false;\n            this.btn_spinAgain.active = false;\n            switch (this.awardData.rewardType) {// 奖励类型 1=实物,2=筹码,3=未中奖\n                case 1:\n                    this.btn_address.active = true;\n                    this.btn_share.active = true;\n                    break;\n                case 2:\n                    this.btn_share.active = true;\n                    break;\n                case 4:\n                    this.btn_spinAgain.active = true;\n                    break;\n                default:\n                    break;\n            }\n            this.spr_Prize.loadRemoteImage({ url: this.prizeData.picUrl, view: this, defaultSpriteFrame: \"turntable/image/10\", bundle: BUNDLE_RESOURCES })\n            this.prizeName.string = this.prizeData.goodsName;\n            this.loseNode.active = this.awardData.rewardType == 3;\n            this.winNode.active = !this.loseNode.active;\n        }\n    }\n\n    changeBtnStuate() {\n        this.btn_address.active = false;\n    }\n\n    onDestroy() {\n        super.onDestroy();\n    }\n}\n"]}