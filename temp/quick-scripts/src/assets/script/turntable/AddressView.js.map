{"version":3,"sources":["assets/script/turntable/AddressView.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\nimport { i18n } from \"../common/language/LanguageImpl\";\nimport { serverType, protoPackage } from \"../common/net/CommonService\";\nimport { LobbyService } from \"../common/net/LobbyService\";\nimport { IController } from \"../framework/controller/Controller\";\nimport { injectService, makeKey } from \"../framework/decorator/Decorators\";\nimport UIView from \"../framework/ui/UIView\";\nimport { User } from \"../global/User\";\nimport PanelHelp from \"../msgbox/PanelHelp\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\n@injectService(LobbyService.instance)\nexport default class AddressView extends UIView implements IController<LobbyService> {\n\n    service: LobbyService;\n\n    @property(cc.EditBox)\n    nameEdit: cc.EditBox = null;\n\n    @property(cc.EditBox)\n    phoneEdit: cc.EditBox = null;\n\n    @property(cc.Label)\n    areaCode: cc.Label = null;\n\n    @property(cc.EditBox)\n    addressEdit: cc.EditBox = null;\n\n    private id: number;\n    public static getPrefabUrl() {\n        return \"turntable/prefab/AddressView\";\n    }\n    onLoad() {\n        super.onLoad();\n        this.content = this.node.getChildByName('content');\n\n    }\n\n    start() {\n\n    }\n\n    show(args) {\n        super.show(args);\n        this.showWithAction(true);\n        if (args && args[0]) {\n            this.id = args[0];\n        }\n    }\n\n\n    bindingEvents() {\n        super.bindingEvents();\n        this.registerEvent(makeKey(serverType.Lobby, protoPackage.hall.HallCmd.Turntable_Address), this.onNetTurntableAddressRes);\n    }\n\n    onClick(name, node) {\n        switch (name) {\n            case \"close\": this.closeWithAction(); break;\n            case \"btn_cancel\": this.closeWithAction(); break;\n            case \"btn_confirm\": this.reqTurntableAddress(); break;\n            default: G.Logger.error(\"no find button name -> %s\", name);\n        }\n    }\n\n    reqTurntableAddress() {\n        let name = this.nameEdit.string;\n        let phone = this.phoneEdit.string;\n        let address = this.addressEdit.string;\n        let areaCode = this.areaCode.string;\n        if (!name.length) {\n            PanelHelp.showTip(i18n.EDITBOX.NICKNAMENULL);\n            return;\n        }\n        if (!phone) {\n            PanelHelp.showTip(i18n.EDITBOX.PHONENULL);\n            return null;\n        }\n        if (phone.length < 7) {\n            PanelHelp.showTip(i18n.EDITBOX.PHONETYPEERR);\n            return null;\n        }\n\n        if (!address.length) {\n            PanelHelp.showTip(i18n.EDITBOX.ADDRESSNULL);\n            return;\n        }\n        if(!areaCode.length)  return;\n        \n\n        let options = {\n            id: this.id,// 唯一id\n            name: name,// 名字\n            phone: areaCode+phone,// 电话\n            address: address,// 地址\n        }\n        G.Logger.log(\"AddressOptions\",options);\n        let req = protoPackage.hall.TurntableAddressReq.create(options);\n        let buffer = protoPackage.hall.TurntableAddressReq.encode(req).finish();\n        this.service.sendMsg(serverType.Lobby,\n            protoPackage.hall.HallCmd.Turntable_Address,\n            buffer);\n    }\n\n    onNetTurntableAddressRes(data) {\n        if (data.statusMsg.status == 0) {\n            PanelHelp.showTip(i18n.TURN_TABLE.AddressSuccess);\n            dispatch(\"UPDATE_PRIZE_RECORD\");\n            this.closeWithAction();  \n        } else {\n            PanelHelp.showTip(i18n.ERRORCODE[data.statusMsg.status]);\n        }\n    }\n\n    onDestroy() {\n        super.onDestroy();\n    }\n}\n"]}