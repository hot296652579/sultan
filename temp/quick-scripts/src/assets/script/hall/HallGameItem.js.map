{"version":3,"sources":["assets/script/hall/HallGameItem.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA,+DAA4D;AAC5D,oEAA4C;AAC5C,kEAAuD;AACvD,wDAAiE;AACjE,uDAAqF;AACrF,oEAA4C;AAC5C,oDAAiD;AACjD,2CAAwC;AACxC,6DAA0D;AAC1D,kEAA2E;AAC3E,+DAAuE;AACvE,uDAAoD;AACpD,+CAA4C;AAC5C,6CAA+C;AAE/C,0DAAuD;AAEvD,MAAM,EAAE,OAAO,EAAE,QAAQ,EAAE,GAAG,EAAE,CAAC,UAAU,CAAC;AAI5C,IAAqB,YAAY,GAAjC,MAAqB,YAAa,SAAQ,gBAAM;IAAhD;;QAII,SAAI,GAAc,IAAI,CAAC;QAGvB,YAAO,GAAc,IAAI,CAAC;QAG1B,YAAO,GAAY,IAAI,CAAC;QAExB,eAAU,GAAY,IAAI,CAAC;QAE3B,YAAO,GAAY,IAAI,CAAC;QAExB,aAAQ,GAAY,IAAI,CAAC;QAGzB,cAAS,GAAgB,IAAI,CAAC;QAG9B,UAAK,GAAoB,IAAI,CAAC;QAE9B,YAAO,GAAG,CAAC,CAAC;QAEZ,YAAO,GAAG,CAAC,CAAA;QAEX,cAAS,GAAG,IAAI,CAAC;QAEjB,UAAK,GAAG,2BAA2B,CAAC;QACpC,YAAO,GAAG,2BAA2B,CAAC;QACtC,YAAO,GAAG,sCAAsC,CAAC;QAEjD,cAAS,GAAW,EAAE,CAAC;IAkM3B,CAAC;IAjMG,MAAM;QACF,KAAK,CAAC,MAAM,EAAE,CAAA;QACd,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC;aAClB,aAAa,CAAC,EAAE,CAAC,KAAK,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,CAAC;aAC3C,KAAK,CAAC,IAAI,CAAC,CAAC;aAChB,KAAK,EAAE,CAAA;QACZ,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,KAAK,CAAA;QAC3B,IAAI,CAAC,SAAS,GAAG,iBAAO,CAAC,QAAQ,CAAC,WAAW,EAAE,CAAC;IACpD,CAAC;IACD,aAAa;QACT,KAAK,CAAC,aAAa,EAAE,CAAC;QACtB,IAAI,CAAC,aAAa,CAAC,qBAAS,CAAC,iBAAiB,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;QACxE,IAAI,CAAC,aAAa,CAAC,oBAAO,CAAC,0BAAU,CAAC,KAAK,EAAE,4BAAY,CAAC,IAAI,CAAC,OAAO,CAAC,0BAA0B,CAAC,EAAE,IAAI,CAAC,qBAAqB,CAAC,CAAC;QAChI,IAAI,CAAC,aAAa,CAAC,wBAAwB,EAAE,IAAI,CAAC,sBAAsB,CAAC,CAAC;QAC1E,IAAI,CAAC,aAAa,CAAC,sBAAsB,EAAE,IAAI,CAAC,oBAAoB,CAAC,CAAC;QACtE,IAAI,gCAAsB,EAAE;YACxB,IAAI,CAAC,aAAa,CAAC,mBAAQ,CAAC,eAAe,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAC;SACvE;IACL,CAAC;IACO,sBAAsB,CAAC,QAAQ;QACnC,IAAI,IAAI,CAAC,SAAS,IAAI,QAAQ,IAAI,eAAM,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,IAAI,EAAE;YACxE,IAAI,IAAI,CAAC,OAAO;gBAAE,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,IAAI,CAAA;SAC/C;IACL,CAAC;IACO,oBAAoB,CAAC,QAAQ;QACjC,IAAI,IAAI,CAAC,SAAS,IAAI,QAAQ,IAAI,eAAM,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,IAAI,EAAE;YACxE,IAAI,IAAI,CAAC,OAAO;gBAAE,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,KAAK,CAAA;SAChD;IACL,CAAC;IACO,iBAAiB,CAAC,IAA8C;QACpE,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,uBAAuB,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;QACrD,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,MAAM,CAAC,QAAQ,IAAI,eAAM,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,IAAI,EAAE;YACpF,IAAI,WAAW,GAAmB,EAAE,CAAC,IAAI,CAAC,wBAAwB,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,WAAW,CAAC,CAAC;YAC5G,IAAI,aAAa,GAAa,EAAE,CAAC,IAAI,CAAC,iCAAiC,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;YAC3G,IAAI,IAAI,CAAC,QAAQ,IAAI,CAAC,CAAC,EAAE;gBACrB,WAAW,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;gBAChC,mBAAS,CAAC,OAAO,CAAC,mBAAI,CAAC,IAAI,CAAC,cAAc,CAAC,CAAA;aAC9C;iBAAM,IAAI,IAAI,CAAC,QAAQ,IAAI,CAAC,EAAE;gBAC3B,WAAW,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;gBAC/B,IAAI,IAAI,CAAC,QAAQ,GAAG,WAAW,CAAC,QAAQ,EAAE;oBACtC,WAAW,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;oBACrC,aAAa,CAAC,MAAM,GAAG,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC;iBACrE;aAEJ;iBAAM;gBACH,WAAW,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;gBAChC,IAAI,IAAI,CAAC,OAAO;oBAAE,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,KAAK,CAAA;gBAC7C,IAAI,IAAI,CAAC,UAAU;oBAAE,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,KAAK,CAAA;gBACnD,mBAAS,CAAC,OAAO,CAAC,mBAAI,CAAC,IAAI,CAAC,eAAe,CAAC,CAAA;aAC/C;SACJ;IACL,CAAC;IACD,gBAAgB,CAAC,QAAQ;QACrB,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC;QAC1B,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;IAClD,CAAC;IACD,UAAU,CAAC,IAAI,EAAE,MAAM;QACnB,EAAE,CAAC,GAAG,CAAC,IAAI,EAAE,cAAc,CAAC,CAAA;QAC5B,IAAI,CAAC,SAAS,GAAG,IAAI,CAAA;QACrB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAA;QAC5B,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;QACtB,IAAI,IAAI,CAAC,OAAO;YAAE,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,KAAK,CAAA;QAC7C,IAAI,IAAI,CAAC,UAAU;YAAE,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,KAAK,CAAA;QACnD,IAAI,MAAM,EAAE;YAER,IAAI,UAAU,GAAG,eAAM,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,CAAA;YAC1C,IAAI,UAAU,EAAE;gBACZ,IAAI,OAAO,GAAG,iBAAO,CAAC,gBAAgB,CAAC,UAAU,CAAC,OAAO,CAAC,CAAA;gBAC1D,IAAI,IAAI,CAAC,OAAO;oBAAE,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,OAAO,CAAA;gBAChD,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,aAAa,EAAE,OAAO,CAAC,CAAC;gBAErC,IAAI,OAAO,EAAE;oBACT,IAAI,OAAO,GAAG,iBAAO,CAAC,sBAAsB,CAAC,UAAU,CAAC,OAAO,CAAC,CAAA;oBAChE,IAAI,OAAO,EAAE;wBACT,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,aAAa,EAAE,OAAO,CAAC,CAAC;wBACrC,IAAI,IAAI,CAAC,SAAS,CAAC,eAAe,IAAI,IAAI,CAAC,SAAS,CAAC,eAAe,GAAG,OAAO,EAAE;4BAC5E,IAAI,IAAI,CAAC,UAAU;gCAAE,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,IAAI,CAAA;yBACrD;qBACJ;yBAAM;wBACH,IAAI,IAAI,CAAC,UAAU;4BAAE,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,IAAI,CAAA;qBACrD;iBACJ;aACJ;SACJ;QAED,IAAI,KAAK,GAAG,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAA;QAClD,IAAI,KAAK,EAAE;YACP,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAA;YAC7B,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAA;YACjC,IAAI,CAAC,SAAS,CAAC,YAAY,GAAG,KAAK,CAAA;YACnC,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC,EAAE,cAAc,EAAE,IAAI,CAAC,CAAA;YACpD,IAAI,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,QAAQ;YACjC,IAAI,IAAI,CAAC,SAAS,KAAK,EAAE,CAAC,GAAG,CAAC,gBAAgB;gBAAE,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC;YACpE,IAAI,IAAI,CAAC,SAAS,KAAK,EAAE,CAAC,GAAG,CAAC,cAAc;gBAAE,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC;YAClE,IAAI,QAAQ,GAAG,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC;YAClC,IAAI,IAAI,CAAC,MAAM,IAAI,MAAM;gBAAE,OAAO,CAAC,eAAe;YAClD,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,EAAE,GAAG,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,MAAM,EAAE,0BAAgB,EAAE,CAAC,CAAC;SACnF;aAAM;YACH,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAA;YAC5B,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAA;YAElC,IAAI,QAAQ,GAAG,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAA;YACvC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,GAAG,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,MAAM,EAAE,0BAAgB,EAAE,CAAC,CAAA;SAC/E;IACL,CAAC;IAED,oBAAoB,CAAC,MAAM;QACvB,QAAQ,MAAM,EAAE;YACZ,KAAK,eAAM,CAAC,MAAM,CAAC,KAAK;gBACpB,OAAO,IAAI,CAAC,KAAK,CAAC;YACtB;gBACI,OAAO,IAAI,CAAA;SAClB;IACL,CAAC;IAED,UAAU,CAAC,KAAK,EAAE,IAAI;QAClB,IAAI,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE;YACvB,mBAAS,CAAC,WAAW,CAAC,mBAAI,CAAC,OAAO,CAAC,SAAS,CAAC,CAAA;YAC7C,IAAI,OAAO,GAAG;gBACV,MAAM,EAAE,IAAI,CAAC,SAAS,CAAC,MAAM;aAChC,CAAA;YACD,IAAI,GAAG,GAAG,4BAAY,CAAC,IAAI,CAAC,sBAAsB,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;YACnE,IAAI,MAAM,GAAG,4BAAY,CAAC,IAAI,CAAC,sBAAsB,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC;YAC3E,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,0BAAU,CAAC,KAAK,EACjC,4BAAY,CAAC,IAAI,CAAC,OAAO,CAAC,0BAA0B,EACpD,MAAM,CAAC,CAAC;YACZ,oIAAoI;YACpI,mCAAmC;SACtC;aAAM;YACH,mBAAS,CAAC,OAAO,CAAC,mBAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAA;SACjD;QACD,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,oBAAoB,EAAE,0BAAgB,CAAC,CAAC;IACxE,CAAC;IAED,qBAAqB,CAAC,GAAG;QACrB,IAAI,IAAI,CAAC,SAAS,IAAI,GAAG,CAAC,MAAM,IAAI,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE;YACvD,IAAI,GAAG,CAAC,aAAa,EAAE;gBACnB,IAAI,QAAQ,GAAG,eAAM,CAAC,KAAK,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC,OAAO,CAAA;gBACtD,mBAAS,CAAC,UAAU,CAAC,EAAE,EAAE,MAAM,CAAC,MAAM,CAAC,mBAAI,CAAC,IAAI,CAAC,aAAa,EAAE,QAAQ,CAAC,CAAC,CAAA;aAC7E;iBAAM;gBACH,IAAI,OAAO,GAAG,iBAAO,CAAC,sBAAsB,CAAC,eAAM,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,CAAA;gBACzF,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,UAAU,EAAE,OAAO,CAAC,CAAA;gBACjC,IAAI,OAAO,EAAE,EAAC,OAAO;oBACjB,IAAI,IAAI,CAAC,SAAS,CAAC,eAAe,IAAI,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,eAAe,CAAC,GAAG,QAAQ,CAAC,OAAO,CAAC,EAAE,EAAC,MAAM;wBACvG,IAAI,WAAW,GAAG,qBAAS,CAAC,aAAa,CAAC,eAAM,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,CAAC;wBACvF,IAAI,WAAW,IAAI,WAAW,CAAC,QAAQ,EAAE,EAAC,OAAO;4BAC7C,mBAAS,CAAC,UAAU,CAAC,EAAE,EAAE,mBAAI,CAAC,IAAI,CAAC,cAAc,EAAE,GAAG,EAAE;gCACpD,oBAAW,EAAE,CAAA;4BACjB,CAAC,EAAE,GAAG,EAAE;gCACJ,IAAI,CAAC,SAAS,EAAE,CAAA;4BACpB,CAAC,CAAC,CAAA;yBACL;6BAAM;4BACH,IAAI,CAAC,SAAS,EAAE,CAAA;yBACnB;qBACJ;yBAAM,EAAC,KAAK;wBACT,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC,CAAA;wBACpB,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAA,CAAA,MAAM;qBAE7B;iBACJ;qBAAM;oBACH,IAAI,CAAC,SAAS,EAAE,CAAA;iBACnB;aACJ;SACJ;IACL,CAAC;IACD;;;OAGG;IACK,SAAS,CAAC,QAAS;QACvB,2CAA2C;QAC3C,IAAI,MAAM,GAAG,IAAI,sBAAU,CAAC,eAAM,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,IAAI,EAAE,eAAM,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;QACjI,IAAI,QAAQ,EAAE;YACV,yBAAW,EAAE,CAAC,iBAAiB,CAAC,MAAM,CAAC,CAAC;SAC3C;aAAM;YACH,yBAAW,EAAE,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;SACnC;IAEL,CAAC;IAED;;OAEG;IACH,iBAAiB;QACb,IAAI,CAAC,IAAI,CAAC,OAAO,GAAG,GAAG,CAAC;IAC5B,CAAC;IAED;;OAEG;IACH,gBAAgB;QACZ,IAAI,CAAC,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC;IAC1B,CAAC;CACJ,CAAA;AAhOG;IADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;0CACG;AAGvB;IADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;6CACM;AAG1B;IADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;6CACM;AAExB;IADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;gDACS;AAE3B;IADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;6CACM;AAExB;IADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;8CACO;AAGzB;IADC,QAAQ,CAAC,EAAE,CAAC,QAAQ,CAAC;+CACQ;AAG9B;IADC,QAAQ,CAAC,EAAE,CAAC,YAAY,CAAC;2CACI;AAtBb,YAAY;IAFhC,OAAO;IACP,0BAAa,CAAC,2BAAY,CAAC,QAAQ,CAAC;GAChB,YAAY,CAoOhC;kBApOoB,YAAY","file":"","sourceRoot":"/","sourcesContent":["import { gameManager } from \"../common/manager/GameManager\";\nimport PanelHelp from \"../msgbox/PanelHelp\";\nimport { i18n } from \"../common/language/LanguageImpl\";\nimport { GameConfig, HotUpdate } from \"../common/base/HotUpdate\";\nimport { BUNDLE_RESOURCES, ENABLE_CHANGE_LANGUAGE } from \"../framework/base/Defines\";\nimport UIView from \"../framework/ui/UIView\";\nimport { Config } from \"../common/config/Config\";\nimport { HallEvent } from \"./HallEvent\";\nimport { LobbyService } from \"../common/net/LobbyService\";\nimport { injectService, makeKey } from \"../framework/decorator/Decorators\";\nimport { protoPackage, serverType } from \"../common/net/CommonService\";\nimport { Manager } from \"../common/manager/Manager\";\nimport { UtilMgr } from \"../global/UtilMgr\";\nimport { reStartGame } from \"../global/Global\";\nimport { LogicEvent } from \"../common/event/LogicEvent\";\nimport { EventApi } from \"../framework/event/EventApi\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\n@injectService(LobbyService.instance)\nexport default class HallGameItem extends UIView {\n    service: LobbyService;\n\n    @property(cc.Sprite)\n    icon: cc.Sprite = null;\n\n    @property(cc.Sprite)\n    picName: cc.Sprite = null;\n\n    @property(cc.Node)\n    install: cc.Node = null;\n    @property(cc.Node)\n    newVersion: cc.Node = null;\n    @property(cc.Node)\n    loading: cc.Node = null;\n    @property(cc.Node)\n    iconWait: cc.Node = null;\n\n    @property(sp.Skeleton)\n    gameSpine: sp.Skeleton = null;\n\n    @property(sp.SkeletonData)\n    crash: sp.SkeletonData = null;\n\n    _itemId = 0;\n\n    _sortId = 0\n\n    _gameInfo = null;\n\n    _path = \"hall/images/dt_game_icon_\";\n    _pathEN = \"hall/images/dt_game_name_\";\n    _pathHI = \"languageRes/hindi/hall/dt_game_name_\";\n\n    _language: string = '';\n    onLoad() {\n        super.onLoad()\n        cc.tween(this.iconWait)\n            .repeatForever(cc.tween().by(0.3, { angle: 30 })\n                .delay(0.01))\n            .start()\n        this.loading.active = false\n        this._language = Manager.language.getLanguage();\n    }\n    bindingEvents() {\n        super.bindingEvents();\n        this.registerEvent(HallEvent.DOWNLOAD_PROGRESS, this.onDownloadProgess);\n        this.registerEvent(makeKey(serverType.Lobby, protoPackage.hall.HallCmd.CMD_CheckPlayerJoinGameReq), this.onCheckPlayerJoinGame);\n        this.registerEvent(\"onCheckUpdateGameStart\", this.onCheckUpdateGameStart);\n        this.registerEvent(\"onCheckUpdateGameEnd\", this.onCheckUpdateGameEnd);\n        if (ENABLE_CHANGE_LANGUAGE) {\n            this.registerEvent(EventApi.CHANGE_LANGUAGE, this.onLanguageChange);\n        }\n    }\n    private onCheckUpdateGameStart(gameName) {\n        if (this._gameInfo && gameName == Config.games[this._gameInfo.gameId].name) {\n            if (this.loading) this.loading.active = true\n        }\n    }\n    private onCheckUpdateGameEnd(gameName) {\n        if (this._gameInfo && gameName == Config.games[this._gameInfo.gameId].name) {\n            if (this.loading) this.loading.active = false\n        }\n    }\n    private onDownloadProgess(data: { progress: number, config: GameConfig }) {\n        G.Logger.log(\"onDownloadProgess == \", data.progress);\n        if (this._gameInfo && data.config.gameName == Config.games[this._gameInfo.gameId].name) {\n            let progressBar: cc.ProgressBar = cc.find(`Background/progressBar`, this.node).getComponent(cc.ProgressBar);\n            let progressLabel: cc.Label = cc.find(`Background/progressBar/progress`, this.node).getComponent(cc.Label);\n            if (data.progress == -1) {\n                progressBar.node.active = false;\n                PanelHelp.showTip(i18n.TIPS.DOWNLOADFAILED)\n            } else if (data.progress <= 1) {\n                progressBar.node.active = true;\n                if (data.progress > progressBar.progress) {\n                    progressBar.progress = data.progress;\n                    progressLabel.string = \"\" + Math.floor(data.progress * 100) + \"%\";\n                }\n\n            } else {\n                progressBar.node.active = false;\n                if (this.install) this.install.active = false\n                if (this.newVersion) this.newVersion.active = false\n                PanelHelp.showTip(i18n.TIPS.DOWNLOADSUCCEED)\n            }\n        }\n    }\n    onLanguageChange(language) {\n        this._language = language;\n        this.updateItem(this._gameInfo, this._itemId);\n    }\n    updateItem(data, itemId) {\n        cc.log(data, \"HallGameItem\")\n        this._gameInfo = data\n        this._sortId = data.showSort\n        this._itemId = itemId;\n        if (this.install) this.install.active = false\n        if (this.newVersion) this.newVersion.active = false\n        if (CC_JSB) {\n\n            let gameConfig = Config.games[data.gameId]\n            if (gameConfig) {\n                let install = UtilMgr.checkGameInstall(gameConfig.subName)\n                if (this.install) this.install.active = !install\n                G.Logger.log(\"==install==\", install);\n\n                if (install) {\n                    let version = UtilMgr.getGameManifestVersion(gameConfig.subName)\n                    if (version) {\n                        G.Logger.log(\"==version==\", version);\n                        if (this._gameInfo.gameVersionCode && this._gameInfo.gameVersionCode > version) {\n                            if (this.newVersion) this.newVersion.active = true\n                        }\n                    } else {\n                        if (this.newVersion) this.newVersion.active = true\n                    }\n                }\n            }\n        }\n\n        let spine = this.getGameSpineByGameID(data.gameId)\n        if (spine) {\n            this.icon.node.active = false\n            this.gameSpine.node.active = true\n            this.gameSpine.skeletonData = spine\n            this.gameSpine.setAnimation(0, \"newAnimation\", true)\n            let path = this._pathEN; // 汉语要报错\n            if (this._language === cc.sys.LANGUAGE_ENGLISH) path = this._pathEN;\n            if (this._language === cc.sys.LANGUAGE_HINDI) path = this._pathHI;\n            let namePath = path + data.gameId;\n            if (data.gameId == 900018) return; //暂时 斗鸡没有图片 先屏蔽\n            this.picName.loadImage({ url: namePath, view: this, bundle: BUNDLE_RESOURCES });\n        } else {\n            this.icon.node.active = true\n            this.gameSpine.node.active = false\n\n            let iconPath = this._path + data.gameId\n            this.icon.loadImage({ url: iconPath, view: this, bundle: BUNDLE_RESOURCES })\n        }\n    }\n\n    getGameSpineByGameID(gameId) {\n        switch (gameId) {\n            case Config.GameId.Crash:\n                return this.crash;\n            default:\n                return null\n        }\n    }\n\n    onBtnClick(event, type) {\n        if (this._gameInfo.isOpen) {\n            PanelHelp.showLoading(i18n.Waiting.EnterGame)\n            let options = {\n                gameId: this._gameInfo.gameId\n            }\n            let req = protoPackage.hall.CheckPlayerJoinGameReq.create(options);\n            let buffer = protoPackage.hall.CheckPlayerJoinGameReq.encode(req).finish();\n            this.service.sendMsg(serverType.Lobby,\n                protoPackage.hall.HallCmd.CMD_CheckPlayerJoinGameReq,\n                buffer);\n            // let config = new GameConfig(Config.games[this._gameInfo.gameId].name, Config.games[this._gameInfo.gameId].subName, this._itemId);\n            // gameManager().enterGame(config);\n        } else {\n            PanelHelp.showTip(i18n.TIPS.NOTOPENPLEASEWAIT)\n        }\n        this.audioHelper.playEffect(\"common/audio/click\", BUNDLE_RESOURCES);\n    }\n\n    onCheckPlayerJoinGame(msg) {\n        if (this._gameInfo && msg.gameId == this._gameInfo.gameId) {\n            if (msg.currentGameId) {\n                let gameName = Config.games[msg.currentGameId].disName\n                PanelHelp.showMsgBox('', String.format(i18n.TIPS.CHECKJOINGAME, gameName))\n            } else {\n                let version = UtilMgr.getGameManifestVersion(Config.games[this._gameInfo.gameId].subName)\n                G.Logger.log(\"JoinGame\", version)\n                if (version) {//游戏已包含\n                    if (this._gameInfo.gameVersionCode && parseInt(this._gameInfo.gameVersionCode) > parseInt(version)) {//有新版本\n                        let versionInfo = HotUpdate.allGameConfig[Config.games[this._gameInfo.gameId].subName];\n                        if (versionInfo && versionInfo.isLoaded) {//游戏加载过\n                            PanelHelp.showDialog(\"\", i18n.TIPS.GAMENEWVERSION, () => {\n                                reStartGame()\n                            }, () => {\n                                this.enterGame()\n                            })\n                        } else {\n                            this.enterGame()\n                        }\n                    } else {//不更新\n                        G.Logger.log(\"跳过更新\")\n                        this.enterGame(true)//跳过更新\n\n                    }\n                } else {\n                    this.enterGame()\n                }\n            }\n        }\n    }\n    /**\n     * \n     * @param noUpdate 是否跳过更新\n     */\n    private enterGame(noUpdate?) {\n        // PanelHelp.showLoading(i18n.WAIT.LOADING)\n        let config = new GameConfig(Config.games[this._gameInfo.gameId].name, Config.games[this._gameInfo.gameId].subName, this._itemId);\n        if (noUpdate) {\n            gameManager().enterGameNoUpdate(config);\n        } else {\n            gameManager().enterGame(config);\n        }\n\n    }\n\n    /**\n     * 本Item进入ScrollView的时候回调\n     */\n    onEnterSrcollView() {\n        this.node.opacity = 255;\n    }\n\n    /**\n     * 本Item离开ScrollView的时候回调\n     */\n    onExitScrollView() {\n        this.node.opacity = 0;\n    }\n}\n"]}