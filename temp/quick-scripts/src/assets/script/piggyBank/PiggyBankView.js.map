{"version":3,"sources":["assets/script/piggyBank/PiggyBankView.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { Manager } from \"../common/manager/Manager\";\nimport { LobbyService } from \"../common/net/LobbyService\";\nimport { BUNDLE_RESOURCES } from \"../framework/base/Defines\";\nimport { injectService } from \"../framework/decorator/Decorators\";\nimport UIView from \"../framework/ui/UIView\";\nimport { UtilMgr } from \"../global/UtilMgr\";\nimport PBChangePasswdView from \"./PBChangePasswdView\";\nimport PBDepositReceiptView from \"./PBDepositReceiptView\";\nimport PBHelpView from \"./PBHelpView\";\nimport PBTransferInView from \"./PBTransferInView\";\nimport PiggyBankData from \"./PiggyBankData\";\nimport { i18n } from \"../common/language/LanguageImpl\";\nimport { User } from \"../global/User\";\nimport PanelHelp from \"../msgbox/PanelHelp\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\n@injectService(LobbyService.instance)\nexport default class PiggyBankView extends UIView {\n\n    @property(cc.Label)\n    private labDepositAmountValue: cc.Label = null;\n\n    @property(cc.Label)\n    private labTotalRevenueValue: cc.Label = null;\n\n    @property(cc.Label)\n    private labRateValue: cc.Label = null;\n\n    @property(cc.Label)\n    private labConfirmedAmountValue: cc.Label = null;\n\n    @property(cc.Label)\n    private labAyerIncomeValue: cc.Label = null;\n\n    @property(cc.Node)\n    imgGridding: cc.Node = null;\n\n    private m_data: any = null;\n\n    public static getPrefabUrl() {\n        return \"piggyBank/prefabs/PiggyBankView\";\n    }\n\n    onLoad() {\n        super.onLoad();\n        this.content = this.node.getChildByName('imgBg');\n    }\n\n    start() {\n        if (this.imgGridding) {\n            let labTotalRevenue = cc.find('labTotalRevenue', this.imgGridding)\n            labTotalRevenue.getComponent(cc.Label).language = i18n.PIGGY_BANK.TOTAL_INCOME;\n\n            let labRate = cc.find('labRate', this.imgGridding)\n            labRate.getComponent(cc.Label).language = i18n.PIGGY_BANK.RATE;\n\n            let labConfirmedAmount = cc.find('labConfirmedAmount', this.imgGridding)\n            labConfirmedAmount.getComponent(cc.Label).language = i18n.PIGGY_BANK.COMFIRMED_AMOUNT;\n\n            let labAyerIncome = cc.find('labAyerIncome', this.imgGridding)\n            labAyerIncome.getComponent(cc.Label).language = i18n.PIGGY_BANK.YESTERDAY_INCOME;\n        }\n    }\n\n    bindingEvents() {\n        super.bindingEvents();\n\n        this.registerEvent(\"CMD_UPDATE_PIGGY_BANK_DATA\", this.onUpdatePiggyBank);\n    }\n\n    show(data): void {\n        super.show(data);\n        this.showWithAction(true);\n        PiggyBankData.getInstance().data = data;\n\n        this.m_data = data;\n        this.updateView();\n    }\n\n    onUpdatePiggyBank(): void {\n        this.m_data = PiggyBankData.getInstance().data;\n        this.updateView();\n    }\n\n    updateView(): void {\n        this.labDepositAmountValue.string = UtilMgr.changeMoney(this.m_data.amount);\n        this.labTotalRevenueValue.string = UtilMgr.changeMoney(this.m_data.income);\n        this.labRateValue.string = `${this.m_data.rate / 100}%`;\n        this.labConfirmedAmountValue.string = UtilMgr.changeMoney(this.m_data.confirmAmount);\n        this.labAyerIncomeValue.string = UtilMgr.changeMoney(this.m_data.ayerIncome);\n    }\n\n    onClickClose(): void {\n        this.playDefaultEffect(\"close\");\n        this.closeWithAction();\n    }\n\n    onClickHelp(): void {\n        this.playDefaultEffect();\n        Manager.uiManager.open({ type: PBHelpView, bundle: BUNDLE_RESOURCES });\n    }\n\n    onClickTransferIn(): void {\n        this.playDefaultEffect();\n        if (!User.isRechargedPlayer) return PanelHelp.showTip(i18n.EXPERIENCE_FIELD.hintRecharge)\n        Manager.uiManager.open({ type: PBTransferInView, bundle: BUNDLE_RESOURCES });\n    }\n\n    onClickChangePasswd(): void {\n        this.playDefaultEffect();\n        Manager.uiManager.open({ type: PBChangePasswdView, bundle: BUNDLE_RESOURCES });\n    }\n\n    onClickDepositReceipt(): void {\n        this.playDefaultEffect();\n        Manager.uiManager.open({ type: PBDepositReceiptView, bundle: BUNDLE_RESOURCES });\n    }\n\n    // update (dt) {}\n}\n"]}