{"version":3,"sources":["assets/script/piggyBank/PBDepositReceiptItemNode.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { Manager } from \"../common/manager/Manager\";\nimport { protoPackage, serverType } from \"../common/net/CommonService\";\nimport { LobbyService } from \"../common/net/LobbyService\";\nimport { BUNDLE_RESOURCES } from \"../framework/base/Defines\";\nimport { injectService } from \"../framework/decorator/Decorators\";\nimport DateUtils from \"../framework/extentions/DateUtils\";\nimport { com } from \"../framework/external/protoc\";\nimport UIView from \"../framework/ui/UIView\";\nimport { UtilMgr } from \"../global/UtilMgr\";\nimport PBExtractPasswdView from \"./PBExtractPasswdView\";\nimport { i18n } from \"../common/language/LanguageImpl\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\n@injectService(LobbyService.instance)\nexport default class DepositReceiptItemNode extends UIView {\n    service: LobbyService;\n\n    @property(cc.Label)\n    labTime: cc.Label = null;\n\n    @property(cc.Label)\n    labOperationAmount: cc.Label = null;\n\n    @property(cc.Label)\n    labInterestRate: cc.Label = null;\n\n    @property(cc.Label)\n    labExpectedReturn: cc.Label = null;\n\n    @property(cc.Label)\n    labTimeLeft: cc.Label = null;\n\n    @property(cc.Label)\n    labTransferredOut: cc.Label = null;\n\n    @property(cc.Label)\n    labCancelled: cc.Label = null;\n\n    @property(cc.Button)\n    btnTransferOut: cc.Button = null;\n\n    @property(cc.Button)\n    btnCancel: cc.Button = null;\n\n    private m_data: com.bt.game.proto.hall.IIncomeBreakdownInfo = null;\n\n\n    onLoad() {\n        super.onLoad();\n        this.initView();\n        this.updateView();\n    }\n\n    start() {\n        this.labCancelled.language = i18n.PIGGY_BANK.CANCELED;\n        this.labTransferredOut.language = i18n.PIGGY_BANK.TRANSFERREDOUT;\n    }\n\n    public get data(): com.bt.game.proto.hall.IIncomeBreakdownInfo {\n        return this.m_data;\n    }\n\n    public setData(data: com.bt.game.proto.hall.IIncomeBreakdownInfo): void {\n        this.m_data = data;\n    }\n\n    public setStatus(status: com.bt.game.proto.hall.IncomeBreakdownStatus): void {\n        this.m_data.status = status;\n        this.initStatus();\n        this.updateStatus(status);\n    }\n\n    private initView(): void {\n        this.labTime.string = \"\";\n        this.labOperationAmount.string = \"\";\n        this.labInterestRate.string = \"\";\n        this.labExpectedReturn.string = \"\";\n        this.labTimeLeft.string = \"\";\n        this.initStatus();\n    }\n\n    private initStatus(): void {\n        this.labTransferredOut.node.active = false;\n        this.labCancelled.node.active = false;\n        this.btnTransferOut.node.active = false;\n        this.btnCancel.node.active = false;\n    }\n\n    private updateView(): void {\n        this.labTime.string = DateUtils.getMDHM(this.m_data.timestamp);\n        this.labOperationAmount.string = UtilMgr.changeMoney(Number(this.m_data.amount));\n        this.labInterestRate.string = `${this.m_data.rate / 100}%`;\n        this.labExpectedReturn.string = UtilMgr.changeMoney(this.m_data.expectedIncome);\n        this.labTimeLeft.string = DateUtils.getRemainTimeDH((new Date()).getTime(), Number(this.m_data.incomeDeadline));\n        this.updateStatus(this.m_data.status);\n    }\n\n    private updateStatus(status: com.bt.game.proto.hall.IncomeBreakdownStatus): void {\n        switch (status) {\n            case com.bt.game.proto.hall.IncomeBreakdownStatus.CANCELABLE:\n                this.btnCancel.node.active = true;\n                break;\n            case com.bt.game.proto.hall.IncomeBreakdownStatus.CANCELED:\n                this.labCancelled.node.active = true;\n                break;\n            case com.bt.game.proto.hall.IncomeBreakdownStatus.EXTRACTABLE:\n                this.btnTransferOut.node.active = true;\n                break;\n            case com.bt.game.proto.hall.IncomeBreakdownStatus.EXTRACED:\n                this.labTransferredOut.node.active = true;\n                break;\n        }\n    }\n\n    onClick(name: string) {\n        switch (name) {\n            case \"btnCancel\":\n                this.onClickCancel();\n                break;\n            case \"btnTransferOut\":\n                this.onClickExtract();\n                break;\n        }\n    }\n\n    onClickCancel(): void {\n        this.playDefaultEffect();\n        let req = protoPackage.hall.CancelStoredAmountReq.create({ id: this.m_data.id });\n        let buffer = protoPackage.hall.CancelStoredAmountReq.encode(req).finish();\n        this.service.sendMsg(serverType.Lobby,\n            protoPackage.hall.HallCmd.CMD_CANCEL_STORED_AMOUNT,\n            buffer);\n    }\n\n    onClickExtract(): void {\n        this.playDefaultEffect();\n\n        let req = protoPackage.hall.ExtractAmountReq.create({ id: this.m_data.id, passwd: \"\" });\n        let buffer = protoPackage.hall.ExtractAmountReq.encode(req).finish();\n        this.service.sendMsg(serverType.Lobby,\n            protoPackage.hall.HallCmd.CMD_EXTRACT_AMOUNT,\n            buffer);\n\n        // Manager.uiManager.open({ type: PBExtractPasswdView, bundle: BUNDLE_RESOURCES, args: [this.m_data] });\n    }\n\n}\n"]}