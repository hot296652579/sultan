{"version":3,"sources":["assets/script/piggyBank/PBDepositReceiptView.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { i18n } from \"../common/language/LanguageImpl\";\nimport { Manager } from \"../common/manager/Manager\";\nimport { protoPackage, serverType } from \"../common/net/CommonService\";\nimport { LobbyService } from \"../common/net/LobbyService\";\nimport { injectService, makeKey } from \"../framework/decorator/Decorators\";\nimport { com } from \"../framework/external/protoc\";\nimport UIView from \"../framework/ui/UIView\";\nimport PanelHelp from \"../msgbox/PanelHelp\";\nimport PBDepositReceiptItemNode from \"./PBDepositReceiptItemNode\";\nimport PiggyBankData from \"./PiggyBankData\";\n\nconst { ccclass, property } = cc._decorator;\n\n// 默认每页请求行数\nconst DEFAULT_ROW: number = 30;\n// 行间隔高度\nconst INTERVAL_ROW_HEIGHT: number = 10;\n\n\n@ccclass\n@injectService(LobbyService.instance)\nexport default class PBDepositReceiptView extends UIView {\n    service: LobbyService;\n\n    @property(cc.ScrollView)\n    private scvList: cc.ScrollView = null;\n\n    @property(cc.Sprite)\n    private imgNoData: cc.Sprite = null;\n\n    @property(cc.Prefab)\n    private pfbPBDepositReceiptItemNode: cc.Prefab = null;\n\n    @property(cc.Node)\n    private imgBase: cc.Node = null;\n    \n    // 当前页\n    private m_currPage: number = 1;\n    // 总页\n    private m_totalPage: number = 0;\n    // 数据\n    private m_data: com.bt.game.proto.hall.IIncomeBreakdownInfo[] = [];\n    // 标记是否拼接完数据\n    private m_mapTagList: Map<number, boolean> = new Map();\n    // 是否分帧加载完成\n    private m_isFrameLoadDone: boolean = false;\n    // 单项宽高\n    private m_itemSize: cc.Size = null;\n    // 保存每条操作的脚本\n    private m_mapOperateSrc: Map<string, PBDepositReceiptItemNode> = new Map();\n\n    public static getPrefabUrl() {\n        return \"piggyBank/prefabs/PBDepositReceiptView\";\n    }\n\n    onLoad() {\n        super.onLoad();\n        this.content = this.node.getChildByName('imgBg');\n        this.initView();\n    }\n\n    start() {\n        if(this.imgBase){\n            let labTime = this.imgBase.getChildByName('labTime');\n            labTime.getComponent(cc.Label).language = i18n.PIGGY_BANK.TIME;\n\n            let labOperationAmount,labInterestRate,labExpectedReturn,labTimeLeft,labOperate;\n            labOperationAmount = this.imgBase.getChildByName('labOperationAmount');\n            labOperationAmount.getComponent(cc.Label).language = i18n.PIGGY_BANK.OPERATION_AMOUNT;\n\n            labInterestRate = this.imgBase.getChildByName('labInterestRate');\n            labInterestRate.getComponent(cc.Label).language = i18n.PIGGY_BANK.INTERESRATE;\n\n            labExpectedReturn = this.imgBase.getChildByName('labExpectedReturn');\n            labExpectedReturn.getComponent(cc.Label).language = i18n.PIGGY_BANK.EXPECTEDRETURN;\n\n            labTimeLeft = this.imgBase.getChildByName('labTimeLeft');\n            labTimeLeft.getComponent(cc.Label).language = i18n.PIGGY_BANK.TIMELEFT;\n\n            labOperate = this.imgBase.getChildByName('labOperate');\n            labOperate.getComponent(cc.Label).language = i18n.PIGGY_BANK.OPERATE;\n\n        }\n    }\n\n    bindingEvents() {\n        this.scvList.node.on(\"scroll-to-bottom\", this.onScrollToBottom, this);\n\n        this.registerEvent(makeKey(serverType.Lobby, protoPackage.hall.HallCmd.CMD_INCOME_BREAKDOWN), this.onIncomeBreakdown);\n        this.registerEvent(makeKey(serverType.Lobby, protoPackage.hall.HallCmd.CMD_EXTRACT_AMOUNT), this.onExtractAmount);\n        this.registerEvent(makeKey(serverType.Lobby, protoPackage.hall.HallCmd.CMD_CANCEL_STORED_AMOUNT), this.onCancelStoredAmount);\n    }\n\n    show(): void {\n        super.show();\n        this.showWithAction(true);\n        this.reqPageData();\n    }\n\n    private initView(): void {\n        this.imgNoData.node.active = false;\n        let itemNode: cc.Node = cc.instantiate(this.pfbPBDepositReceiptItemNode);\n        this.m_itemSize = itemNode.getContentSize();\n    }\n\n    private reqPageData(): void {\n        let req = protoPackage.hall.IncomeBreakdownReq.create({ curPage: this.m_currPage, pageCount: DEFAULT_ROW });\n        let buffer = protoPackage.hall.IncomeBreakdownReq.encode(req).finish();\n        this.service.sendMsg(serverType.Lobby,\n            protoPackage.hall.HallCmd.CMD_INCOME_BREAKDOWN,\n            buffer);\n    }\n\n    private onScrollToBottom(): void {\n        if (!this.m_isFrameLoadDone) {\n            G.Logger.log(\"未加载完成 item 资源，无法获取最新数据\");\n            return;\n        }\n\n        if (this.m_currPage >= this.m_totalPage) {\n            G.Logger.log(\"资源已加载完成，无法继续获取数据\");\n            return;\n        }\n\n        ++this.m_currPage;\n        this.reqPageData();\n    }\n\n    private onIncomeBreakdown(data: com.bt.game.proto.hall.IncomeBreakdownRes): void {\n        if (data.statusMsg.status !== 0) {\n            PanelHelp.showTip(Manager.makeLanguage(\"ERRORCODE.\" + data.statusMsg.status));\n            return;\n        }\n\n        if (data.count <= 0) {\n            this.imgNoData.node.active = true;\n            return;\n        }\n\n        let isTag: boolean | undefined = this.m_mapTagList.get(data.page);\n\n        if (isTag) {\n            return;\n        }\n\n        this.setContentSize(this.m_data.length + data.info.length);\n\n        this.pushRenderItem(data.info);\n\n        this.m_currPage = data.page;\n        this.m_totalPage = data.count;\n\n        this.m_mapTagList.set(data.page, true);\n    }\n\n    private pushRenderItem(itemList: com.bt.game.proto.hall.IIncomeBreakdownInfo[]): void {\n        this.m_isFrameLoadDone = false;\n\n        let count: number = 0;\n        for (let i: number = 0; i < itemList.length; ++i) {\n            setTimeout(() => {\n                this.appendItem(itemList[i]);\n                if (++count >= itemList.length) {\n                    this.m_isFrameLoadDone = true;\n                }\n            }, i * 16.67);\n        }\n    }\n\n    private appendItem(itemData: com.bt.game.proto.hall.IIncomeBreakdownInfo): void {\n        let itemNode: cc.Node = cc.instantiate(this.pfbPBDepositReceiptItemNode);\n        let itemSrc: PBDepositReceiptItemNode = itemNode.getComponent(PBDepositReceiptItemNode);\n        itemSrc.setData(itemData);\n\n        itemNode.x = 0;\n        itemNode.y = 0 - (itemNode.height * 0.5) - (this.m_data.length * itemNode.height) - (this.m_data.length * INTERVAL_ROW_HEIGHT);\n\n        this.scvList.content.addChild(itemNode);\n\n        this.m_data.push(itemData);\n        this.m_mapOperateSrc.set(itemData.id, itemSrc);\n    }\n\n    private setContentSize(count: number): void {\n        let contentHeight: number = (count * this.m_itemSize.height) + ((count - 1) * INTERVAL_ROW_HEIGHT);\n        if (contentHeight < this.scvList.content.parent.height) {\n            contentHeight = this.scvList.content.parent.height;\n        }\n        this.scvList.content.height = contentHeight;\n    }\n\n\n    private onExtractAmount(data: com.bt.game.proto.hall.ExtractAmountRes): void {\n        if (data.statusMsg.status !== 0) {\n            PanelHelp.showTip(Manager.makeLanguage(\"ERRORCODE.\" + data.statusMsg.status));\n            return;\n        }\n\n        let itemSrc: PBDepositReceiptItemNode | undefined = this.m_mapOperateSrc.get(data.id);\n        if (!itemSrc) {\n            return;\n        }\n\n        let extractAmount: number = Number(itemSrc.data.amount);\n        let expectedIncomeAmount: number = itemSrc.data.expectedIncome;\n\n        PiggyBankData.getInstance().data.amount = Number(PiggyBankData.getInstance().data.amount) - extractAmount - expectedIncomeAmount;\n        itemSrc.setStatus(com.bt.game.proto.hall.IncomeBreakdownStatus.EXTRACED);\n\n        dispatch(\"CMD_UPDATE_PIGGY_BANK_DATA\");\n        dispatch(\"EVENT_EXTRACT_SUCCEED\");\n    }\n\n    private onCancelStoredAmount(data: com.bt.game.proto.hall.CancelStoredAmountRes): void {\n        if (data.statusMsg.status !== 0) {\n            PanelHelp.showTip(Manager.makeLanguage(\"ERRORCODE.\" + data.statusMsg.status));\n            return;\n        }\n\n        let itemSrc: PBDepositReceiptItemNode | undefined = this.m_mapOperateSrc.get(data.id);\n        if (!itemSrc) {\n            return;\n        }\n\n        PanelHelp.showTip(i18n.PIGGY_BANK.CANCEL_SUCCESS);\n\n        let extractAmount: number = Number(itemSrc.data.amount);\n\n        PiggyBankData.getInstance().data.amount = Number(PiggyBankData.getInstance().data.amount) - extractAmount;\n        PiggyBankData.getInstance().data.maxTransferAmount = Number(PiggyBankData.getInstance().data.maxTransferAmount) + extractAmount;\n        PiggyBankData.getInstance().data.confirmAmount = Number(PiggyBankData.getInstance().data.confirmAmount) - extractAmount;\n        itemSrc.setStatus(com.bt.game.proto.hall.IncomeBreakdownStatus.CANCELED);\n\n        dispatch(\"CMD_UPDATE_PIGGY_BANK_DATA\");\n    }\n\n    onClickClose(): void {\n        this.playDefaultEffect(\"close\");\n        this.closeWithAction();\n    }\n}\n"]}