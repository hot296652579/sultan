{"version":3,"sources":["assets/script/sdk/googlesdk.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// google ID： howwarddyylan@gmail.com \n// PW： wle6p8yhn321 \n// 辅助Email： zhurovfilimon78@rambler.ru \n// 辅助Email PW： S9t0FlF778Aa \n// 谷歌开发者账号：\n// google ID： kigeina4491@gmail.com \n// PW： 7xCRgFzBA223 \n// 辅助Email： yaroslav-aleksandrov-66@list.ru \n// 辅助Email PW： 57TZElhIKe\n// Access Approval API\nexport default class googlesdk {\n  protected static _instance: googlesdk = null;\n  public static get instance() { return this._instance || (this._instance = new googlesdk()); }\n  constructor() {\n\n  }\n\n  public Google_Load() {\n    let self = this;\n    (function (d: any, s: any, id: any) {\n      var js; var fjs = d.getElementsByTagName(s)[0];\n      if (d.getElementById(id)) { return; }\n      js = d.createElement(s); js.id = id;\n      // (js as any).src = 'https://apis.google.com/js/api.js';\n      (js as any).src = 'https://accounts.google.com/gsi/client';\n      // (js as any).src = 'https://apis.google.com/js/api:client.js';\n      (fjs as any).parentNode.insertBefore(js, fjs);\n    }(document, 'script', 'google-jssdk'));\n    // 初始化\n    (window as any).fbAsyncInit = function () {\n      // @ts-ignore：\n      // eslint-disable-next-line no-undef\n    }\n  }\n\n  public Google_SignOut() {\n    let google = window['google']\n    if (!google) return;\n    google.accounts.id.disableAutoSelect();\n  }\n\n  public Google_Login(callback) {\n    let self = this\n    let gapi = window['gapi']\n    // 传统方法\n    let start = function () {\n      // 2. Initialize the JavaScript client library.\n      gapi.client.init({\n        'apiKey': 'AIzaSyAvS_49o1oJy47qPhGI7A2F5XdF7vRbo1Q',\n        // Your API key will be automatically added to the Discovery Document URLs.\n        'discoveryDocs': ['https://people.googleapis.com/$discovery/rest'],\n        // clientId and scope are optional if auth is not required.\n        'clientId': '370002132573-m6b7j5b4poakr6r7r3lfbuicudn8v6ej.apps.googleusercontent.com',\n        'scope': 'profile',\n      }).then(function () {\n        // 3. Initialize and make the API request.\n        return gapi.client.people.people.get({\n          'resourceName': 'people/me',\n          'requestMask.includeField': 'person.names'\n        });\n      }).then(function (response) {\n        console.log(response.result);\n        let res = response.result;\n        res.id = res.names[0].metadata.source.id;\n        res.name = res.names[0].displayName;\n\n        console.log(`Good To See You : ${res.name}`)\n        if (callback) {\n          callback(res)\n        }\n      }, function (reason) {\n        console.log('Error: ' + reason.result.error.message);\n      });\n    };\n    // 1. Load the JavaScript client library.\n    if (gapi) {\n      // gapi.load('client', start);\n    }\n\n    //谷歌身份 新方法\n    let google = window['google']\n    if (!google) return;\n    let client = google.accounts.oauth2.initCodeClient({\n      client_id: '370002132573-m6b7j5b4poakr6r7r3lfbuicudn8v6ej.apps.googleusercontent.com',\n      scope: 'https://www.googleapis.com/auth/calendar.readonly \\\n      https://www.googleapis.com/auth/contacts.readonly',\n      callback: (response) => {\n        console.log(response);\n        if (response.error)\n          return;\n\n        let res = response.result;\n        if (!res) return;\n        res.id = res.names[0].metadata.source.id;\n        res.name = res.names[0].displayName;\n\n        console.log(`Good To See You : ${res.name}`)\n        if (callback) {\n          callback(res)\n        }\n      },\n    });\n    client.requestCode();\n\n    // Google's OAuth 2.0 endpoint for requesting an access token\n    // var oauth2Endpoint = 'https://accounts.google.com/o/oauth2/v2/auth';\n\n    // // Create <form> element to submit parameters to OAuth 2.0 endpoint.\n    // var form = document.createElement('form');\n    // form.setAttribute('method', 'GET'); // Send as a GET request.\n    // form.setAttribute('action', oauth2Endpoint);\n\n    // // Parameters to pass to OAuth 2.0 endpoint.\n    // var params = {\n    //   'client_id': '370750100142-5blk1j67h9rrcl0ddrk059t71vsdrggl.apps.googleusercontent.com',\n    //   'redirect_uri': 'http://192.168.2.188',\n    //   'response_type': 'token',\n    //   'scope': 'https://www.googleapis.com/auth/drive.metadata.readonly',\n    //   'include_granted_scopes': 'true',\n    //   'state': 'pass-through value'\n    // };\n\n    // // Add form parameters as hidden input values.\n    // for (var p in params) {\n    //   var input = document.createElement('input');\n    //   input.setAttribute('type', 'hidden');\n    //   input.setAttribute('name', p);\n    //   input.setAttribute('value', params[p]);\n    //   form.appendChild(input);\n    // }\n\n    // // Add form to page and submit it to open the OAuth 2.0 endpoint.\n    // document.body.appendChild(form);\n    // form.submit();\n  }\n\n  public destroy(): void {\n  }\n\n}"]}