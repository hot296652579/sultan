{"version":3,"sources":["assets/script/withdrawal/SecondaryPwdView.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["\nimport UIView from \"../framework/ui/UIView\";\nimport { i18n } from \"../common/language/LanguageImpl\";\nimport PanelHelp from \"../msgbox/PanelHelp\";\nimport { protoPackage, serverType } from \"../common/net/CommonService\";\nimport { LobbyService } from \"../common/net/LobbyService\";\nimport { injectService, makeKey } from \"../framework/decorator/Decorators\";\nimport { IController } from \"../framework/controller/Controller\";\nimport { User } from \"../global/User\";\nimport { SettSecondaryPwdType } from \"./SetSecondaryPwdView\";\nconst { ccclass, property } = cc._decorator;\n\nexport enum CheckSecondaryPwdType {\n    getPwq,//获取二级密码\n    checkSuccCall//验证成功后回调\n}\n\n@ccclass\n@injectService(LobbyService.instance)\nexport default class SecondaryPwdView extends UIView implements IController<LobbyService>{\n    service: LobbyService = null;\n\n\n\n    @property(cc.EditBox)\n    pwdEditbox: cc.EditBox = null;\n\n\n    public static getPrefabUrl() {\n        return \"withdrawal/prefabs/SecondaryPwdView\";\n    }\n    onLoad() {\n        super.onLoad();\n        this.content = this.node.getChildByName('content')\n        this.initLanguage()\n    }\n    bindingEvents() {\n        super.bindingEvents();\n        this.registerEvent(makeKey(serverType.Lobby, protoPackage.hall.HallCmd.CMD_CHECK_SECOND_PASSWD), this.toCheckPwdRes);\n    }\n    //args= [ [CheckPwdType,callfun] ]\n    show(args) {\n        super.show(args[0])\n        this.showWithAction(true)\n    }\n    initLanguage() {\n        this.pwdEditbox.placeholder = i18n.ACCOUNT_LOGIN.PALCE_HOLDER.PASSWORD;\n    }\n    onClick(name) {\n        switch (name) {\n            case \"close\":\n                this.closeWithAction();\n                break;\n            case \"FoegetPassword\":\n                dispatch('openSetSecondaryPwdView', SettSecondaryPwdType.reset);\n                break;\n            case \"confirm\":\n                this.toCheckPwd()\n                break;\n        }\n\n    }\n    toCheckPwd() {\n        let passwd = this.checkPwd();\n        if (!passwd) return;\n        switch (this.args[0]) {\n            case CheckSecondaryPwdType.getPwq:\n                this.args[1] && this.args[1](passwd)\n                this.close();\n                break\n            case CheckSecondaryPwdType.checkSuccCall:\n                this.toCheckReq(passwd);\n                break\n\n        }\n\n\n\n\n    }\n    toCheckReq(passwd) {\n        let req = protoPackage.hall.CheckSecondPasswdReq.create({ passwd: passwd });\n        let buffer = protoPackage.hall.CheckSecondPasswdReq.encode(req).finish();\n        this.service.sendMsg(serverType.Lobby,\n            protoPackage.hall.HallCmd.CMD_CHECK_SECOND_PASSWD,\n            buffer);\n    }\n    checkPwd() {\n        let passwd = this.pwdEditbox.string;\n        if (passwd == '') {\n            PanelHelp.showTip(i18n.ACCOUNT_LOGIN.ERROR.EMPTY_PWD)\n            return \"\"\n        }\n        return passwd\n    }\n    toCheckPwdRes(data) {\n        if (data.statusMsg.status == 0) {\n            this.close()\n            this.args[1] && this.args[1]()\n        } else {\n            PanelHelp.showMsgBox('', i18n.ERRORCODE[data.statusMsg.status]);\n        }\n    }\n\n}\n"]}