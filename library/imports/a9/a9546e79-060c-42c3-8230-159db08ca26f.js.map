{"version":3,"sources":["assets/script/redPakge/RedPakgeRecordDetail.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import ScroViewLogic from \"../common/component/ScroViewLogic\";\nimport { Manager } from \"../common/manager/Manager\";\nimport { protoPackage, serverType } from \"../common/net/CommonService\";\nimport { LobbyService } from \"../common/net/LobbyService\";\nimport { injectService, makeKey } from \"../framework/decorator/Decorators\";\nimport UIView from \"../framework/ui/UIView\";\nimport { UtilMgr } from \"../global/UtilMgr\";\n\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\n@injectService(LobbyService.instance)\nexport default class RedPakgeRecordDetail extends UIView {\n\n\n\n    @property(ScroViewLogic)\n    scroViewLogic: ScroViewLogic = null;\n\n    @property(cc.RichText)\n    numRichText: cc.RichText = null;\n\n    @property(cc.RichText)\n    amountRichText: cc.RichText = null;\n\n    @property(cc.Node)\n    noTipNode: cc.Node = null;\n\n    @property(cc.Node)\n    recordsNode: cc.Node = null;\n\n    @property(cc.Node)\n    closeBtn: cc.Node = null;\n\n    service: LobbyService;\n    data: any = null;\n\n    onLoad() {\n        super.onLoad();\n    }\n    bindingEvents() {\n        super.bindingEvents();\n        this.registerEvent(makeKey(serverType.Lobby, protoPackage.hall.HallCmd.CMD_RedPacketDetails), this.refreshList);\n\n    }\n    onEnable() {\n        let req = protoPackage.hall.RedPacketDetailsReq.create({ id: this.data.id, currentPage: 1 });\n        let buffer = protoPackage.hall.RedPacketDetailsReq.encode(req).finish();\n        this.service.sendMsg(serverType.Lobby,\n            protoPackage.hall.HallCmd.CMD_RedPacketDetails,\n            buffer);\n\n        this.recordsNode.active = false;\n        this.closeBtn.active = false;\n    }\n    onDisable(){\n        this.closeBtn.active = true;\n    }\n    init(data) {\n        this.data = data\n    }\n    private refreshList(msg) {\n        // G.Logger.log(msg);\n        if (msg && msg.statusMsg.status == 0) {\n            if (msg.redPacket) {\n                this.numRichText.string = \"<color=#cc0202>\" + msg.redPacket.receivedNumber + \"</c><color=#805326>/\" + msg.redPacket.number + \"</color>\"\n                this.amountRichText.string = \"<color=#cc0202>\" + \"₹\" + UtilMgr.changeMoney(msg.redPacket.receivedAmount) + \"</c><color=#805326>/\" + \"₹\" + UtilMgr.changeMoney(msg.redPacket.totalAmount) + \"</color>\"\n                \n                this.scroViewLogic.resetData();\n                if (msg.redPacketReceiveRecord.length > 0) {\n                    this.noTipNode.active = false\n                    this.scroViewLogic.initUI(msg.redPacketReceiveRecord)\n                }else{\n                    this.noTipNode.active = true\n                }\n              \n            } else {\n                this.noTipNode.active = true\n            }\n\n        }\n\n    }\n\n    onClick(name) {\n        switch (name) {\n            case \"detailClose\":\n                this.node.active = false;\n                this.recordsNode.active = true; \n                break;\n            default: G.Logger.error(\"no find button name -> %s\", name);\n        }\n    }\n    // update (dt) {}\n}\n"]}