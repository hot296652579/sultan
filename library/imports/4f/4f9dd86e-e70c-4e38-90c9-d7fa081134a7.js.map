{"version":3,"sources":["assets/script/rank/RuleView.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA,uDAAoD;AACpD,+DAAuE;AACvE,6DAA0D;AAC1D,kEAA2E;AAC3E,oEAA4C;AAC5C,+CAA4C;AAC5C,oEAA4C;AAI5C,MAAM,EAAE,OAAO,EAAE,QAAQ,EAAE,GAAG,EAAE,CAAC,UAAU,CAAC;AAG5C,IAAqB,QAAQ,GAA7B,MAAqB,QAAS,SAAQ,gBAAM;IAA5C;;QAII,WAAM,GAAY,IAAI,CAAC;QAGvB,SAAI,GAAY,IAAI,CAAC;IAwDzB,CAAC;IAtDU,MAAM,CAAC,YAAY;QACtB,OAAO,uBAAuB,CAAC;IACnC,CAAC;IAED,MAAM;QACF,KAAK,CAAC,MAAM,EAAE,CAAC;QACf,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC;IACvD,CAAC;IAED,aAAa;QACT,KAAK,CAAC,aAAa,EAAE,CAAC;QACtB,IAAI,CAAC,aAAa,CAAC,oBAAO,CAAC,0BAAU,CAAC,KAAK,EAAE,4BAAY,CAAC,IAAI,CAAC,OAAO,CAAC,kBAAkB,CAAC,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;IACrH,CAAC;IAED,IAAI,CAAC,IAAI;QACL,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACjB,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;IAC9B,CAAC;IAED,OAAO,CAAC,IAAI,EAAE,IAAI;QACd,QAAQ,IAAI,EAAE;YACV,KAAK,OAAO;gBAAE,IAAI,CAAC,eAAe,EAAE,CAAC;gBAAC,MAAM;YAE5C,OAAO,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,2BAA2B,EAAE,IAAI,CAAC,CAAC;SAC9D;IACL,CAAC;IAED,cAAc,CAAC,IAAI;QACf,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,IAAI,EAAC,IAAI,CAAC,CAAC;QACxB,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;QAC/B,IAAI,IAAI,CAAC,SAAS,CAAC,MAAM,IAAI,CAAC,EAAE;YAC5B,IAAG,IAAI,CAAC,MAAM,CAAC,MAAM,EAAC;gBAClB,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE;oBACrD,MAAM,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;oBACnC,IAAI,IAAI,GAAG,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBACrC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;oBAC1B,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;oBACnB,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;oBACX,IAAI,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAG,OAAO,CAAC,IAAI,CAAC;oBAC5E,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAG,iBAAO,CAAC,WAAW,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;iBACxG;aACJ;YACD,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAA;SAC1C;aAAM;YACH,mBAAS,CAAC,UAAU,CAAC,EAAE,EAAE,iBAAO,CAAC,YAAY,CAAC,YAAY,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC;SACxF;IACL,CAAC;IAED,KAAK;QACD,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,KAAK,CAAC;QACzB,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,0BAAU,CAAC,KAAK,EACnC,4BAAY,CAAC,IAAI,CAAC,OAAO,CAAC,kBAAkB,EAC5C,IAAI,CAAC,CAAC;IACd,CAAC;CACJ,CAAA;AA3DG;IADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;wCACK;AAGvB;IADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;sCACG;AAPJ,QAAQ;IAF5B,OAAO;IACP,0BAAa,CAAC,2BAAY,CAAC,QAAQ,CAAC;GAChB,QAAQ,CA+D5B;kBA/DoB,QAAQ","file":"","sourceRoot":"/","sourcesContent":["import { Manager } from \"../common/manager/Manager\";\nimport { serverType, protoPackage } from \"../common/net/CommonService\";\nimport { LobbyService } from \"../common/net/LobbyService\";\nimport { injectService, makeKey } from \"../framework/decorator/Decorators\";\nimport UIView from \"../framework/ui/UIView\";\nimport { UtilMgr } from \"../global/UtilMgr\";\nimport PanelHelp from \"../msgbox/PanelHelp\";\n\n\n\nconst { ccclass, property } = cc._decorator;\n@ccclass\n@injectService(LobbyService.instance)\nexport default class RuleView extends UIView{\n    service: LobbyService;\n\n    @property(cc.Node)\n    layout: cc.Node = null;\n\n    @property(cc.Node)\n    item: cc.Node = null;\n\n    public static getPrefabUrl() {\n        return \"rank/prefabs/RuleView\";\n    }\n\n    onLoad() {\n        super.onLoad();\n        this.content = this.node.getChildByName('content'); \n    }\n\n    bindingEvents() {\n        super.bindingEvents();\n        this.registerEvent(makeKey(serverType.Lobby, protoPackage.hall.HallCmd.CMD_NewRankingRule), this.updateRuleView);\n    }\n  \n    show(args) {\n        super.show(args);\n        this.showWithAction(true);\n    }\n\n    onClick(name, node) {\n        switch (name) {\n            case \"close\": this.closeWithAction(); break;\n\n            default: G.Logger.error(\"no find button name -> %s\", name);\n        }\n    }\n\n    updateRuleView(data){\n        G.Logger.log(\"规则\",data);\n        this.layout.children.splice(1);\n        if (data.statusMsg.status == 0) {\n            if(data.reward.length){\n                for (let index = 0; index < data.reward.length; index++) {\n                    const element = data.reward[index];\n                    let item = cc.instantiate(this.item);\n                    item.parent = this.layout;\n                    item.active = true;\n                    item.x = 0;\n                    item.getChildByName('rankLab').getComponent(cc.Label).string = element.rank;\n                    item.getChildByName('rewardLab').getComponent(cc.Label).string = UtilMgr.changeMoney(element.reward);\n                }\n            }\n            this.layout.active = data.reward.length\n        } else {\n            PanelHelp.showMsgBox('', Manager.makeLanguage(\"ERRORCODE.\" + data.statusMsg.status));\n        }\n    }\n    \n    start() {\n        this.layout.active = false;\n          this.service.sendMsg(serverType.Lobby,\n            protoPackage.hall.HallCmd.CMD_NewRankingRule,\n            null);\n    }\n}\n"]}