{"version":3,"sources":["assets/script/recharge/RechargeOrderView.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { Config } from \"../common/config/Config\";\nimport { Manager } from \"../common/manager/Manager\";\nimport { protoPackage, serverType } from \"../common/net/CommonService\";\nimport { LobbyService } from \"../common/net/LobbyService\";\nimport { injectService, makeKey } from \"../framework/decorator/Decorators\";\nimport { com } from \"../framework/external/protoc\";\nimport { HttpRequestType, RequestPackge } from \"../framework/net/HttpClient\";\nimport UIView from \"../framework/ui/UIView\";\nimport { UtilMgr } from \"../global/UtilMgr\";\nimport GoodsItem from \"./GoodsItem\";\nimport RechargeChannelItem from \"./RechargeChannelItem\";\nimport RechargePayView from \"./RechargePayView\";\nimport PanelHelp from \"../msgbox/PanelHelp\";\n\nconst { ccclass, property } = cc._decorator;\n\n// 缩小时最小渠道数量\nconst MIN_CHANNEL_COUNT: number = 2;\n// 扩大时最大渠道数量\nconst MAX_CHANNEL_COUNT: number = 3;\n\n@ccclass\n@injectService(LobbyService.instance)\nexport default class RechargeOrderView extends UIView {\n    service: LobbyService;\n\n    @property(cc.Prefab)\n    private pfbRechargeChannelItem: cc.Prefab = null;\n\n    @property(cc.Label)\n    private labTextAmount: cc.Label = null;\n\n    @property(cc.Label)\n    private labCount: cc.Label = null;\n\n    @property(cc.Label)\n    private labTextSum: cc.Label = null;\n\n    @property(cc.Label)\n    private labSum: cc.Label = null;\n\n    @property(cc.ScrollView)\n    private scvPayChannel: cc.ScrollView = null;\n\n    @property(cc.Button)\n    private btnPlaceOrder: cc.Button = null;\n\n    @property(cc.Label)\n    private btnSum: cc.Label = null;\n\n    @property(cc.Node)\n    private GoodsItem: cc.Node = null;\n\n    @property(cc.Button)\n    private btnMoreChannel: cc.Button = null;\n\n    @property(cc.Node)\n    private nodRight: cc.Node = null;\n\n    @property(cc.Label)\n    private labTextEmptyCahnnel: cc.Label = null;\n\n    @property(cc.Node)\n    private fristPayNode: cc.Node = null;\n\n    @property(cc.Label)\n    private fristPayAmount: cc.Label = null;\n\n    // 渠道列表\n    private m_channelList: com.bt.game.proto.hall.IPayChannelInfo[] = null;\n    // 商品信息\n    private m_goodsInfo: any = null;\n    // 选择数量\n    private m_count: number = null;\n    // 当前选中渠道数据\n    private m_currSelectChannel: com.bt.game.proto.hall.IPayChannelInfo = null;\n    // 商品索引\n    private m_selectIndex: number = null;\n    // 渠道节点大小\n    private m_channelNodeSize: cc.Size = null;\n    // 缩小后渠道列表高度\n    private m_shrinkChannelListH: number = null;\n    // 放大后渠道列表高度\n    private m_expandChannelListH: number = null;\n    // 是否查看更多渠道\n    private isMoreChannel: boolean = null;\n    private _isonClick: boolean = false;\n\n    public static getPrefabUrl() {\n        return \"recharge/prefabs/RechargeOrderView\";\n    }\n\n    bindingEvents() {\n        super.bindingEvents();\n\n        this.registerEvent(makeKey(serverType.Lobby, protoPackage.hall.HallCmd.FETCH_HW_PAY_ORDERID), this.onFetchHwPayRequestIdRes);\n        this.registerEvent(\"SELECT_PAY_CHANNEL\", this.onSelectChannelItem);\n    }\n\n    onLoad() {\n        super.onLoad();\n\n        this.content = this.node.getChildByName('nodRoot');\n\n        this.initData();\n        this.initView();\n    }\n\n    start() {\n\n    }\n\n    show(data) {\n        super.show(data);\n        this.showWithAction(true);\n\n        this.m_channelList = data[0];\n\n        this.m_channelList = this.m_channelList.sort((a: com.bt.game.proto.hall.IPayChannelInfo, b: com.bt.game.proto.hall.IPayChannelInfo) => {\n            return a.sort - b.sort;\n        })\n        this.m_goodsInfo = data[1];\n        this.m_selectIndex = data[2];\n\n        this.m_currSelectChannel = this.m_channelList[0];\n\n        if (data[3] && data[3] == \"fristpay\") {\n            this.fristPayNode.active = true\n            this.fristPayAmount.string = Math.floor((this.m_goodsInfo.gold + this.m_goodsInfo.give)/this.m_goodsInfo.nowPrice*100)+\"\"\n        }\n\n        this.updateView();\n    }\n\n    private initData(): void {\n        this.m_count = 1;\n        this.m_channelNodeSize = this.pfbRechargeChannelItem.data.getContentSize();\n        this.m_shrinkChannelListH = this.m_channelNodeSize.height * MIN_CHANNEL_COUNT;\n        this.m_expandChannelListH = this.m_channelNodeSize.height * MAX_CHANNEL_COUNT;\n        this.isMoreChannel = false;\n    }\n\n    private initView(): void {\n\n    }\n\n    private updateView(): void {\n        this.GoodsItem.getComponent(GoodsItem).init(null, this.m_goodsInfo, this.m_selectIndex);\n        this.setLabSum(this.m_count * this.m_goodsInfo.nowPrice);\n        this.setLabCount(this.m_count);\n        this.setScrollView(this.m_channelList);\n\n        if (this.m_channelList.length > 0 && this.m_channelList.length <= MIN_CHANNEL_COUNT) {\n            this.hideBtnMore();\n            this.labTextEmptyCahnnel.node.active = false;\n        } else if (this.m_channelList.length >= MAX_CHANNEL_COUNT) {\n            this.showBtnMore();\n            this.labTextEmptyCahnnel.node.active = false;\n        } else {\n            this.nodRight.active = false;\n        }\n    }\n\n    private updateScrollViewHeight(): void {\n        let height: number = 0;\n        if (this.isMoreChannel) {\n            height = this.m_expandChannelListH;\n        } else {\n            height = this.m_shrinkChannelListH;\n        }\n        this.scvPayChannel.node.getChildByName(\"view\").height = height;\n        this.scvPayChannel.node.height = height;\n        this.btnMoreChannel.node.y = this.scvPayChannel.node.y - this.scvPayChannel.node.height - (this.btnMoreChannel.node.height / 2);\n    }\n\n    private setScrollView(channelList: com.bt.game.proto.hall.IPayChannelInfo[]): void {\n        this.scvPayChannel.content.destroyAllChildren();\n\n        this.updateScrollViewHeight();\n\n        this.scvPayChannel.content.height = this.m_channelNodeSize.height * channelList.length;\n\n        let originY: number = 0 - (this.m_channelNodeSize.height / 2);\n\n        for (let i: number = 0; i < channelList.length; ++i) {\n            let itemData: com.bt.game.proto.hall.IPayChannelInfo = channelList[i];\n            let itemNode: cc.Node = cc.instantiate(this.pfbRechargeChannelItem);\n            let itemSrc: RechargeChannelItem = itemNode.getComponent(RechargeChannelItem);\n            itemSrc.setData(itemData);\n\n            itemNode.y = originY - (this.m_channelNodeSize.height * i);\n            itemNode.x = 0;\n\n            this.scvPayChannel.content.addChild(itemNode);\n        }\n    }\n\n    private hideBtnMore(): void {\n        this.btnMoreChannel.node.active = false;\n    }\n\n    private showBtnMore(): void {\n        this.btnMoreChannel.node.active = true;\n    }\n\n    private setLabCount(value: number): void {\n        this.labCount.string = `x${value.toString()}`;\n    }\n\n    private setLabSum(value: number): void {\n        this.labSum.string = `₹${UtilMgr.changeMoney(value)}`;\n    }\n\n    private reqRecharge(): void {\n        let option: com.bt.game.proto.hall.IFetchHwPayRequestId = {\n            productNo: this.m_goodsInfo.productNo,\n            productNum: this.m_count,\n        }\n        let req = protoPackage.hall.FetchHwPayRequestId.create(option);\n        let buffer = protoPackage.hall.FetchHwPayRequestId.encode(req).finish();\n        this.service.sendMsg(serverType.Lobby,\n            protoPackage.hall.HallCmd.FETCH_HW_PAY_ORDERID,\n            buffer);\n    }\n\n    private openWebView(url: string, compCallback: Function): void {\n        Manager.uiManager.open({ type: RechargePayView, bundle: this.bundle, args: [url] }).then(() => {\n            compCallback();\n        });\n\n    }\n\n    private onFetchHwPayRequestIdRes(data: com.bt.game.proto.hall.IFetchHwPayRequestIdRes): void {\n        if (data.statusMsg.status == 0) {\n            let payURL: string = `${G.URLMgr.payURL}${this.m_currSelectChannel.url}?requestid=${data.requestId}`;\n            if (this.m_currSelectChannel && this.m_currSelectChannel.type == 1) {\n                this.openWebView(payURL, () => {\n                    this.closeWithAction();\n                });\n            } else {\n                window['platformUtil'].openURL(payURL)\n                this._isonClick = false\n            }\n        } else {\n            PanelHelp.showMsgBox(\"\", Manager.makeLanguage(\"ERRORCODE.\" + data.statusMsg.status));\n            this._isonClick = false\n        }\n\n    }\n\n    private onSelectChannelItem(data: com.bt.game.proto.hall.IPayChannelInfo): void {\n        this.m_currSelectChannel = data;\n    }\n\n    private onClickMoreChannel(): void {\n        this.isMoreChannel = true;\n        this.updateScrollViewHeight();\n        this.hideBtnMore();\n    }\n\n    private onClickPlaceOrder(): void {\n        if (!this.m_currSelectChannel) {\n            G.Logger.warn(\"没有支付渠道信息，不可支付\");\n            return;\n        }\n        if (this._isonClick) {\n            return\n        }\n        this._isonClick = true\n        this.reqRecharge();\n    }\n\n    private onClickClose(): void {\n        this.closeWithAction();\n    }\n\n    // update (dt) {}\n}\n"]}