{"version":3,"sources":["assets/script/service/ServiceView.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { i18n } from \"../common/language/LanguageImpl\";\nimport { protoPackage, serverType } from \"../common/net/CommonService\";\nimport { LobbyService } from \"../common/net/LobbyService\";\nimport { IController } from \"../framework/controller/Controller\";\nimport { injectService, makeKey } from \"../framework/decorator/Decorators\";\nimport UIView from \"../framework/ui/UIView\";\nimport { User } from \"../global/User\";\nimport PanelHelp from \"../msgbox/PanelHelp\";\nimport { OpenAppHelpder } from \"../Helpder/openAppHelpder/openAppHelpder\";\nimport { Manager } from \"../common/manager/Manager\";\n\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\n@injectService(LobbyService.instance)\nexport default class ServiceView extends UIView {\n    service: LobbyService = null;\n    @property(cc.Node)\n    item: cc.Node = null;\n\n    @property(cc.ScrollView)\n    scrollView: cc.ScrollView = null;\n\n\n\n    public static getPrefabUrl() {\n        return \"service/prefabs/ServiceView\";\n    }\n    onLoad() {\n        super.onLoad();\n        this.content = this.node.getChildByName('content');\n        this.scrollView.enabled = false\n    }\n    bindingEvents() {\n        super.bindingEvents();\n        // this.registerEvent(makeKey(serverType.Lobby, protoPackage.hall.HallCmd.CMD_CUSTOMER_SERVICE_CONFIG), this.onShowList);\n    }\n    private onShowList(data) {\n        if (data) {\n            G.Logger.log('客服', data)\n            if (data.statusMsg.status == 0) {\n                if (data.customerServiceConfigList && data.customerServiceConfigList.length > 0) {\n                    if (data.customerServiceConfigList.length > 5) {\n                        this.scrollView.enabled = true\n                    } else {\n                        this.scrollView.enabled = false\n                    }\n                    data.customerServiceConfigList.sort((a, b) => {\n                        return a.sort - b.sort;\n                    })\n                    this.scrollView.content.removeAllChildren();\n                    for (let index = 0; index < data.customerServiceConfigList.length; index++) {\n                        const element = data.customerServiceConfigList[index];\n                        if (element.status === 1) {\n                            let item = cc.instantiate(this.item)\n                            item.active = true\n                            item.parent = this.scrollView.content\n                            item.x = 0\n                            item[\"buttonId\"] = element.buttonId;\n                            item[\"url\"] = element.url;\n                            item.getChildByName(\"Layout\").getChildByName(\"nameLabel\").getComponent(cc.Label).string = element.appName + \": \";\n                            item.getChildByName(\"Layout\").getChildByName(\"appNum\").getComponent(cc.Label).string = element.number;\n                            item.getChildByName(\"appOpen\").getChildByName(\"Background\").getChildByName(\"btnName\").getComponent(cc.Label).string = element.buttonName;\n\n                            // item.getChildByName(\"appOpen\").active = false\n                            // if (element.buttonId === 2) {\n                            //     item.getChildByName(\"appOpen\").active = true\n                            // }else if(element.buttonId === 3){\n                            //     if (element.url && element.url.length > 0) {\n                            //         item.getChildByName(\"appOpen\").active = true\n                            //         item.getChildByName(\"url\").getComponent(cc.Label).string = element.url\n                            //     }\n                            // }\n                            // else {\n                            //     item.getChildByName(\"appCopy\").active = true\n                            // }\n                        }\n\n                    }\n\n                    this.scrollView.scrollToTop()\n                }\n            } else {\n                PanelHelp.showMsgBox('', Manager.makeLanguage(\"ERRORCODE.\" + data.statusMsg.status));\n            }\n        }\n    }\n    show(args) {\n        super.show(args);\n        this.showWithAction(true);\n        if (args[0]) {\n            this.onShowList(args[0])\n        }\n        // let channelId = window['platformUtil'].getAppQuDaoId()\n        // let req = protoPackage.hall.CustomerServiceConfigReq.create({ channelId: channelId  });\n        //     let buffer = protoPackage.hall.CustomerServiceConfigReq.encode(req).finish();\n        //     this.service.sendMsg(serverType.Lobby,\n        //         protoPackage.hall.HallCmd.CMD_CUSTOMER_SERVICE_CONFIG,\n        //         buffer);\n\n    }\n    onClick(name, node) {\n        //应用id(1=E-mail,2=telegram,3=ins,4=facebook,5=whatsapp)\n        if (name === \"close\") {\n            this.closeWithAction()\n        } else {\n            let str = node.parent.getChildByName(\"Layout\").getChildByName(\"appNum\").getComponent(cc.Label).string\n            switch (node.parent.buttonId) {\n                case 1:\n                    window['platformUtil'].copyToClip(str);\n                    if (name === \"appOpen\") {\n                        window['platformUtil'].openEmail(str);\n                    }\n                    break;\n                case 2:\n                    window['platformUtil'].copyToClip(str);\n                    if (name === \"appOpen\") {\n                        OpenAppHelpder.openApp(OpenAppHelpder.APP_NAMES.facebook)\n                    }\n                    break;\n                case 3:\n                    window['platformUtil'].copyToClip(str);\n                    if (name === \"appOpen\") {\n                        OpenAppHelpder.openApp(OpenAppHelpder.APP_NAMES.whatsApp)\n                    }\n                    break;\n                case 4:\n                    window['platformUtil'].copyToClip(str);\n                    if (name === \"appOpen\") {\n                        OpenAppHelpder.openApp(OpenAppHelpder.APP_NAMES.telegram)\n                    }\n                    break;\n                case 5:\n                    if (node.parent.url) {\n                        window['platformUtil'].copyToClip(str);\n                        window['platformUtil'].openURL(node.parent.url);\n                    }\n                    break;\n                case 6:\n                    window['platformUtil'].copyToClip(str);\n                    break;\n                default: G.Logger.error(\"no find button name -> %s\", name);\n            }\n        }\n    }\n\n}\n"]}