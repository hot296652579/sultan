{"version":3,"sources":["assets/script/setting/Setting.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { LogicEvent } from \"../common/event/LogicEvent\";\nimport { i18n } from \"../common/language/LanguageImpl\";\nimport { Manager } from \"../common/manager/Manager\";\nimport { protoPackage, serverType } from \"../common/net/CommonService\";\nimport { LobbyService } from \"../common/net/LobbyService\";\nimport { injectService, makeKey } from \"../framework/decorator/Decorators\";\nimport UIView from \"../framework/ui/UIView\";\nimport { goToLogin } from \"../global/Global\";\nimport { User } from \"../global/User\";\nimport { ConfirmBoxBtnSprite } from \"../msgbox/ConfirmBox\";\nimport PanelHelp from \"../msgbox/PanelHelp\";\nimport { SettSecondaryPwdType } from \"../withdrawal/SetSecondaryPwdView\";\nimport { ENABLE_CHANGE_LANGUAGE } from \"../framework/base/Defines\";\nimport { EventApi } from \"../framework/event/EventApi\";\n\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\n@injectService(LobbyService.instance)\nexport default class Setting extends UIView {\n    service: LobbyService;\n    @property(cc.Label)\n    title: cc.Label = null;\n\n    @property(cc.Label)\n    musiclabel: cc.Label = null;\n    @property(cc.Label)\n    effectlabel: cc.Label = null;\n\n    @property(cc.Label)\n    btnlabel: cc.Label = null;\n\n    @property(cc.Label)\n    languagelabel: cc.Label = null;\n\n\n    @property(cc.Toggle)\n    musicToggle: cc.Toggle = null;\n\n    @property(cc.Toggle)\n    effectToggle: cc.Toggle = null;\n\n    @property(cc.Node)\n    switchacc: cc.Node = null;\n\n    @property(cc.Node)\n    languageItem: cc.Node = null;\n\n    @property(cc.Node)\n    resetNode: cc.Node = null;\n\n    @property(cc.Node)\n    resetItemNode: cc.Node = null;\n\n    @property(cc.ScrollView)\n    scrollView: cc.ScrollView = null;\n\n\n    public static getPrefabUrl() {\n        return \"setting/prefabs/Setting\";\n    }\n\n    onLoad() {\n        super.onLoad();\n        this.content = this.node.getChildByName('content');\n        this.title.language = i18n.SETTING.TITTLE;\n        this.musiclabel.language = i18n.SETTING.MUSIC;\n        this.effectlabel.language = i18n.SETTING.EFFECT;\n        this.btnlabel.language = i18n.SETTING.CHANGEID;\n\n        let isMusicOn = Manager.globalAudio.isMusicOn ? true : false\n        cc.log(Manager.globalAudio.isMusicOn, \"第三方第三方都是\")\n        this.musicToggle.isChecked = isMusicOn;\n        this.musicToggle.node.getChildByName('Background').active = !isMusicOn\n        let isEffectOn = Manager.globalAudio.isEffectOn ? true : false\n        this.effectToggle.isChecked = isEffectOn\n        this.effectToggle.node.getChildByName('Background').active = !isEffectOn\n        this.languagelabel.language = i18n.SETTING.LANGUAGE;\n    }\n    bindingEvents() {\n        super.bindingEvents();\n        this.registerEvent(makeKey(serverType.Lobby, protoPackage.hall.HallCmd.CMD_PushResetNewPlayerGuid), this.resetGuid);\n        if (ENABLE_CHANGE_LANGUAGE) {\n            this.registerEvent(EventApi.CHANGE_LANGUAGE, () => { this.languagelabel.language = i18n.SETTING.LANGUAGE; });\n        }\n    }\n    private resetGuid(data) {\n        if (data) {\n            PanelHelp.showTip(i18n.SETTING.RESETGUIDTIPSUCC)\n            let donotDelete = [];\n            User._gameIds.forEach(id => {\n                if (id == 2001 || id == 2002 || id == 2003) {\n                    donotDelete.push(id);\n                }\n            });\n            User._gameIds = []\n            User._gameIds = User._gameIds.concat(donotDelete);\n        }\n    }\n\n    show(args: any[]) {\n        super.show(args);\n        this.showWithAction(true);\n        if (args && args[0] && args[0].isGame) {\n            this.switchacc.active = false;\n            this.languageItem.active = false;\n            this.resetNode.active = false;\n        }\n        this.resetItemNode.active = !!User._phone && this.node.parent.getChildByName('HallView') != null;\n\n        if (this.resetItemNode.active) {\n            this.scrollView.enabled = true\n            this.scrollView.scrollToTop()\n        } else {\n            this.scrollView.enabled = false\n        }\n    }\n\n    onClick(name, node) {\n        switch (name) {\n            case \"musicToggle\": this.click_music(node); break;\n            case \"effectToggle\": this.click_effect(node); break;\n            case \"switchacc\": this.click_switchacc(); break;\n            case \"close\": this.closeWithAction(); break;\n            case \"resetPwd\":\n                dispatch('toResetPwdView');\n                this.closeWithAction();\n                break;\n            case \"resetSCPwd\":\n                dispatch('openSetSecondaryPwdView', SettSecondaryPwdType.reset);\n                this.closeWithAction();\n                break;\n            case \"resetGuid\":\n                PanelHelp.showDialog(\"\", i18n.SETTING.RESETGUIDTIP, () => {\n                    let req = protoPackage.hall.ReqResetNewPlayerGuid.create({ gameId: 0 });\n                    let buffer = protoPackage.hall.ReqResetNewPlayerGuid.encode(req).finish();\n                    this.service.sendMsg(serverType.Lobby,\n                        protoPackage.hall.HallCmd.CMD_ReqResetNewPlayerGuid,\n                        buffer);\n                }, null, ConfirmBoxBtnSprite.btn_Cancel, ConfirmBoxBtnSprite.btn_Reset)\n                break;\n            case \"languageBtn\":\n                dispatch('openLanguageChangeView');\n                break;\n            default: G.Logger.error(\"no find button name -> %s\", name);\n        }\n    }\n\n    click_switchacc() {\n        goToLogin();\n    }\n\n    click_music(node) {\n        let isChecked = node.getComponent(cc.Toggle).isChecked;\n        let background = node.getChildByName(\"Background\");\n        background.active = !isChecked;\n        Manager.globalAudio.setMusicEnabled(isChecked, true);\n    }\n\n    click_effect(node) {\n        let isChecked = node.getComponent(cc.Toggle).isChecked;\n        let background = node.getChildByName(\"Background\");\n        background.active = !isChecked;\n        Manager.globalAudio.isEffectOn = isChecked;\n    }\n\n    start() {\n\n    }\n\n    // update (dt) {}\n}\n"]}