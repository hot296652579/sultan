{"version":3,"sources":["assets/script/piggyBank/PBExtractPasswdView.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { i18n } from \"../common/language/LanguageImpl\";\nimport { protoPackage, serverType } from \"../common/net/CommonService\";\nimport { LobbyService } from \"../common/net/LobbyService\";\nimport { injectService } from \"../framework/decorator/Decorators\";\nimport UIView from \"../framework/ui/UIView\";\nimport PanelHelp from \"../msgbox/PanelHelp\";\nimport PBPasswdComponent from \"./PBPasswdComponent\";\n\nconst { ccclass, property } = cc._decorator;\n\nconst MAX_DIGIT: number = 6;\n\n@ccclass\n@injectService(LobbyService.instance)\nexport default class PBExtractPasswdView extends UIView {\n    service: LobbyService;\n\n    @property(cc.EditBox)\n    private edbPasswd1: cc.EditBox = null;\n\n    private edbComponent1: PBPasswdComponent = null;\n\n    private m_data = null;\n\n    public static getPrefabUrl() {\n        return \"piggyBank/prefabs/PBExtractPasswdView\";\n    }\n\n    onLoad() {\n        super.onLoad();\n        this.content = this.node.getChildByName('imgBg');\n    }\n\n    start() {\n\n    }\n\n    bindingEvents() {\n        this.registerEvent(\"EVENT_EXTRACT_SUCCEED\", this.onExtractSucceed);\n    }\n\n    show(data): void {\n        super.show(data);\n        this.init();\n        this.showWithAction(true);\n\n        this.m_data = data[0];\n    }\n\n    initView(): void {\n        this.edbPasswd1.string = \"\";\n        this.edbComponent1 = this.edbPasswd1.getComponent(PBPasswdComponent);\n    }\n\n    initData(): void {\n        this.m_data = null;\n    }\n\n    init(): void {\n        this.initData();\n        this.initView();\n    }\n\n    onClickClose(): void {\n        this.playDefaultEffect(\"close\");\n        this.closeWithAction();\n    }\n\n    onClickConfirm(): void {\n        this.playDefaultEffect();\n\n        if (!this.isPasswordDigit()) {\n            PanelHelp.showTip(i18n.PIGGY_BANK.PASSWORD_INCOMPLETE);\n            return;\n        }\n\n        let req = protoPackage.hall.ExtractAmountReq.create({ id: this.m_data.id, passwd: this.edbComponent1.string });\n        let buffer = protoPackage.hall.ExtractAmountReq.encode(req).finish();\n        this.service.sendMsg(serverType.Lobby,\n            protoPackage.hall.HallCmd.CMD_EXTRACT_AMOUNT,\n            buffer);\n    }\n\n    onExtractSucceed(): void {\n        this.init();\n        this.onClickClose();\n    }\n\n    /**\n     * 是否6满足位数\n     */\n    private isPasswordDigit(): boolean {\n        let str1: string = this.edbComponent1.string;\n        if (str1.length !== MAX_DIGIT) {\n            return false;\n        }\n\n        return true;\n    }\n}\n"]}