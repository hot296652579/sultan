{"version":3,"sources":["assets/games/crash/script/view/CrashMyRecordItem.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import Long from \"long\";\nimport { Manager } from \"../../../../script/common/manager/Manager\";\nimport { LobbyService } from \"../../../../script/common/net/LobbyService\";\nimport NumberUtils from \"../../../../script/common/utils/NumberUtils\";\nimport { ENABLE_CHANGE_LANGUAGE } from \"../../../../script/framework/base/Defines\";\nimport { IController } from \"../../../../script/framework/controller/Controller\";\nimport { injectService } from \"../../../../script/framework/decorator/Decorators\";\nimport { EventApi } from \"../../../../script/framework/event/EventApi\";\nimport DateUtils from \"../../../../script/framework/extentions/DateUtils\";\nimport { MST } from \"../../../../script/framework/external/protoc\";\nimport UIView from \"../../../../script/framework/ui/UIView\";\nimport { CrashColorDefine } from \"../define/CrashColorDefine\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\n@injectService(LobbyService.instance)\nexport default class CrashMyRecordItem extends UIView implements IController<LobbyService> {\n    service: LobbyService;\n\n    @property(cc.Label)\n    private labGameNoTitle: cc.Label = null;\n\n    @property(cc.Label)\n    private labDate: cc.Label = null;\n\n    @property(cc.Label)\n    private labBetRate: cc.Label = null;\n\n    @property(cc.Label)\n    private labBetGold: cc.Label = null;\n\n    @property(cc.Label)\n    private labIncome: cc.Label = null;\n\n    // 数据\n    private _data: MST.IMyRecordInfo = null;\n\n    onLoad(): void {\n        super.onLoad();\n\n        this.initData();\n        this.initView();\n    }\n\n    protected start(): void {\n\n    }\n\n    private initData(): void {\n        this._data = null;\n    }\n\n    private initView(): void {\n        this.labGameNoTitle.string = \"\";\n        this.labDate.string = \"\";\n        this.labBetRate.string = \"\";\n        this.labBetGold.string = \"\";\n        this.labIncome.string = \"\";\n        this.labIncome.node.color = CrashColorDefine.ProfitLoss.NORMAL;\n    }\n\n    protected bindingEvents(): void {\n        super.bindingEvents();\n\n        if (ENABLE_CHANGE_LANGUAGE) {\n            this.registerEvent(EventApi.CHANGE_LANGUAGE, this.onLanguageChange);\n        }\n    }\n\n    onLanguageChange() {\n        this.labGameNoTitle.language = Manager.makeLanguage(\"labGameNoTitle\", true);\n        this.labDate.language = Manager.makeLanguage(\"labDate\", true);\n        this.labBetRate.language = Manager.makeLanguage(\"labBetRate\", true);\n        this.labBetGold.language = Manager.makeLanguage(\"labBetGold\", true);\n        this.labIncome.language = Manager.makeLanguage(\"labIncome\", true);\n    }\n\n    private getIncomeColor(incomeGold: number | Long): cc.Color {\n        let color: cc.Color = null;\n        if (incomeGold < 0) {\n            color = CrashColorDefine.ProfitLoss.RED;\n        } else if (incomeGold > 0) {\n            color = CrashColorDefine.ProfitLoss.GREEN;\n        } else {\n            color = CrashColorDefine.ProfitLoss.NORMAL;\n        }\n        return color;\n    }\n\n    private getIncomeString(incomeGold: number | Long): string {\n        let strIncomeGold: string = NumberUtils.converToC(incomeGold);\n        if (incomeGold > 0) {\n            strIncomeGold = `+${strIncomeGold}`;\n        }\n        return strIncomeGold;\n    }\n\n    public onShow(data: MST.IMyRecordInfo): void {\n        this.onLanguageChange();\n\n        this._data = data;\n\n        this.labGameNoTitle.string = data.gameNo.toString();\n        this.labDate.string = new Date(Number(data.betTimestamp)).format(\"MM/dd hh:mm\");\n        this.labBetRate.string = NumberUtils.converToC(data.betMulti);\n        this.labBetGold.string = NumberUtils.converToC(data.betGold);\n        this.labIncome.string = this.getIncomeString(data.incomeGold);\n        this.labIncome.node.color = this.getIncomeColor(data.incomeGold);\n    }\n\n    public reset(): void {\n        this.initData();\n        this.initView();\n\n    }\n\n}\n"]}