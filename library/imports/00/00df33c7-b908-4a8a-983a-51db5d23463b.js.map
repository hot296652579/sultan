{"version":3,"sources":["assets/script/global/UtilMgr.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { HotUpdate } from \"../common/base/HotUpdate\";\nimport { Config } from \"../common/config/Config\";\nimport { BUNDLE_RESOURCES } from \"../framework/base/Defines\";\nimport Operation from \"../framework/extentions/Operation\";\nimport { HttpRequestType, RequestPackge } from \"../framework/net/HttpClient\";\nimport UIView from \"../framework/ui/UIView\";\nimport { Manager } from \"../common/manager/Manager\";\nimport UserInfo from \"../userInfo/UserInfo\";\nimport { getSingleton } from \"../framework/base/Singleton\";\nimport CaptureUtil from \"../common/component/CaptureUtil\";\nimport { User } from \"./User\";\nimport { HallConfig } from \"../hall/HallNetController\";\nimport TypeUtils from \"../common/utils/TypeUtils\";\n\n/**\n * 工具通用\n */\nclass _UtilMgr {\n\n    LocalHeadPicName = null;\n    spreadMoney(num: number): number {\n        if (isNaN(num)) {\n            return num;\n        }\n        return Operation.mul(num, 10000);\n    }\n\n    shrinkMoney(num: number): number {\n        if (isNaN(num)) {\n            return num;\n        }\n        return Operation.div(num, 10000);\n    }\n\n    /**\n     * 转换金币显示规则\n     * 值\n     * 是否格式化\n     * 是否返回整数\n     */\n    changeMoney(num, bPlaceholder = true, isParseInt = false) {\n        if (typeof num == \"string\") {\n            num = Number(num) / 10000;\n        } else if (typeof num == \"number\") {\n            num = num / 10000;\n        } else {\n            cc.error(\"parameter type error\")\n            return\n        }\n\n        let bFu = false;\n        if (num < 0) {\n            bFu = true;\n            num *= -1;\n        }\n\n        let str = ''\n        if (isParseInt || num < 0.01) num = parseInt(num);\n        if (num.toString().indexOf('.') != -1) {\n            if (bPlaceholder) {\n                str = UtilMgr.formatMoney(UtilMgr.toFixed(num, 2).toString(), true)\n            } else {\n                str = UtilMgr.toFixed(num, 2).toString();\n            }\n            str = UtilMgr.toPadding(str, 2)//策划说需要补零\n        } else {\n            if (bPlaceholder) {\n                str = UtilMgr.formatMoney(num.toString(), false)\n            } else {\n                str = num.toString()\n            }\n        }\n\n        //if (num >= 1000000000) { //十亿及以上\n        //    str = (Math.floor(num / 10000000) / 100).toString()\n        //    if (str.indexOf('.') != -1) {\n        //        str = Number(str).toFixed(2) + \"B\";\n        //    } else {\n        //        str = str + \"B\";\n        //    }\n        //}\n        //else if (num >= 1000000) { //一百万及以上\n        //    str = (Math.floor(num / 10000) / 100).toString()\n        //    if (str.indexOf('.') != -1) {\n        //        str = Number(str).toFixed(2) + \"M\";\n        //    } else {\n        //        str = str + \"M\";\n        //    }\n        //}\n        //else if (num >= 1000) { //一千及以上\n        //    str = (Math.floor(num / 10) / 100).toString()\n        //    if (str.indexOf('.') != -1) {\n        //        str = Number(str).toFixed(2) + \"K\";\n        //    } else {\n        //        str = str + \"K\";\n        //    }\n        //}\n        //else { //小于1千\n        //    if (num.toString().indexOf('.') != -1) {\n        //        str = num.toFixed(2)\n        //    } else {\n        //        str = num.toString()\n        //    }\n        //}\n\n        if (bFu) {\n            str = \"-\" + str;\n        }\n        return str;\n    }\n\n    abbrMoney(num): string {\n        num /= 10000;\n        let str = ''\n        if (num >= 10000000000) { //十亿及以上\n            str = (Math.floor(num / 10000000) / 100).toString()\n            if (str.indexOf('.') != -1) {\n                str = Number(str).toFixed(2) + \"B\";\n            } else {\n                str = str + \"B\";\n            }\n        }\n        else if (num >= 10000000) { //一百万及以上\n            str = (Math.floor(num / 10000) / 100).toString()\n            if (str.indexOf('.') != -1) {\n                str = this.toFixed(Number(str), 2) + \"M\";\n            } else {\n                str = str + \"M\";\n            }\n        }\n        else if (num >= 10000) { //一千及以上\n            str = (Math.floor(num / 10) / 100).toString()\n            if (str.indexOf('.') != -1) {\n                str = this.toFixed(Number(str), 2) + \"K\";\n            } else {\n                str = str + \"K\";\n            }\n        }\n        else { //小于1千\n            if (num.toString().indexOf('.') != -1) {\n                str = this.toFixed(num, 2).toString();\n            } else {\n                str = num.toString()\n            }\n\n            if (num === 0) {\n                str = \"0\";\n            }\n        }\n        return str;\n    }\n\n    /**\n     * 保留小数后几位（由于js原生toFixed方法会四舍五入，无法达到想要效果，所以才写了一个方法）\n     * @param num {number} 数\n     * @param places {number} 位数\n     * @return {number}\n     */\n    toFixed(num: number, places: number): number {\n        let result: number = num;\n        let strNum: string = num.toString();\n        if (strNum.indexOf(\".\") > 0) {\n            let arrNum: Array<string> = strNum.split(\".\");\n            let frontNum: string = arrNum[0] + \".\";\n            let rearNum: string = arrNum[1];\n            for (let i = 0; i < places; ++i) {\n                let index = rearNum[i];\n                if (index) {\n                    frontNum += index;\n                } else {\n                    break;\n                }\n            }\n            result = Number(frontNum);\n        }\n\n        return result;\n    }\n\n    /**\n     * 补齐小数后的占位符0\n     * @param num {number | string} 数\n     * @param places {number} 位数\n     */\n    toPadding(num: number | string, places: number): string {\n        const POINT: string = \".\";\n        const ZERO: string = \"0\";\n        let strResult: string = \"\"\n        if (typeof (num) === \"string\") {\n            strResult = num;\n        } else {\n            strResult = num.toString();\n        }\n        let pointIndex = strResult.indexOf(POINT);\n        let perchCount: number = 0;\n        if (pointIndex < 0) {\n            perchCount = places;\n            strResult += POINT;\n        } else {\n            perchCount = places - (strResult.length - (pointIndex + 1));\n        }\n\n        for (let i: number = 0; i < perchCount; ++i) {\n            strResult += ZERO;\n        }\n\n        return strResult;\n    }\n\n    /**\n     * 格式化数字\n     */\n    formatMoney(num, bFloat) {\n        let numArr = []\n        let floatArr = []\n        if (bFloat) {\n            floatArr = num.split(\".\")\n            numArr = floatArr[0].split(\"\")\n        } else {\n            numArr = num.split(\"\")\n        }\n\n        let index = 0\n        for (let i = numArr.length - 1; i >= 0; i--) {\n            index++\n            if (index == 3 && i != 0) {\n                numArr.splice(i, 0, \",\")\n                index = 0\n            }\n        }\n\n        let newMoney = \"\"\n        numArr.forEach((char) => {\n            newMoney = newMoney + char\n        });\n        if (bFloat && floatArr[1] !== undefined) {\n            newMoney = newMoney + \".\" + floatArr[1]\n        }\n\n        return newMoney\n    }\n\n    /**\n     * 恢复数字\n     */\n    recoverMoney(num) {\n        let str = \"\"\n        if (typeof num == \"string\") {\n            str = num\n        } else if (typeof num == \"number\") {\n            str = num.toString()\n        } else {\n            cc.error(\"parameter type error\")\n            return\n        }\n\n        let reg = new RegExp(\",\", \"g\")\n        return Number(str.replace(reg, \"\"))\n    }\n\n    /**\n     * 获取当前时间，格式YYYY-MM-DD\n     */\n    getNowFormatDate() {\n        var date = new Date();\n        var seperator1 = \"-\";\n        var year = date.getFullYear();\n        var month = date.getMonth() + 1;\n        var strDate = date.getDate();\n        let monthstr = month.toString();\n        if (month >= 1 && month <= 9) {\n            monthstr = \"0\" + month;\n        }\n        let strDatestr = strDate.toString();\n        if (strDate >= 0 && strDate <= 9) {\n            strDatestr = \"0\" + strDate;\n        }\n        var currentdate = year + seperator1 + monthstr + seperator1 + strDatestr;\n        return currentdate;\n    }\n\n    /**\n     * string截取一定长度(单个字母占1)\n     */\n    setString(str, len = 10, omit = true) {\n        var strlen = 0;\n        var s = \"\";\n        str = str.toString()\n        for (var i = 0; i < str.length; i++) {\n            if (str.charCodeAt(i) > 128) {\n                strlen += 2;\n            } else {\n                strlen++;\n            }\n            s += str.charAt(i);\n            if (strlen > len) {\n                if (omit) {\n                    return s + \"...\";\n                } else {\n                    return s;\n                }\n            }\n        }\n        return s;\n    }\n    setBankCardStringCover(str, start = 0, end = 4) {\n        let newStr\n        if (typeof str == \"string\") {\n            newStr = str\n        } else if (typeof str == \"number\") {\n            newStr = str.toString()\n        } else {\n            cc.error(\"parameter srr type error\")\n            return\n        }\n        var s = \"\";\n        for (let index = 0; index < newStr.length; index++) {\n\n            if (index >= start && index < newStr.length - end) {\n                s += \"*\";\n\n            } else {\n                s += newStr.charAt(index);\n            }\n\n            if ((index + 1) % 4 == 0 && index > 0) {\n                s += \" \";\n            }\n        }\n        return s;\n    }\n    setStringCover(str, start = 0, end = 4) {\n        let newStr\n        if (typeof str == \"string\") {\n            newStr = str\n        } else if (typeof str == \"number\") {\n            newStr = str.toString()\n        } else {\n            cc.error(\"parameter srr type error\")\n            return\n        }\n        var s = \"\";\n        for (let index = 0; index < newStr.length; index++) {\n\n            if (index >= start && index < newStr.length - end) {\n                s += \"*\";\n            } else {\n                s += newStr.charAt(index);\n            }\n        }\n        return s;\n    }\n\n    /**\n     * string长度\n     */\n    strLen(str) {\n        let len = 0;\n        for (let i = 0; i < str.length; i++) {\n            if (str.charCodeAt(i) > 255 || str.charCodeAt(i) < 0) {\n                len += 2;\n            }\n            else {\n                len++;\n            }\n        }\n        return len;\n    }\n\n    /**\n     * 获取指定范围随机数\n     */\n    random(min, max) {\n        return Math.floor(min + Math.random() * (max - min));\n    }\n\n    /**\n     * 处理浮点数计算丢失精度问题\n     */\n    formatFloat(f) {\n        var m = Math.pow(10, 2);\n        return Math.round(f * m) / m;\n    }\n\n    /**\n     * 获取本地头像索引 2 - 16\n     */\n    getLocalHeadIndex(userId) {\n        let index = userId % 7 + 1\n        return index\n    }\n\n    /**\n     * 获取本地头像地址\n     */\n    getLocalHeadPath(userId) {\n        let index = UtilMgr.getLocalHeadIndex(userId)\n        return Config.avatar_path + index\n    }\n\n    /**\n     * 加载头像\n     * @param head \n     * @param headImg \n     * @param userId \n     * @param view \n     */\n    loadHeadImg(head: cc.Sprite, headImg: string, userId: number | Long, view: UIView) {\n        if (headImg && headImg.length > 0) {\n            if (headImg.indexOf(\"http\") != -1) {\n                head.loadRemoteImage({ url: headImg, view: view, defaultSpriteFrame: Config.headImage_default })\n            } else {\n                if (headImg.indexOf(\"head\") != -1) {\n                    headImg = Config.headImageURL + headImg;\n                    head.loadRemoteImage({ url: headImg, view: view, defaultSpriteFrame: Config.headImage_default })\n                } else if (headImg.indexOf(\"base\") != -1) {\n                    headImg = headImg.slice(headImg.indexOf(\"_\") + 1, headImg.indexOf('.'));\n                    headImg = Config.avatar_path + headImg\n                    head.loadImage({ url: headImg, view: view, bundle: BUNDLE_RESOURCES })\n                } else if (headImg.length == 1) {\n                    let avartarPath = Config.avatar_path + (Number(headImg) + 1)\n                    head.loadImage({ url: avartarPath, view: this, bundle: BUNDLE_RESOURCES })\n                }\n                else {\n                    G.Logger.error('headImg 格式不对');\n                }\n            }\n        } else {\n            headImg = this.getLocalHeadPath(userId)\n            head.loadImage({ url: headImg, view: view, bundle: BUNDLE_RESOURCES })\n        }\n        if (head) {\n            head.node[\"userId\"] = userId;\n            head.node.off(\"click\");\n            if (head.node.getComponent(cc.Button) == null) {\n                head.node.addComponent(cc.Button)\n            }\n            head.node.on(\"click\", () => {\n                // head.node.off(cc.Node.EventType.TOUCH_END);\n                // head.node.on(cc.Node.EventType.TOUCH_END, () => {\n                Manager.globalAudio.playEffect(\"common/audio/click\", BUNDLE_RESOURCES);\n                dispatch(\"OpenUserHeadInfo\", { userID: head.node[\"userId\"] });\n            }, this);\n        }\n    }\n\n    /**\n     * 下载网络图片到本地显示\n     * @param url \n     * @param callback \n     */\n    downloadImg(url: string, sprite: cc.Sprite, callback: Function, view: UIView) {\n\n        function loadEnd() {\n            cc.loader.load(filepath, function (err, tex) {\n                if (err) {\n                    cc.error(err);\n                } else {\n                    var spriteFrame = new cc.SpriteFrame(tex);\n                    if (spriteFrame) {\n                        callback(spriteFrame)\n                    }\n                }\n            });\n\n        }\n\n        if (cc.sys.isNative) {\n            var dirpath = jsb.fileUtils.getWritablePath() + 'downloadImg/';\n            var filepath = dirpath + url + '.png';\n\n            if (jsb.fileUtils.isFileExist(filepath)) {\n                cc.log('Remote is find' + filepath);\n                loadEnd();\n                return;\n            }\n\n            var saveFile = function (data) {\n                if (typeof data !== 'undefined') {\n                    if (!jsb.fileUtils.isDirectoryExist(dirpath)) {\n                        jsb.fileUtils.createDirectory(dirpath);\n                    }\n\n                    if (jsb.fileUtils.writeDataToFile(new Uint8Array(data), filepath)) {\n                        cc.log('Remote write file succeed.');\n                        loadEnd();\n                    } else {\n                        cc.log('Remote write file failed.');\n                    }\n                } else {\n                    cc.log('Remote download file failed.');\n                }\n            };\n\n            var xhr = new XMLHttpRequest();\n\n            xhr.onreadystatechange = function () {\n                cc.log(\"xhr.readyState  \" + xhr.readyState);\n                cc.log(\"xhr.status  \" + xhr.status);\n                if (xhr.readyState === 4) {\n                    if (xhr.status === 200) {\n                        saveFile(xhr.response);\n                    } else {\n                        saveFile(null);\n                    }\n                }\n            }.bind(this);\n            xhr.responseType = 'arraybuffer';\n            xhr.open(\"GET\", url, true);\n            xhr.send();\n        } else {\n            sprite.loadRemoteImage({ url: url, view: view })\n        }\n    }\n\n    /**\n     * 将a的坐标转为b可以使用的坐标系\n     */\n    converPosition(a: cc.Node, b: cc.Node) {\n        //获取a的世界坐标\n        var a2world = a.parent.convertToWorldSpaceAR(a.position);\n        var p = b.parent.convertToNodeSpaceAR(a2world);\n        return new cc.Vec2(p.x, p.y);\n    }\n\n    getLocalHeadPicName() {\n        return this.LocalHeadPicName || null\n    }\n    /**\n     * 转换为base64\n     * @param bytes \n     */\n    _arrayBufferToBase64(bytes) {\n        var base64 = '';\n        var encodings = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n        var byteLength = bytes.byteLength;\n        var byteRemainder = byteLength % 3;\n        var mainLength = byteLength - byteRemainder;\n        var a, b, c, d;\n        var chunk;\n        // Main loop deals with bytes in chunks of 3\n        for (var i = 0; i < mainLength; i = i + 3) {\n            // Combine the three bytes into a single integer\n            chunk = (bytes[i] << 16) | (bytes[i + 1] << 8) | bytes[i + 2];\n            // Use bitmasks to extract 6-bit segments from the triplet\n            a = (chunk & 16515072) >> 18; // 16515072 = (2^6 - 1) << 18\n            b = (chunk & 258048) >> 12; // 258048 = (2^6 - 1) << 12\n            c = (chunk & 4032) >> 6; // 4032 = (2^6 - 1) << 6\n            d = chunk & 63; // 63 = 2^6 - 1\n            // Convert the raw binary segments to the appropriate ASCII encoding\n            base64 += encodings[a] + encodings[b] + encodings[c] + encodings[d];\n        }\n        // Deal with the remaining bytes and padding\n        if (byteRemainder == 1) {\n            chunk = bytes[mainLength];\n            a = (chunk & 252) >> 2 // 252 = (2^6 - 1) << 2;\n            // Set the 4 least significant bits to zero\n            b = (chunk & 3) << 4 // 3 = 2^2 - 1;\n            base64 += encodings[a] + encodings[b] + '==';\n        }\n        else if (byteRemainder == 2) {\n            chunk = (bytes[mainLength] << 8) | bytes[mainLength + 1];\n            a = (chunk & 16128) >> 8 // 16128 = (2^6 - 1) << 8;\n            b = (chunk & 1008) >> 4 // 1008 = (2^6 - 1) << 4;\n            // Set the 2 least significant bits to zero\n            c = (chunk & 15) << 2 // 15 = 2^4 - 1;\n            base64 += encodings[a] + encodings[b] + encodings[c] + '=';\n        }\n        return \"data:image/jpeg;base64,\" + base64;\n        // return base64;\n\n    }\n    /**\n     * 上传头像\n     */\n    getUpLoadPhotoBase64(path) {\n        if (CC_JSB) {\n            // let path = this.getLocalHeadPicName()\n            if (path) {\n                this.LocalHeadPicName = path\n            }\n            G.Logger.log('path' + path)\n            let data = null\n            if (jsb.fileUtils.isFileExist(path)) {\n                data = (jsb.fileUtils as any).getDataFromFile(path);\n                data = this._arrayBufferToBase64(data)\n            }\n            G.Logger.log(data)\n            if (data == null) return null;\n            return data\n\n        }\n\n    }\n    /**\n     * 检测游戏是否安装\n     */\n    checkGameInstall(gameName) {\n        if (CC_JSB) {\n            let gamePath = `assets/${gameName}`\n            return jsb.fileUtils.isFileExist(gamePath)\n        }\n    }\n\n    /**\n     * 获取游戏版本号\n     */\n    getGameManifestVersion(gameName) {\n        if (CC_JSB) {\n            let manifestUrl = `${gameName}_project.manifest`;\n            if (jsb.fileUtils.isFileExist(manifestUrl)) {\n                let content = jsb.fileUtils.getStringFromFile(manifestUrl);\n                let mainifest = JSON.parse(content)\n                G.Logger.log('获取游戏版本号=', mainifest.version);\n                return mainifest.version\n            }\n        }\n        return null\n    }\n    /**\n     * 截图并保存到本地\n     */\n    captureTexture(node: cc.Node) {\n\n        let captureUtil = this.getCatureUitl()\n        if (captureUtil && node) {\n            captureUtil.capture(node)\n        }\n\n    }\n\n    getCatureUitl() {\n        return CaptureUtil.Instance();\n    }\n    pushWindows(pushData) {\n        let pop = User._popWindows.findIndex(popWindow => { return popWindow[0] == pushData[0] });\n        if (pop == -1) User._popWindows.push(pushData);\n    }\n    popWindows(popName?: String) {\n        if (User._popWindows.length) {\n            User._popWindows = User._popWindows.sort((a, b) => { return a[2] - b[2] })\n            // User._popWindows.forEach((wd, i) => {\n            //     if (wd[0] == popName) {\n            //         dispatch(wd[0], wd[1]);\n            //         User._popWindows.splice(i, 1);\n            //     }\n            // });\n\n            dispatch(User._popWindows[0][0], User._popWindows[0][1]);\n            User._popWindows.splice(0, 1);\n\n        }\n    }\n}\n\nexport const UtilMgr = new _UtilMgr();\n\n"]}