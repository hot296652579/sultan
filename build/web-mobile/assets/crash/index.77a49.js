window.__require=function t(e,a,i){function s(r,n){if(!a[r]){if(!e[r]){var l=r.split("/");if(l=l[l.length-1],!e[l]){var h="function"==typeof __require&&__require;if(!n&&h)return h(l,!0);if(o)return o(l,!0);throw new Error("Cannot find module '"+r+"'")}r=l}var c=a[r]={exports:{}};e[r][0].call(c.exports,function(t){return s(e[r][1][t]||t)},c,c.exports,t,e,a,i)}return a[r].exports}for(var o="function"==typeof __require&&__require,r=0;r<i.length;r++)s(i[r]);return s}({CrashBetPlayerItem:[function(t,e,a){"use strict";cc._RF.push(e,"98566FD4GpCCbgot80YDIoq","CrashBetPlayerItem");var i=this&&this.__decorate||function(t,e,a,i){var s,o=arguments.length,r=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,a):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,a,i);else for(var n=t.length-1;n>=0;n--)(s=t[n])&&(r=(o<3?s(r):o>3?s(e,a,r):s(e,a))||r);return o>3&&r&&Object.defineProperty(e,a,r),r},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(a,"__esModule",{value:!0});const o=s(t("../../../../script/common/utils/NumberUtils")),r=s(t("../../../../script/data/UserData")),n=s(t("../../../../script/framework/extentions/Operation")),l=s(t("../../../../script/framework/ui/UIView")),h=t("../../../../script/global/UtilMgr"),c=t("../define/CrashColorDefine"),{ccclass:d,property:u}=cc._decorator;let p=class extends l.default{constructor(){super(...arguments),this.imgAvatar=null,this.labPlayer=null,this.labRate=null,this.labBetGold=null,this.labInCome=null,this._data=null,this._isWin=null,this._userData=null}onLoad(){this.initData(),this.initUI()}start(){}initData(){this._data=null,this._isWin=null,this._userData=G.DataMgr.get(r.default)}initUI(){this.imgAvatar.spriteFrame=null,this.labPlayer.string="",this.labRate.string="",this.labBetGold.string="",this.labInCome.string="",this.labPlayer.node.color=c.CrashColorDefine.ProfitLoss.NORMAL,this.labRate.node.color=c.CrashColorDefine.ProfitLoss.NORMAL,this.labBetGold.node.color=c.CrashColorDefine.ProfitLoss.NORMAL,this.labInCome.node.color=c.CrashColorDefine.ProfitLoss.NORMAL}refreshUI(){h.UtilMgr.loadHeadImg(this.imgAvatar,this._data.betInfo.player.HeaderUrl,this._data.betInfo.player.UnitId,this),this.labPlayer.string=h.UtilMgr.setString(this._data.betInfo.player.Nick),this.labBetGold.string=o.default.converToC(Number(this._data.betInfo.BetGold)),this.refreshInCome(),this._data.betInfo.player.UnitId===this._userData.id&&(this.labRate.string=o.default.converToC(this._data.betInfo.Multiple))}refreshInCome(){null===this._isWin?(this.labInCome.node.color=c.CrashColorDefine.ProfitLoss.NORMAL,this.labInCome.string=""):this._data.isEscape?(this.labRate.string=o.default.converToC(Number(this._data.betInfo.Multiple)),this.labInCome.node.color=c.CrashColorDefine.ProfitLoss.GREEN,this.labPlayer.node.color=c.CrashColorDefine.ProfitLoss.GREEN,this.labRate.node.color=c.CrashColorDefine.ProfitLoss.GREEN,this.labBetGold.node.color=c.CrashColorDefine.ProfitLoss.GREEN,this.labInCome.string=Math.floor(n.default.mul(n.default.div(Number(this._data.betInfo.BetGold),100),n.default.div(this._data.betInfo.Multiple,100))).toString()):(this.labInCome.node.color=c.CrashColorDefine.ProfitLoss.RED,this.labPlayer.node.color=c.CrashColorDefine.ProfitLoss.RED,this.labRate.node.color=c.CrashColorDefine.ProfitLoss.RED,this.labBetGold.node.color=c.CrashColorDefine.ProfitLoss.RED,this.labInCome.string=o.default.converToC(Number(this._data.betInfo.BetGold)))}setIsWin(t){this._isWin=t,this._data.isEscape=t,this.refreshInCome()}getIsWin(){return this._isWin}getId(){return Number(this._data.betInfo.player.UnitId)}getBetRate(){return Number(this._data.betInfo.Multiple)}onShow(t){this._data=t,t.isEscape&&(this._isWin=t.isEscape),this.initUI(),this.refreshUI()}reset(){this.initData(),this.initUI()}};i([u(cc.Sprite)],p.prototype,"imgAvatar",void 0),i([u(cc.Label)],p.prototype,"labPlayer",void 0),i([u(cc.Label)],p.prototype,"labRate",void 0),i([u(cc.Label)],p.prototype,"labBetGold",void 0),i([u(cc.Label)],p.prototype,"labInCome",void 0),p=i([d],p),a.default=p,cc._RF.pop()},{"../../../../script/common/utils/NumberUtils":void 0,"../../../../script/data/UserData":void 0,"../../../../script/framework/extentions/Operation":void 0,"../../../../script/framework/ui/UIView":void 0,"../../../../script/global/UtilMgr":void 0,"../define/CrashColorDefine":"CrashColorDefine"}],CrashBetPlayerListView:[function(t,e,a){"use strict";cc._RF.push(e,"ee057folf1JbZqr2lI2VZ/9","CrashBetPlayerListView");var i=this&&this.__createBinding||(Object.create?function(t,e,a,i){void 0===i&&(i=a),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[a]}})}:function(t,e,a,i){void 0===i&&(i=a),t[i]=e[a]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__decorate||function(t,e,a,i){var s,o=arguments.length,r=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,a):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,a,i);else for(var n=t.length-1;n>=0;n--)(s=t[n])&&(r=(o<3?s(r):o>3?s(e,a,r):s(e,a))||r);return o>3&&r&&Object.defineProperty(e,a,r),r},r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)"default"!==a&&Object.prototype.hasOwnProperty.call(t,a)&&i(e,t,a);return s(e,t),e},n=this&&this.__awaiter||function(t,e,a,i){return new(a||(a=Promise))(function(s,o){function r(t){try{l(i.next(t))}catch(e){o(e)}}function n(t){try{l(i.throw(t))}catch(e){o(e)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof a?e:new a(function(t){t(e)})).then(r,n)}l((i=i.apply(t,e||[])).next())})},l=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(a,"__esModule",{value:!0});const h=r(t("../../../../script/common/define/ComponentDefine")),c=l(t("../../../../script/common/utils/TypeUtils")),{ccclass:d,property:u}=cc._decorator;let p=class extends cc.Component{constructor(){super(...arguments),this.content=null,this.itemPrefab=null,this.mode=h.ListViewLoadMode.NONE,this.direction=h.DirectionType.VERTICAL,this.spacingY=0,this.top=0,this.bottom=0,this.spacingX=0,this.left=0,this.right=0,this.clickItemEventHandler=new cc.Component.EventHandler,this._isLoaded=!1,this._itemDataList=[],this._itemNodePool=new cc.NodePool,this._lastPos=cc.v2(0,0),this._renderItemStartIndex=null,this._renderItemEndIndex=null,this._isRendering=!1,this._itemCacheDataList=[],this._renderingOperateCount=0,this._cacheRenderItemStartIndex=null}changeDirection(t){}onLoad(){this.register(),this.initData(),this.initView()}start(){}set(t){c.default.isNull(t)||c.default.isArray(t)&&t.length<=0||(this._isRendering?(this.setData(this._itemCacheDataList,t),this._cacheRenderItemStartIndex=0,++this._renderingOperateCount):(this.setData(this._itemDataList,t),this._renderItemStartIndex=0,this._renderItemEndIndex=this._itemDataList.length,this.updateListItem()))}setData(t,e){t.length=0,this.insertData(t,e,0)}insert(t,e){if(c.default.isNull(t))return;if(c.default.isArray(t)&&t.length<=0)return;let a=null;this._isRendering?(this._renderingOperateCount<=0&&(this._itemCacheDataList=[].concat(this._itemDataList)),a=this._itemCacheDataList):a=this._itemDataList,c.default.isNull(e)?e=a.length:e<0?e=0:e>a.length&&(e=a.length),this._isRendering?(this.insertData(a,t,e),c.default.isNull(this._cacheRenderItemStartIndex)?this._cacheRenderItemStartIndex=e:this._cacheRenderItemStartIndex>e&&(this._cacheRenderItemStartIndex=e),++this._renderingOperateCount):(this.insertData(a,t,e),this._renderItemStartIndex=e,this._renderItemEndIndex=a.length,this.updateListItem())}insertData(t,e,a){if(Array.isArray(e)){let i=[a,0];i=i.concat(e),t.splice.apply(t,i)}else t.splice(a,0,e)}remove(t,e){if(this._itemDataList.length<=0)return;let a=null;this._isRendering?(this._renderingOperateCount<=0&&(this._itemCacheDataList=[].concat(this._itemDataList)),a=this._itemCacheDataList):a=this._itemDataList,c.default.isNull(t)&&c.default.isNull(e)?(t=0,e=a.length):c.default.isNull(t)?(t=a.length-e)<0&&(t=0,e=a.length):c.default.isNull(e)&&(t<0?t=0:t>=a.length&&(t=a.length-1),e=a.length-t),this._isRendering?(a.splice(t,e),c.default.isNull(this._cacheRenderItemStartIndex)?this._cacheRenderItemStartIndex=t:this._cacheRenderItemStartIndex>t&&(this._cacheRenderItemStartIndex=t),++this._renderingOperateCount):(a.splice(t,e),this._renderItemStartIndex=t,this._renderItemEndIndex=Math.max(this._itemDataList.length,this.content.childrenCount),this.updateListItem())}clear(){this.remove(0)}getChildCount(){return this.content.childrenCount}getChildNode(t,e){return this.content.children.slice(t,e)}getChildNodeByIndex(t){return this.content.children[t]}updateListItem(){if(this._isLoaded)if(this.setRendering(!0),this.content.setContentSize(this.getInnerEstimateSize()),this.mode===h.ListViewLoadMode.ENDLESS);else{let t=[],e=!1;for(let a=this._renderItemStartIndex;a<this._renderItemEndIndex;++a){let i=this.content.children[a],s=this._itemDataList[a];if(!c.default.isNull(i)&&this._itemDataList.hasOwnProperty(a)){this.clickItemEventHandler&&(i.getComponent(cc.Button).node.off("click"),i.getComponent(cc.Button).node.on("click",this.onClickItem.bind(this,i,s)));let t=i.getComponent(i.name);t.onShow&&t.onShow(s)}else{if(c.default.isNull(i)&&!this._itemDataList.hasOwnProperty(a))continue;if(this._itemDataList.hasOwnProperty(a)){if(c.default.isNull(i)){let t=this._itemDataList.slice(a,this._itemDataList.length);if(this.mode===h.ListViewLoadMode.FRAME){let i=this._itemNodePool.size();if(i>0){let s=a+i;t=this._itemDataList.slice(a,s),this.directLoadItem(t),s<this._renderItemEndIndex&&(t=this._itemDataList.slice(s,this._renderItemEndIndex),this.frameLoadItem(t),e=!0)}else this.frameLoadItem(t),e=!0}else this.mode===h.ListViewLoadMode.NONE&&this.directLoadItem(t);break}}else t.push(a)}}for(let a=t.length-1;a>=0;--a){let e=this.content.children[t[a]];this.putNode(e)}e||this.setRendering(!1)}}updateCacheDataList(){this.setData(this._itemDataList,this._itemCacheDataList),this._itemCacheDataList.length=0,this._renderItemStartIndex=this._cacheRenderItemStartIndex,this._renderItemEndIndex=Math.max(this._itemDataList.length,this.content.childrenCount),this.updateListItem()}initData(){this._isLoaded=!0}register(){}unregister(){}initView(){let t=0;switch(this.direction){case h.DirectionType.HORIZONTAL:.5===this.content.anchorX&&(this.content.anchorX=0,this.content.x=this.content.x-.5*this.content.width),this.content.anchorY=.5,t=Math.ceil((this.node.width-this.spacingX)/(this.itemPrefab.data.width+this.spacingX))+2;break;case h.DirectionType.VERTICAL:.5===this.content.anchorY&&(this.content.anchorY=1,this.content.y=this.content.y+.5*this.content.height),this.content.anchorX=.5,t=Math.ceil((this.node.height-this.spacingY)/(this.itemPrefab.data.height+this.spacingY))+2}if(this.mode===h.ListViewLoadMode.ENDLESS)for(let e=0;e<t;++e)this.putNode(this.getNode());this._itemDataList.length>0&&this.updateListItem()}setRendering(t){this._isRendering=t,t||this.onRendered()}getNode(){if(!this.itemPrefab)return G.Logger.error("\u8bf7\u5728 ListView \u6dfb\u52a0\u9884\u5236\u9879 prefab"),null;let t=this._itemNodePool.get();if(!t&&(t=cc.instantiate(this.itemPrefab),this.clickItemEventHandler)){let e=t.getComponent(cc.Button);e||(e=t.addComponent(cc.Button))}return t}putNode(t){if(!t||t.name!==this.itemPrefab.data.name)return G.Logger.warn(`\u8bf7\u4e0d\u8981\u653e\u5165\u4e0e ${t.name} \u4e0d\u76f8\u5173\u7684\u8282\u70b9`),null;this.clickItemEventHandler&&t.getComponent(cc.Button).node.off("click"),t.removeFromParent(),t.getComponent(t.name).reset(),this.scheduleOnce(()=>{this._itemNodePool.put(t)})}initItemPos(t){let e=this.content.childrenCount-1;this.direction===h.DirectionType.HORIZONTAL?t.setPosition(this.left+.5*this.itemPrefab.data.width+e*this.itemPrefab.data.width+e*this.spacingX,0):this.direction===h.DirectionType.VERTICAL&&t.setPosition(0,0-this.top-.5*this.itemPrefab.data.height-e*this.itemPrefab.data.height-e*this.spacingY)}makeItem(t){let e=this.getNode();this.content.addChild(e);let a=e.getComponent(e.name);a&&!c.default.isNull(t)&&(this.clickItemEventHandler&&e.getComponent(cc.Button).node.on("click",this.onClickItem.bind(this,e,t)),a.onShow&&a.onShow(t)),this.initItemPos(e)}*makeGeneratorItem(t){for(let e=0;e<t.length;++e)yield this.makeItem(t[e])}execGeneratorItem(t,e){return n(this,void 0,void 0,function*(){return new Promise(a=>{let i=()=>{let s=Date.now();for(let o=t.next();;o=t.next()){if(null==o||o.done){a();break}if(Date.now()-s>e){this.scheduleOnce(()=>{i()});break}}};i()})})}frameLoadItem(t){return n(this,void 0,void 0,function*(){yield this.execGeneratorItem(this.makeGeneratorItem(t),8),this.setRendering(!1)})}directLoadItem(t){for(let e=0;e<t.length;++e)this.makeItem(t[e])}getPadding(){let t=0;return this.direction===h.DirectionType.HORIZONTAL?t+=this.left+this.right:this.direction===h.DirectionType.VERTICAL&&(t+=this.top+this.bottom),t}getSpacing(){let t=0;return this.direction===h.DirectionType.HORIZONTAL?t=this.spacingX:this.direction===h.DirectionType.VERTICAL&&(t=this.spacingY),t}getInnerEstimateSize(){let t=this.content.parent.getContentSize();return this.direction===h.DirectionType.HORIZONTAL?(t.width=this.getPadding()+this.getSpacing()*(this._itemDataList.length-1)+this._itemDataList.length*this.itemPrefab.data.width,t.width<this.content.parent.width&&(t.width=this.content.parent.width)):this.direction===h.DirectionType.VERTICAL&&(t.height=this.getPadding()+this.getSpacing()*(this._itemDataList.length-1)+this._itemDataList.length*this.itemPrefab.data.height,t.height<this.content.parent.height&&(t.height=this.content.parent.height)),t}onRendered(){this._renderingOperateCount=0,this._itemCacheDataList.length<=0?this._cacheRenderItemStartIndex=null:this.updateCacheDataList()}update(t){}onClickItem(t,e){this.clickItemEventHandler.emit([t,e])}onDestroy(){this.unregister()}};o([u(cc.Node)],p.prototype,"content",void 0),o([u({type:cc.Prefab,tooltip:"\u5217\u8868\u9879\u9884\u5236"})],p.prototype,"itemPrefab",void 0),o([u({type:cc.Enum(h.ListViewLoadMode),tooltip:"\u52a0\u8f7d\u6a21\u5f0f\nNONE \u76f4\u63a5\u52a0\u8f7d\nFRAME \u5206\u5e27\u52a0\u8f7d\nENDLESS \u65e0\u9650\u52a0\u8f7d"})],p.prototype,"mode",void 0),o([u({type:cc.Enum(h.DirectionType),tooltip:"\u6ed1\u52a8\u65b9\u5411\nHORIZONTAL \u6c34\u5e73\nVERTICAL \u5782\u76f4"})],p.prototype,"direction",void 0),o([u({type:cc.Float,tooltip:"\u5782\u76f4\u95f4\u8ddd",visible:function(){return this.direction===h.DirectionType.VERTICAL}})],p.prototype,"spacingY",void 0),o([u({type:cc.Float,tooltip:"\u9876\u95f4\u8ddd",visible:function(){return this.direction===h.DirectionType.VERTICAL}})],p.prototype,"top",void 0),o([u({type:cc.Float,tooltip:"\u5e95\u95f4\u8ddd",visible:function(){return this.direction===h.DirectionType.VERTICAL}})],p.prototype,"bottom",void 0),o([u({type:cc.Float,tooltip:"\u6c34\u5e73\u95f4\u8ddd",visible:function(){return this.direction===h.DirectionType.HORIZONTAL}})],p.prototype,"spacingX",void 0),o([u({type:cc.Float,tooltip:"\u5de6\u95f4\u8ddd",visible:function(){return this.direction===h.DirectionType.HORIZONTAL}})],p.prototype,"left",void 0),o([u({type:cc.Float,tooltip:"\u53f3\u95f4\u8ddd",visible:function(){return this.direction===h.DirectionType.HORIZONTAL}})],p.prototype,"right",void 0),o([u({type:cc.Component.EventHandler,tooltip:"\u70b9\u51fb\u5217\u8868\u9879\u56de\u8c03",visible:!0})],p.prototype,"clickItemEventHandler",void 0),p=o([d],p),a.default=p,cc._RF.pop()},{"../../../../script/common/define/ComponentDefine":void 0,"../../../../script/common/utils/TypeUtils":void 0}],CrashCheckView:[function(t,e,a){"use strict";cc._RF.push(e,"20d80oXDHdKzIXFGpg2fs84","CrashCheckView");var i=this&&this.__decorate||function(t,e,a,i){var s,o=arguments.length,r=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,a):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,a,i);else for(var n=t.length-1;n>=0;n--)(s=t[n])&&(r=(o<3?s(r):o>3?s(e,a,r):s(e,a))||r);return o>3&&r&&Object.defineProperty(e,a,r),r},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(a,"__esModule",{value:!0});const o=s(t("../../../../script/common/item/TitleItemPage")),r=t("../../../../script/common/manager/Manager"),n=t("../../../../script/common/net/LobbyService"),l=t("../../../../script/framework/base/Defines"),h=t("../../../../script/framework/decorator/Decorators"),c=t("../../../../script/framework/event/EventApi"),d=s(t("../../../../script/framework/ui/UIView")),u=t("../config/CrashConfig"),p=s(t("../data/CrashData")),{ccclass:g,property:m}=cc._decorator;let b=class extends d.default{constructor(){super(...arguments),this.wbvCheck=null,this.titleItemPage=null,this._crashData=null,this._gameNo=null}static getPrefabUrl(){return"prefabs/CrashCheckView"}onLoad(){super.onLoad(),this.initData(),this.initView()}start(){}show(t){super.show(t),this.onLanguageChange(),this._gameNo=t[0],this.wbvCheck.url=`${u.CrashConfig.CHECK_SHA256_URL}${this.getURLParam()}`}initData(){this._crashData=G.DataMgr.get(p.default),this._gameNo=null}initView(){}getURLParam(){return`${this._crashData.totalRecordData.SeedInfo.ServerSeed}${this._crashData.totalRecordData.SeedInfo.PublicSeed}${this._gameNo}`}bindingEvents(){super.bindingEvents(),l.ENABLE_CHANGE_LANGUAGE&&this.registerEvent(c.EventApi.CHANGE_LANGUAGE,this.onLanguageChange)}onLanguageChange(){this.titleItemPage.languagePageName(r.Manager.makeLanguage("labRecordPageName",!0))}};i([m(cc.WebView)],b.prototype,"wbvCheck",void 0),i([m(o.default)],b.prototype,"titleItemPage",void 0),b=i([g,h.injectService(n.LobbyService.instance)],b),a.default=b,cc._RF.pop()},{"../../../../script/common/item/TitleItemPage":void 0,"../../../../script/common/manager/Manager":void 0,"../../../../script/common/net/LobbyService":void 0,"../../../../script/framework/base/Defines":void 0,"../../../../script/framework/decorator/Decorators":void 0,"../../../../script/framework/event/EventApi":void 0,"../../../../script/framework/ui/UIView":void 0,"../config/CrashConfig":"CrashConfig","../data/CrashData":"CrashData"}],CrashColorDefine:[function(t,e,a){"use strict";cc._RF.push(e,"9ceb6FzOwNABJUw351Y2/bs","CrashColorDefine"),Object.defineProperty(a,"__esModule",{value:!0}),a.CrashColorDefine=void 0,function(t){t.Record={RED:cc.color(243,61,104,255),GREEN:cc.color(58,206,126,255),BLUE:cc.color(85,173,255,255),YEELOW:cc.color(248,194,48,255),WHITE:cc.color(255,255,255,255)},t.Tail={RED:cc.color(255,93,119,255),GREEN:cc.color(89,215,174,255),BLUE:cc.color(103,181,246,255),YEELOW:cc.color(255,226,126,255),WHITE:cc.color(255,255,255,255)},t.BetMode={SELECTED:cc.color(255,255,255),UN_SELECt:cc.color(147,147,157)},t.EnableRate={ENABLE:cc.color(255,255,255),DISABLE:cc.color(147,147,157)},t.ProfitLoss={NORMAL:cc.color(255,255,255,255),GREEN:cc.color(0,255,91,255),RED:cc.color(255,0,0,255)}}(a.CrashColorDefine||(a.CrashColorDefine={})),cc._RF.pop()},{}],CrashConfig:[function(t,e,a){"use strict";cc._RF.push(e,"1b6578JPvJL/pp//CtdLRM3","CrashConfig"),Object.defineProperty(a,"__esModule",{value:!0}),a.CrashConfig=void 0,function(t){t.BetGoldButton=[2e3,2e4,1e5,.5,2],t.CHECK_SHA256_URL="https://silence-may.github.io/online-tools/sha256.html?content="}(a.CrashConfig||(a.CrashConfig={})),cc._RF.pop()},{}],CrashData:[function(t,e,a){"use strict";cc._RF.push(e,"6addcRJontHRL9HWgPs4l8V","CrashData");var i=this&&this.__decorate||function(t,e,a,i){var s,o=arguments.length,r=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,a):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,a,i);else for(var n=t.length-1;n>=0;n--)(s=t[n])&&(r=(o<3?s(r):o>3?s(e,a,r):s(e,a))||r);return o>3&&r&&Object.defineProperty(e,a,r),r},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(a,"__esModule",{value:!0});const o=s(t("../../../../script/base/BaseData")),r=s(t("../../../../script/common/utils/TypeUtils")),n=s(t("../../../../script/data/AppData")),l=s(t("../../../../script/framework/decorator/ClassDecorator")),h=s(t("../utils/CrashUtils"));let c=class extends o.default{constructor(){super(),this._appData=null,this.betList=null,this.status=null,this.startGameTimestamp=null,this.startBetTimestamp=null,this.stopBetTimestamp=null,this.bombTimestamp=null,this.rateRecordList=null,this.betTotalGold=null,this.myBetList=null,this.betTotalCount=null,this.autoBetData=null,this.hashInfo=null,this.roundBombRate=null,this.betPlayerMap=null,this.totalRecordData=null,this._appData=G.DataMgr.get(n.default),this.betList=[],this.rateRecordList=[],this.myBetList=[],this.hashInfo={serverSeed:"",gameNo:0,publicSeed:"",roundHash:"",acak:0,point:0},this.betPlayerMap=new Map}destroy(){}initNext(){this.betList.length=0,this.status=null,this.startGameTimestamp=null,this.startBetTimestamp=null,this.stopBetTimestamp=null,this.betTotalGold=null,this.myBetList.length=0,this.betTotalCount=null}getRate(){if(r.default.isNull(this.startGameTimestamp))return 0;let t=this._appData.getServerTimestamp()-this.startGameTimestamp;return h.default.getRateByRunTime(t)}};c=i([l.default.classname],c),a.default=c,cc._RF.pop()},{"../../../../script/base/BaseData":void 0,"../../../../script/common/utils/TypeUtils":void 0,"../../../../script/data/AppData":void 0,"../../../../script/framework/decorator/ClassDecorator":void 0,"../utils/CrashUtils":"CrashUtils"}],CrashDefine:[function(t,e,a){"use strict";cc._RF.push(e,"7fc94rySfZNBJL8y0vOfPCM","CrashDefine"),Object.defineProperty(a,"__esModule",{value:!0}),a.CrashDefine=void 0,function(t){let e;t.BET_LIST_COUNT=9,function(t){t[t.UP=0]="UP",t[t.DOWN=1]="DOWN"}(e=t.Direction||(t.Direction={}))}(a.CrashDefine||(a.CrashDefine={})),cc._RF.pop()},{}],CrashEscapeItemNode:[function(t,e,a){"use strict";cc._RF.push(e,"7ba82oxPEpErqFOZA7A3l7B","CrashEscapeItemNode");var i=this&&this.__decorate||function(t,e,a,i){var s,o=arguments.length,r=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,a):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,a,i);else for(var n=t.length-1;n>=0;n--)(s=t[n])&&(r=(o<3?s(r):o>3?s(e,a,r):s(e,a))||r);return o>3&&r&&Object.defineProperty(e,a,r),r};Object.defineProperty(a,"__esModule",{value:!0});const s=t("../../../../script/global/UtilMgr"),{ccclass:o,property:r}=cc._decorator;let n=class extends cc.Component{constructor(){super(...arguments),this.m_nick=null,this.m_rate=null,this.m_originPos=null,this.m_tween=null}onLoad(){this.node.getComponent(cc.Label).string=""}start(){}onEnable(){this.setView()}setOriginPos(t){this.node.setPosition(t),this.m_originPos=t}setData(t,e){this.m_nick=t,this.m_rate=e}setView(){this.node.getComponent(cc.Label).string=`${this.m_nick}@${s.UtilMgr.toFixed(this.m_rate/100,2)}x`}clear(){this.m_nick=null,this.m_rate=null,this.m_originPos=null,this.stopAnim()}runDrop(t){this.setView(),this.stopAnim(),this.m_tween=cc.tween(this.node).to(3,{y:0,opacity:50}).call(()=>{this.stopAnim(),t&&t()}).start()}runFly(t){this.setView(),this.stopAnim();let e=this.node.y/this.m_originPos.y,a=s.UtilMgr.toFixed(3*e,2),i=s.UtilMgr.toFixed(100*e,2);this.node.y>this.m_originPos.y&&(this.node.y=this.m_originPos.y);let o=this.m_originPos.x-i;o<0&&(o=0),this.m_tween=cc.tween(this.node).to(a,{x:o,y:0,opacity:50}).call(()=>{this.stopAnim(),t&&t()}).start()}stopAnim(){this.m_tween&&(this.m_tween.stop(),this.m_tween=null)}};n=i([o],n),a.default=n,cc._RF.pop()},{"../../../../script/global/UtilMgr":void 0}],CrashEscapePlayerItem:[function(t,e,a){"use strict";cc._RF.push(e,"fd0e6aOR6xMup03aF9/zR4+","CrashEscapePlayerItem");var i=this&&this.__decorate||function(t,e,a,i){var s,o=arguments.length,r=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,a):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,a,i);else for(var n=t.length-1;n>=0;n--)(s=t[n])&&(r=(o<3?s(r):o>3?s(e,a,r):s(e,a))||r);return o>3&&r&&Object.defineProperty(e,a,r),r},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(a,"__esModule",{value:!0});const o=s(t("../../../../script/framework/ui/UIView")),r=t("../../../../script/global/UtilMgr"),{ccclass:n,property:l}=cc._decorator;let h=class extends o.default{constructor(){super(...arguments),this.imgBg=null,this.labNick=null,this._nick=null}onLoad(){this.initData(),this.initUI()}start(){}initData(){this._nick=null}initUI(){this.labNick.string=""}refreshNick(){this.labNick.string=r.UtilMgr.setString(this._nick),this.labNick._forceUpdateRenderData(),this.imgBg.node.width=this.labNick.node.width}onShow(t){this._nick=t,this.initUI(),this.refreshNick()}reset(){this.initData(),this.initUI()}};i([l(cc.Sprite)],h.prototype,"imgBg",void 0),i([l(cc.Label)],h.prototype,"labNick",void 0),h=i([n],h),a.default=h,cc._RF.pop()},{"../../../../script/framework/ui/UIView":void 0,"../../../../script/global/UtilMgr":void 0}],CrashGameData:[function(t,e,a){"use strict";cc._RF.push(e,"bd3d1IHIS9GtqZdQURTKSvW","CrashGameData"),Object.defineProperty(a,"__esModule",{value:!0}),a.Crash=void 0;const i=t("../../../../script/common/base/GameData"),s=t("../../../../script/common/language/LanguageImpl"),o=t("../../../../script/common/manager/Manager"),r=t("./CrashLanguageEN"),n=t("./CrashLanguageZH"),l=t("./CrashLanguageHI");class h extends i.GameData{onLanguageChange(){let t=n.CRASH_LAN_ZH;o.Manager.language.getLanguage()==r.CRASH_LAN_EN.language?t=r.CRASH_LAN_EN:o.Manager.language.getLanguage()==l.CRASH_LAN_HI.language&&(t=l.CRASH_LAN_HI),s.i18n[`${this.bundle}`]={},s.i18n[`${this.bundle}`]=t.data}get bundle(){return"crash"}}(function(t){let e;t.gameData=new h,function(t){t.BGM="audio/audio_bgm",t.ROCKET_FLY="audio/audio_fly",t.ROCKET_BOMB="audio/audio_bomb"}(e=t.SOUNDS||(t.SOUNDS={}))})(a.Crash||(a.Crash={})),cc._RF.pop()},{"../../../../script/common/base/GameData":void 0,"../../../../script/common/language/LanguageImpl":void 0,"../../../../script/common/manager/Manager":void 0,"./CrashLanguageEN":"CrashLanguageEN","./CrashLanguageHI":"CrashLanguageHI","./CrashLanguageZH":"CrashLanguageZH"}],CrashGameView:[function(t,e,a){"use strict";cc._RF.push(e,"50060xmZr9OHbOaeS8kPF9r","CrashGameView");var i=this&&this.__decorate||function(t,e,a,i){var s,o=arguments.length,r=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,a):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,a,i);else for(var n=t.length-1;n>=0;n--)(s=t[n])&&(r=(o<3?s(r):o>3?s(e,a,r):s(e,a))||r);return o>3&&r&&Object.defineProperty(e,a,r),r},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(a,"__esModule",{value:!0});const o=t("../../../../script/common/event/LogicEvent"),r=t("../../../../script/common/net/LobbyService"),n=t("../../../../script/framework/decorator/Decorators"),l=s(t("../../../../script/framework/ui/UIView")),h=s(t("../../../../script/data/AppData")),c=t("../define/CrashRateDefine"),d=s(t("../../../../script/data/UserData")),u=s(t("../component/CrashBetPlayerListView")),p=t("../data/CrashGameData"),g=s(t("../../../../script/framework/extentions/Operation")),m=t("../../../../script/global/UtilMgr"),b=t("../../../../script/framework/external/protoc"),C=t("../define/CrashColorDefine"),f=t("../../../../script/common/manager/Manager"),_=t("../config/CrashConfig"),R=s(t("../../../../script/framework/extentions/DateUtils")),v=t("../../../../script/framework/base/Defines"),S=t("../../../../script/framework/event/EventApi"),M=s(t("../../../../script/msgbox/PanelHelp")),y=t("../../../../script/common/config/Config"),L=s(t("./CrashRecordItem")),D=s(t("../../../../script/common/utils/NumberUtils")),B=s(t("./CrashBetPlayerItem")),T=s(t("../data/CrashData")),E=s(t("./CrashTotalRecordView")),k=s(t("./CrashMyRecordView")),I=s(t("../../../../script/common/item/TitleItemPageUser")),A=s(t("./CrashEscapePlayerItem")),w=s(t("../../../../script/common/view/IndicatorView")),P=cc.v2(-267,-523),N=cc.v2(-193.698,-568.591),O=cc.v2(318.892,-556.202),H=cc.v2(294.267,-221.552),{ccclass:x,property:U}=cc._decorator;let V=class extends l.default{constructor(){super(...arguments),this.imgGameBg=null,this.speStaticStar=null,this.speDynamicStar=null,this.nodGameBet=null,this.labStartTips=null,this.labStopTips=null,this.labStartCountDown=null,this.pgbStartCountDown=null,this.nodGameStart=null,this.nodStartRocket=null,this.imgBackLight=null,this.speGameStart=null,this.mskTail=null,this.imgTail0=null,this.imgTail1=null,this.labRate=null,this.nodGameEnd=null,this.labBombRate=null,this.speBomb=null,this.speDescent=null,this.nodEscapeDrop=null,this.latRecord=null,this.labManual=null,this.labAuto=null,this.tggManual=null,this.tggAuto=null,this.latManual=null,this.edbBetGold=null,this.btnNextBet=null,this.btnCurrBet=null,this.tggSwitchRate=null,this.labSwitchRate=null,this.btnSub=null,this.btnAdd=null,this.edbChangeRate=null,this.latAuto=null,this.edbBetGoldAuto=null,this.labRoundTitle=null,this.btnAdd1=null,this.btnSub1=null,this.edbRound=null,this.tggSwitchRateAuto=null,this.labSwitchRateAuto=null,this.btnSubAuto=null,this.btnAddAuto=null,this.edbChangeRateAuto=null,this.labStopProfitTitle=null,this.edbStopProfit=null,this.labStopLossTitle=null,this.edbStopLess=null,this.btnAutoBet=null,this.btnCancelAutoBet=null,this.labBetListTitle=null,this.labTotalBetCount=null,this.labTotalBetGold=null,this.labPlayerTtile=null,this.labBetGoldTitle=null,this.labIncomeTitle=null,this.lsvBetPlayer=null,this.labGameNo=null,this.labHash1=null,this.labSeed=null,this.labHash2=null,this.labAcak=null,this.labPoint=null,this.titleItemPageUser=null,this.pfbCrashEscapePlayerItem=null,this._crashData=null,this._appData=null,this._userData=null,this._rocketBezierTween=null,this._rocketFramePos=null,this._bgMoveTween=null,this._staticStarFadeTween=null,this._dynamicStarTween=null,this._autoBetReqData=null,this._tailOriginSize=null,this._descentTween=null,this._isBomb=!1,this._escapePlayerNodePool=null}static getPrefabUrl(){return"prefabs/CrashGameView"}onLoad(){super.onLoad(),o.dispatchEnterComplete({type:o.LogicType.GAME,views:[this]}),this.initData(),this.initView(),this.initPreload(),this.C2M_GetCrashInfo_Req()}start(){}show(t){super.show(t),this.onLanguageChange()}initData(){this._crashData=G.DataMgr.get(T.default),this._appData=G.DataMgr.get(h.default),this._userData=G.DataMgr.get(d.default),this._rocketBezierTween=null,this._rocketFramePos=[],this._autoBetReqData=null,this._tailOriginSize=this.mskTail.node.getContentSize(),this._escapePlayerNodePool=new cc.NodePool}initView(){this.initBg(),this.initGame(),this.initMode(),this.initBet(),this.initRate(),this.initBetList(),this.initHashInfo()}initPreload(){for(let t=0;t<10;++t)this.putEscapePlayerItem(cc.instantiate(this.pfbCrashEscapePlayerItem))}initHashInfo(){this.labGameNo.string="",this.labHash1.string="",this.labSeed.string="",this.labHash2.string="",this.labAcak.string="tersembunyi",this.labPoint.string="tersembunyi"}initRoundHash(){this.labHash2.string="",this.labAcak.string="tersembunyi",this.labPoint.string="tersembunyi"}nextView(){this.nextHashInfo(),this.initBetList(),this.refreshBetButton(),this.refreshGame(),this.playStaticStarFadeAnim(!0),this.stopDescentAnim()}nextHashInfo(){this.labHash2.string="",this.labAcak.string="tersembunyi",this.labPoint.string="tersembunyi"}bindingEvents(){super.bindingEvents(),v.ENABLE_CHANGE_LANGUAGE&&this.registerEvent(S.EventApi.CHANGE_LANGUAGE,this.onLanguageChange),this.registerEvent("Event_M2C_GetCrashInfo_Res",this.onEvent_M2C_GetCrashInfo_Res),this.registerEvent("Event_M2C_CrashStart_mes",this.onEvent_M2C_CrashStart_mes),this.registerEvent("Event_M2C_MyCrashBet_Res",this.onEvent_M2C_MyCrashBet_Res),this.registerEvent("Event_M2C_CrashBet_Mes",this.onEvent_M2C_CrashBet_Mes),this.registerEvent("Event_M2C_CrashStop_Mes",this.onEvent_M2C_CrashStop_Mes),this.registerEvent("Event_M2C_CrashStartBet_Mes",this.onEvent_M2C_CrashStartBet_Mes),this.registerEvent("Event_M2C_CrashEscape_Mes",this.onEvent_M2C_CrashEscape_Mes),this.registerEvent("Event_M2C_CrashStopBet_Mes",this.onEvent_M2C_CrashStopBet_Mes),this.registerEvent("Event_M2C_CrashCancelAutoBet_Res",this.onEvent_M2C_CrashCancelAutoBet_Res),this.registerEvent("Event_M2C_CrashCancelAutoBet_Mes",this.onEvent_M2C_CrashCancelAutoBet_Mes),this.registerEvent("Event_M2C_CrashHash_Mes",this.onEvent_M2C_CrashHash_Mes),this.registerEvent("Event_M2C_TransferMap_Res",this.onEvent_M2C_TransferMap_Res)}onLanguageChange(){this.titleItemPageUser.languagePageName(f.Manager.makeLanguage("labPageName",!0)),this.labManual.language=f.Manager.makeLanguage("labManual",!0),this.labAuto.language=f.Manager.makeLanguage("labAuto",!0),this.labSwitchRate.language=f.Manager.makeLanguage("labSwitchRate",!0),this.labRoundTitle.language=f.Manager.makeLanguage("labRoundTitle",!0),this.labSwitchRateAuto.language=f.Manager.makeLanguage("labSwitchRate",!0),this.labStopProfitTitle.language=f.Manager.makeLanguage("labStopProfitTitle",!0),this.labStopLossTitle.language=f.Manager.makeLanguage("labStopLossTitle",!0),this.labBetListTitle.language=f.Manager.makeLanguage("labBetListTitle",!0),this.labTotalBetCount.language=f.Manager.makeLanguage("labTotalBetCount",!0),this.labPlayerTtile.language=f.Manager.makeLanguage("labPlayerTtile",!0),this.labBetGoldTitle.language=f.Manager.makeLanguage("labBetGoldTitle",!0),this.labIncomeTitle.language=f.Manager.makeLanguage("labIncomeTitle",!0),this.labStartTips.language=f.Manager.makeLanguage("labStartTips",!0),this.labStopTips.language=f.Manager.makeLanguage("labStopTips",!0)}updateCountDonw(){let t=this._crashData.stopBetTimestamp-this._appData.getServerTimestamp();if(t<=0)return t=0,this.labStartCountDown.string=R.default.getMsToS(t),this.pgbStartCountDown.progress=t,void this.stopCountDown();let e=this._crashData.stopBetTimestamp-this._crashData.startBetTimestamp;this.labStartCountDown.string=R.default.getMsToS(t),this.pgbStartCountDown.progress=t/e,this.pgbStartCountDown.node.active=!0}startCountDown(){this.stopCountDown(),this.schedule(this.updateCountDonw)}stopCountDown(){this.unschedule(this.updateCountDonw)}updateTitalColor(t){let e=C.CrashColorDefine.Tail.WHITE;t>=c.CrashRateDefine.ColorRate.YEELOW?e=C.CrashColorDefine.Tail.YEELOW:t>=c.CrashRateDefine.ColorRate.BLUE?e=C.CrashColorDefine.Tail.BLUE:t>=c.CrashRateDefine.ColorRate.GREEN?e=C.CrashColorDefine.Tail.GREEN:t>=c.CrashRateDefine.ColorRate.RED&&(e=C.CrashColorDefine.Tail.RED),this.imgTail1.node.color=e,this.imgBackLight.node.color=e}updateBetList(t){if(this._crashData.betPlayerMap.size<=0||this.lsvBetPlayer.getChildCount()<this._crashData.betPlayerMap.size)return;let e=[];this._crashData.betPlayerMap.forEach((a,i)=>{t>=a.betInfo.Multiple&&(this.lsvBetPlayer.getChildNodeByIndex(i).getComponent(B.default).setIsWin(!0),e.push(i))});for(let a of e)this._crashData.betPlayerMap.delete(a)}updateRate(){let t=this._crashData.getRate();if(null===t)return void(this.labRate.string="");this.updateBetList(t);let e=this._crashData.roundBombRate;if(t>=e)return this.updateTitalColor(e),this.labRate.string=m.UtilMgr.toPadding(D.default.converToC(e),2)+"x",void this.doBomb();this.updateTitalColor(t),this.labRate.string=m.UtilMgr.toPadding(D.default.converToC(t),2)+"x"}startRate(){this.stopRate(),this.schedule(this.updateRate)}stopRate(){this.labRate.string="",this.unschedule(this.updateRate)}putEscapePlayerItem(t){t.getComponent(A.default).reset(),t.removeFromParent(),this._escapePlayerNodePool.put(t)}getEscapePlayerItem(){let t=this._escapePlayerNodePool.get();return t||(t=cc.instantiate(this.pfbCrashEscapePlayerItem)),t}getRocketToTailHeight(){let t=this.nodStartRocket.convertToWorldSpaceAR(cc.v2(0,0)),e=this.mskTail.node.convertToWorldSpaceAR(cc.v2(0,0));return t.sub(e).y}getAngleByPoint2(t,e){let a=e.x-t.x,i=e.y-t.y;return-cc.v2(a,i).signAngle(cc.v2(1,0))/Math.PI*180}setRocketWaitStatus(){this.nodStartRocket.angle=0,this.nodStartRocket.position=P}setRocketEndStatus(){this.nodStartRocket.angle=90,this.nodStartRocket.position=H}updateRocketRotate(){let t=this._rocketFramePos.length,e=this._rocketFramePos[t-1],a=this.nodStartRocket.position;void 0!==e&&e.equals(a)||(this._rocketFramePos.push(a),t>=2&&(this.nodStartRocket.angle=this.getAngleByPoint2(this._rocketFramePos[t-2],this._rocketFramePos[t-1]),this.mskTail.node.height=this.getRocketToTailHeight()))}startUpdateRocketRotate(){this.stopUpdateRocketRotate(),this.schedule(this.updateRocketRotate)}stopUpdateRocketRotate(){this.unschedule(this.updateRocketRotate),this._rocketFramePos.length=0}playBombAnim(){this.speBomb.node.position=this.nodStartRocket.position,this.speBomb.setAnimation(0,"animation",!1)}playEscapePlayerDropAnim(t){let e=this.getEscapePlayerItem();this.nodEscapeDrop.addChild(e),e.getComponent(A.default).onShow(t);let a=this.nodStartRocket.position;cc.tween(e).set({position:a}).to(3,{position:cc.v2(a.x,-780)}).call(()=>{this.putEscapePlayerItem(e)}).start()}playDescentAnim(){this.stopDescentAnim();let t=this.nodStartRocket.position;this.speDescent.node.position=t,this._descentTween=cc.tween(this.speDescent.node).to(1,{y:-780}).start()}stopDescentAnim(){this._descentTween&&this._descentTween.stop()}playDynamicStarFadeAnim(t){this.stopDynamicStarFadeAnim(),this._dynamicStarTween=cc.tween(this.speDynamicStar.node),t?(this.speDynamicStar.setAnimation(0,"animation",!0),this._dynamicStarTween.to(g.default.div(500,1e3),{opacity:255}).start()):this._dynamicStarTween=cc.tween(this.speDynamicStar.node).to(g.default.div(500,1e3),{opacity:0}).start()}stopDynamicStarFadeAnim(){this._dynamicStarTween&&(this._dynamicStarTween.stop(),this._dynamicStarTween=null)}playDynamicStarDropAnim(){this.speDynamicStar.paused=!1,this.speDynamicStar.setAnimation(0,"animation",!0)}pauseDynamicStarDropAnim(){this.speDynamicStar.paused=!0}playStaticStarFadeAnim(t){this.stopStaticStarFadeAnim(),this._staticStarFadeTween=t?cc.tween(this.speStaticStar.node).to(g.default.div(500,1e3),{opacity:255}).start():cc.tween(this.speStaticStar.node).to(g.default.div(500,1e3),{opacity:0}).start()}stopStaticStarFadeAnim(){this._staticStarFadeTween&&(this._staticStarFadeTween.stop(),this._staticStarFadeTween=null)}playBgMoveAnim(){this.stopBgMoveAnim(),this._bgMoveTween=cc.tween(this.imgGameBg.node).to(g.default.div(1300,1e3),{y:-120}).start()}stopBgMoveAnim(){this._bgMoveTween&&(this._bgMoveTween.stop(),this._bgMoveTween=null)}playRocketAnim(){this.stopRocketAnim(),this.setRocketWaitStatus(),this.startUpdateRocketRotate(),this._rocketBezierTween=cc.tween(this.nodStartRocket).bezierTo(g.default.div(1300,1e3),N,O,H).call(()=>{this.stopUpdateRocketRotate(),this.setRocketEndStatus()}).start()}stopRocketAnim(){this.stopUpdateRocketRotate(),this._rocketBezierTween&&(this._rocketBezierTween.stop(),this._rocketBezierTween=null)}initGameStartNode(){this.setRocketWaitStatus()}refreshGame(){switch(this.initGame(),this._crashData.status){case b.MST.CrashStatus.StartBet:this.audioHelper.playMusic(p.Crash.SOUNDS.BGM,this.bundle),this.initBg(),this.nodGameBet.active=!0,this.labStartTips.node.active=!0,this.labStopTips.node.active=!1,this.startCountDown(),this.playStaticStarFadeAnim(!0);break;case b.MST.CrashStatus.StopBet:this.initGameStartNode(),this.nodGameStart.active=!0,this.playStaticStarFadeAnim(!0);break;case b.MST.CrashStatus.GameBegin:this.audioHelper.stopMusic(),this.nodGameStart.active=!0,this.startRate(),this.playDynamicStarDropAnim(),this.playDynamicStarFadeAnim(!0),this.setRocketEndStatus(),this.setGameBgSky(),this.mskTail.node.setContentSize(this._tailOriginSize);break;case b.MST.CrashStatus.GameOver:this.playBombAnim(),this.nodGameEnd.active=!0,this.labBombRate.string="@"+D.default.converToC(this._crashData.roundBombRate)+"x",this.pauseDynamicStarDropAnim(),this.playDescentAnim(),this.initGameStartNode()}}refreshRecord(){let t=this._crashData.rateRecordList.length,e=[];e=t<=this.latRecord.node.childrenCount?[].concat(this._crashData.rateRecordList):this._crashData.rateRecordList.slice(-this.latRecord.node.childrenCount,t);let a=0;for(let i of this.latRecord.node.children){let t=e[a++],s=i.getComponent(L.default);void 0===t?s.clear():s.setRate(t)}}resumeBet(){this.refreshBetButton()}refreshAutoBetButton(){this.btnCancelAutoBet.node.active=!1,this.btnAutoBet.node.active=!1,this._crashData.autoBetData?(this.btnSubAuto.enabled=!1,this.btnAddAuto.enabled=!1,this.edbRound.enabled=!1,this.btnAdd1.interactable=!1,this.btnSub1.interactable=!1,this.tggSwitchRateAuto.enabled=!1,this.btnAddAuto.interactable=!1,this.btnSubAuto.interactable=!1,this.edbChangeRateAuto.enabled=!1,this.edbStopProfit.enabled=!1,this.edbStopLess.enabled=!1,this.btnCancelAutoBet.node.active=!0):(this.btnSubAuto.enabled=!0,this.btnAddAuto.enabled=!0,this.edbRound.enabled=!0,this.refreshRoundButton(),this.refreshRateButton(this.edbChangeRateAuto),this.tggSwitchRateAuto.enabled=!0,this.edbChangeRateAuto.enabled=!0,this.edbStopProfit.enabled=!0,this.edbStopLess.enabled=!0,this.btnAutoBet.node.active=!0),this.refreshRoundButton()}refreshGameNo(){this.labGameNo.string=`Game No.${this._crashData.hashInfo.gameNo}`}refreshSeed(){this.labHash1.string=this._crashData.hashInfo.serverSeed,this.labSeed.string=this._crashData.hashInfo.publicSeed}refreshRoundHash(){this.labHash2.string=this._crashData.hashInfo.roundHash,this.labAcak.string=m.UtilMgr.setString(this._crashData.hashInfo.acak,5,!0),this.labPoint.string=D.default.converToC(this._crashData.hashInfo.point)}resumeBetList(){this.refreshTotalCount(),this.refreshTotalGold(),this.refreshBetPlayer()}resumeRate(){this.enableEditboxRate(this.edbChangeRate,this.tggSwitchRate.isChecked),this.enableEditboxRate(this.edbChangeRateAuto,this.tggSwitchRateAuto.isChecked)}resumeView(){null!==this._crashData.status&&(this.refreshGame(),this.refreshRecord(),this.resumeBet(),this.resumeBetList(),this.resumeRate(),this.refreshAutoBetButton())}initBg(){this.setGameBgMount(),this.speStaticStar.node.opacity=0,this.speDynamicStar.node.opacity=0}initGame(){this.labStartCountDown.string="",this.labRate.string="",this.labBombRate.string="",this.labStartTips.node.active=!1,this.labStopTips.node.active=!1,this.nodGameBet.active=!1,this.nodGameStart.active=!1,this.nodGameEnd.active=!1,this.mskTail.node.height=0}initRecord(){for(let t of this.latRecord.node.children)t.getComponent(L.default).clear()}initMode(){this.latManual.node.active=this.tggManual.isChecked,this.latAuto.node.active=this.tggAuto.isChecked}initBet(){this.edbBetGold.placeholder="2000-440000",this.edbBetGoldAuto.placeholder="2000-440000",this.btnCurrBet.node.active=!1,this.btnNextBet.node.active=!1}initRate(){this.tggSwitchRate.isChecked=!1,this.tggSwitchRateAuto.isChecked=!1,this.enableEditboxRate(this.edbChangeRate,this.tggSwitchRate.isChecked),this.enableEditboxRate(this.edbChangeRateAuto,this.tggSwitchRateAuto.isChecked)}initBetList(){this.labTotalBetCount.language=f.Manager.makeLanguage(["labTotalBetCount",0],!0),this.labTotalBetGold.string="0",this.lsvBetPlayer.clear()}addBetGold(t,e){let a=0;e.string.length>0&&(a=Number(e.string)),e.string=g.default.add(t,a).toString(),e===this.edbBetGoldAuto&&this.onDidEndedAutoBetGold(e)}mulBetGold(t,e){let a=0;e.string.length>0&&(a=Number(e.string)),e.string=Math.floor(g.default.mul(t,a)).toString()}getEditboxBetGold(t){let e=t.string,a=0;return e.length>0&&(a=Number(e)),a}addRate(t,e){let a=this.getEditboxRate(e);(a=g.default.add(a,t))>=200&&(a=200),a<1.01&&(a=1.01),this.setEditboxRate(a,e),this.refreshRateButton(e)}subRate(t,e){let a=this.getEditboxRate(e);(a=g.default.sub(a,t))<=1.01&&(a=1.01),this.setEditboxRate(a,e),this.refreshRateButton(e)}addRound(t){let e=this.getEditboxRound();(e=g.default.add(e,t))>=999999&&(e=999999),e<2&&(e=2),this.setEditboxRound(e),this.refreshRoundButton()}subRound(t){let e=this.getEditboxRound();(e=g.default.sub(e,t))<=2&&(e=2),this.setEditboxRound(e),this.refreshRoundButton()}enableEditboxRate(t,e){t.enabled=e;let a=t.node.getChildByName("TEXT_LABEL"),i=t.node.getChildByName("PLACEHOLDER_LABEL");e?(a.color=C.CrashColorDefine.EnableRate.ENABLE,i.color=C.CrashColorDefine.EnableRate.ENABLE):(a.color=C.CrashColorDefine.EnableRate.DISABLE,i.color=C.CrashColorDefine.EnableRate.DISABLE)}setGameBgSky(){this.imgGameBg.node.y=-120}setGameBgMount(){this.imgGameBg.node.y=77}setEditboxRate(t,e){e.string=t.toString()+"x"}getEditboxRate(t){let e=t.string,a=0;return(e=e.replace(/x/g,"")).length>0&&(a=Number(e)),a}setEditboxRound(t){this.edbRound.string=t.toString()}setEditboxStopProfit(t){this.edbStopProfit.string=t.toString()}setEditboxStopLoss(t){this.edbStopLess.string=t.toString()}getEditboxRound(){let t=this.edbRound.string,e=0;return t.length>0&&(e=Number(t)),e}getEditboxProfit(){let t=this.edbStopProfit.string,e=0;return t.length>0&&(e=Number(t)),e}getEditboxLoss(){let t=this.edbStopLess.string,e=0;return t.length>0&&(e=Number(t)),e}refreshRateButton(t){let e=null,a=null,i=null;switch(t){case this.edbChangeRate:e=this.btnSub,a=this.btnAdd,i=this.tggSwitchRate;break;case this.edbChangeRateAuto:e=this.btnSubAuto,a=this.btnAddAuto,i=this.tggSwitchRateAuto}if(e.interactable=!1,a.interactable=!1,!i.isChecked)return;let s=this.getEditboxRate(t);s>1.01&&(e.interactable=!0),s<200&&(a.interactable=!0)}refreshRoundButton(){let t=this.btnSub1,e=this.btnAdd1;t.interactable=!1,e.interactable=!1;let a=this.getEditboxRound();a<=2?e.interactable=!0:a>=999999?t.interactable=!0:(e.interactable=!0,t.interactable=!0)}refreshBetButton(){switch(this.btnCurrBet.node.active=!1,this.btnNextBet.node.active=!1,this._crashData.status){case b.MST.CrashStatus.StartBet:this.btnCurrBet.interactable=!0,this.btnCurrBet.node.active=!0;break;case b.MST.CrashStatus.StopBet:this.btnCurrBet.interactable=!1,this.btnCurrBet.node.active=!0;break;case b.MST.CrashStatus.GameBegin:case b.MST.CrashStatus.GameOver:this.btnNextBet.node.active=!0;break;default:this.btnCurrBet.interactable=!1,this.btnCurrBet.node.active=!0}}refreshTotalCount(){this.labTotalBetCount.language=f.Manager.makeLanguage(["labTotalBetCount",this._crashData.betTotalCount],!0)}refreshTotalGold(){this.labTotalBetGold.string=D.default.converToC(this._crashData.betTotalGold)}refreshBetPlayer(){this.lsvBetPlayer.set(Array.from(this._crashData.betPlayerMap.values()))}clickIndicator(t,e){let a=t.convertToWorldSpaceAR(cc.v2(0,0)),i=this.node.convertToNodeSpaceAR(a);f.Manager.uiManager.open({type:w.default,bundle:this.bundle,args:[i,e]})}onClickSwitchRate(t){switch(t){case this.tggSwitchRate:this.enableEditboxRate(this.edbChangeRate,t.isChecked),this.refreshRateButton(this.edbChangeRate);break;case this.tggSwitchRateAuto:this.enableEditboxRate(this.edbChangeRateAuto,t.isChecked),this.refreshRateButton(this.edbChangeRateAuto)}}onClickBetMode(t){switch(this.latManual.node.active=!1,this.latAuto.node.active=!1,this.labManual.node.color=C.CrashColorDefine.BetMode.UN_SELECt,this.labAuto.node.color=C.CrashColorDefine.BetMode.UN_SELECt,t){case this.tggManual:this.latManual.node.active=!0,this.labManual.node.color=C.CrashColorDefine.BetMode.SELECTED;break;case this.tggAuto:this.latAuto.node.active=!0,this.labAuto.node.color=C.CrashColorDefine.BetMode.SELECTED}}onBeginBetRate(t){if("x"===t.string)return void(t.string="");let e=this.getEditboxRate(t);t.string=e.toString()}onChangeRound(t,e){let a=t.split("");for(let o=a.length-1;o>=0;--o)/[0-9]/g.test(a[o])||a.splice(o,1);let i=a.join(",").replace(/,/g,""),s=Number(i);t=s<2?2..toString():s>999999?999999..toString():s.toString(),e.string=t,this.refreshRoundButton()}onChangeBetRate(t,e){let a=t.split("");for(let o=a.length-1;o>=0;--o)/[0-9.]/g.test(a[o])||a.splice(o,1);let i=a.join(",").replace(/,/g,""),s=Number(i);isNaN(s)?t="":(s%1!=0&&(s=m.UtilMgr.toFixed(s,2)),t=s.toString()),e.string=t}onEndBetRate(t){let e=t.string;if(e.length<=0)return void(t.string="x");let a=Number(e);a>=200&&(a=200),a<1.01&&(a=1.01),this.setEditboxRate(a,t),this.refreshRateButton(t)}onChangedBetGold(t,e){let a=t.split("");for(let o=a.length-1;o>=0;--o)/[0-9]/g.test(a[o])||a.splice(o,1);let i=a.join(",").replace(/,/g,""),s=Number(i);t=s<=0?"":s.toString(),e.string=t}onDidEndedAutoBetGold(t){this.getEditboxProfit();let e=this.getEditboxLoss(),a=this.getEditboxBetGold(t);e<a&&this.setEditboxStopLoss(a)}onChangedProfitGold(t,e){let a=t.split("");for(let r=a.length-1;r>=0;--r)/[0-9]/g.test(a[r])||a.splice(r,1);this.getEditboxBetGold(this.edbBetGoldAuto);let i=a.join(",").replace(/,/g,""),s=Number(i),o=Math.floor(g.default.mul(2e3,1.01-1));t=s<=o?o.toString():s.toString(),e.string=t}onChangedLossGold(t,e){let a=t.split("");for(let n=a.length-1;n>=0;--n)/[0-9]/g.test(a[n])||a.splice(n,1);let i=this.getEditboxBetGold(this.edbBetGoldAuto),s=a.join(",").replace(/,/g,""),o=Number(s),r=2e3;i>2e3&&(r=i),t=o<=r?r.toString():o.toString(),e.string=t}reqEnterLobby(){let t=b.MST.C2M_TransferMap_Req.create({RpcId:f.Manager.netManager.getNewSeqId(),RoomName:y.Config.GameId.Lobby}),e=b.MST.C2M_TransferMap_Req.encode(t).finish();r.LobbyService.instance.sendMsg(b.MST.C2M_TransferMap_Req,b.MST.OuterOpcode_Map.C2M_TransferMap_Req,e)}doBomb(){this._isBomb||(this.audioHelper.stopEffectByPath(p.Crash.SOUNDS.ROCKET_FLY),this.audioHelper.playEffect(p.Crash.SOUNDS.ROCKET_BOMB,this.bundle),G.DataMgr.get(T.default).status=b.MST.CrashStatus.GameOver,this._isBomb=!0,this.refreshBetButton(),this.refreshGame(),this.refreshRoundHash(),this.stopRocketAnim(),this.stopBgMoveAnim(),this.stopRate())}onClick(t,e){switch(t){case"btnClose":this.reqEnterLobby();break;case"btnBet0":this.addBetGold(_.CrashConfig.BetGoldButton[0],this.edbBetGold);break;case"btnBetAuto0":this.addBetGold(_.CrashConfig.BetGoldButton[0],this.edbBetGoldAuto);break;case"btnBet1":this.addBetGold(_.CrashConfig.BetGoldButton[1],this.edbBetGold);break;case"btnBetAuto1":this.addBetGold(_.CrashConfig.BetGoldButton[1],this.edbBetGoldAuto);break;case"btnBet2":this.addBetGold(_.CrashConfig.BetGoldButton[2],this.edbBetGold);break;case"btnBetAuto2":this.addBetGold(_.CrashConfig.BetGoldButton[2],this.edbBetGoldAuto);break;case"btnBet3":this.mulBetGold(_.CrashConfig.BetGoldButton[3],this.edbBetGold);break;case"btnBetAuto3":this.mulBetGold(_.CrashConfig.BetGoldButton[3],this.edbBetGoldAuto);break;case"btnBet4":this.mulBetGold(_.CrashConfig.BetGoldButton[4],this.edbBetGold);break;case"btnBetAuto4":this.mulBetGold(_.CrashConfig.BetGoldButton[4],this.edbBetGoldAuto);break;case"btnSub":this.subRate(1,this.edbChangeRate);break;case"btnSubAuto":this.subRate(1,this.edbChangeRateAuto);break;case"btnAdd":this.addRate(1,this.edbChangeRate);break;case"btnAddAuto":this.addRate(1,this.edbChangeRateAuto);break;case"btnAdd1":this.addRound(1);break;case"btnSub1":this.subRound(1);break;case"btnNextBet":case"btnCurrBet":this.C2M_MyCrashBet_Req();break;case"btnCopyNo":window.platformUtil.copyToClip(parseInt("FFFFFF",16).toString());break;case"btnRecord":case"btnWorldRecord":f.Manager.uiManager.open({type:E.default,bundle:this.bundle});break;case"btnAutoBet":this.C2M_MyCrashAutoBet_Req();break;case"btnCancelAutoBet":this.C2M_CrashCancelAutoBet_Req();break;case"btnMyRecord":f.Manager.uiManager.open({type:k.default,bundle:this.bundle});break;case"btnStopProfit":this.clickIndicator(e,f.Manager.makeLanguage("stopProfitInvdicator",!0));break;case"btnStopLoss":this.clickIndicator(e,f.Manager.makeLanguage("stopLossInvdicator",!0))}}C2M_GetCrashInfo_Req(){let t=b.MST.C2M_GetCrashInfo_Req.create({RpcId:f.Manager.netManager.getNewSeqId()}),e=b.MST.C2M_GetCrashInfo_Req.encode(t).finish();this.service.sendMsg(b.MST.C2M_GetCrashInfo_Req,b.MST.OuterOpcode_CrashGame.C2M_GetCrashInfo_Req,e)}C2M_MyCrashBet_Req(){let t=this.getEditboxBetGold(this.edbBetGold);if(t<2e3||t>44e4)return void M.default.showTip(f.Manager.makeLanguage(["InputBetGold",2e3,44e4],!0));if(!this.tggSwitchRate.isChecked||this.tggSwitchRate.isChecked&&(this.getEditboxRate(this.edbChangeRate)<1.01||this.getEditboxRate(this.edbChangeRate)>200))return void M.default.showTip(f.Manager.makeLanguage("InputRate",!0));let e=b.MST.C2M_MyCrashBet_Req.create({RpcId:f.Manager.netManager.getNewSeqId(),BetMode:b.MST.CrashMode.Manual,BetGold:D.default.converToS(t),BetMultiple:D.default.converToS(this.getEditboxRate(this.edbChangeRate))}),a=b.MST.C2M_MyCrashBet_Req.encode(e).finish();this.service.sendMsg(b.MST.C2M_MyCrashBet_Req,b.MST.OuterOpcode_CrashGame.C2M_MyCrashBet_Req,a)}C2M_MyCrashAutoBet_Req(){let t=this.getEditboxBetGold(this.edbBetGoldAuto);if(t<2e3||t>44e4)return void M.default.showTip(f.Manager.makeLanguage(["InputBetGold",2e3,44e4],!0));if(!this.tggSwitchRateAuto.isChecked||this.tggSwitchRateAuto.isChecked&&(this.getEditboxRate(this.edbChangeRateAuto)<1.01||this.getEditboxRate(this.edbChangeRateAuto)>200))return void M.default.showTip(f.Manager.makeLanguage("InputRate",!0));let e=this.getEditboxRound();if(e<=0)return void M.default.showTip(f.Manager.makeLanguage("InputRound",!0));let a=this.getEditboxProfit();if(a<=0)return void M.default.showTip(f.Manager.makeLanguage("InputProfit",!0));let i=this.getEditboxLoss();if(i<=0)return void M.default.showTip(f.Manager.makeLanguage("InputLoss",!0));this._autoBetReqData={RpcId:f.Manager.netManager.getNewSeqId(),BetMode:b.MST.CrashMode.Auto,BetGold:D.default.converToS(t),BetMultiple:D.default.converToS(this.getEditboxRate(this.edbChangeRateAuto)),AutoRound:e,StopProfit:D.default.converToS(a),StopLoss:D.default.converToS(i)};let s=b.MST.C2M_MyCrashBet_Req.create(this._autoBetReqData),o=b.MST.C2M_MyCrashBet_Req.encode(s).finish();this.service.sendMsg(b.MST.C2M_MyCrashBet_Req,b.MST.OuterOpcode_CrashGame.C2M_MyCrashBet_Req,o)}C2M_CrashCancelAutoBet_Req(){let t=b.MST.C2M_CrashCancelAutoBet_Req.create({}),e=b.MST.C2M_CrashCancelAutoBet_Req.encode(t).finish();this.service.sendMsg(b.MST.C2M_CrashCancelAutoBet_Req,b.MST.OuterOpcode_CrashGame.C2M_CrashCancelAutoBet_Req,e)}onEvent_M2C_GetCrashInfo_Res(t){this.refreshGameNo(),this.refreshSeed(),this.resumeView()}onEvent_M2C_CrashStart_mes(t){this.audioHelper.stopMusic(),this.audioHelper.playEffect(p.Crash.SOUNDS.ROCKET_FLY,this.bundle),this.refreshBetButton(),this.initGame(),this.nodGameStart.active=!0,this.playDynamicStarDropAnim(),t.Multi<=100||(this.playStaticStarFadeAnim(!1),this.playDynamicStarFadeAnim(!0),this.playRocketAnim(),this.playBgMoveAnim(),this.startRate())}onEvent_M2C_MyCrashBet_Res(t){0===t.Error?M.default.showTip(f.Manager.makeLanguage(["nextBetGoldSucceed",D.default.converToC(t.Gold)],!0)):M.default.showErrTip(t.Error),t.BetMode===b.MST.CrashMode.Auto&&(0===t.Error&&(this._crashData.autoBetData={BetGold:this._autoBetReqData.BetGold,BetMultiple:this._autoBetReqData.BetMultiple,AutoRound:this._autoBetReqData.AutoRound,StopProfit:this._autoBetReqData.StopProfit,StopLoss:this._autoBetReqData.StopLoss}),this._autoBetReqData=null,this.refreshAutoBetButton())}onEvent_M2C_CrashBet_Mes(t){this.initRoundHash(),this.refreshGameNo(),this.refreshTotalCount(),this.refreshTotalGold();let e=[],a=[];for(let i of t.Bets){let t={betInfo:i,isEscape:!1};i.player.UnitId===this._userData.id?e.push(t):a.push(t)}this.lsvBetPlayer.insert(e.reverse(),0),this.lsvBetPlayer.insert(a.reverse(),this._crashData.myBetList.length)}onEvent_M2C_CrashStop_Mes(t){this.doBomb();let e=this.lsvBetPlayer.getChildNode(0,9);for(let a of e){let t=a.getComponent(B.default);t.getIsWin()||t.setIsWin(!1)}this.refreshRecord()}onEvent_M2C_CrashStartBet_Mes(t){this.audioHelper.playMusic(p.Crash.SOUNDS.BGM,this.bundle),this._isBomb=!1,this.nextView(),this.refreshGameNo()}onEvent_M2C_CrashEscape_Mes(t){for(let e of t.Players)this.playEscapePlayerDropAnim(e.Nick)}onEvent_M2C_CrashStopBet_Mes(t){this.refreshBetButton(),this.labStartCountDown.string="",this.pgbStartCountDown.node.active=!1,this.labStartTips.node.active=!1,this.labStopTips.node.active=!0}onEvent_M2C_CrashCancelAutoBet_Res(t){0===t.Error?(this._autoBetReqData=null,this._crashData.autoBetData=null,this.refreshAutoBetButton()):M.default.showErrTip(t.Error)}onEvent_M2C_CrashCancelAutoBet_Mes(t){M.default.showTip(f.Manager.makeLanguage("cancelAutoBet",!0)),this._autoBetReqData=null,this.refreshAutoBetButton()}onEvent_M2C_CrashHash_Mes(t){this.refreshSeed()}onEvent_M2C_TransferMap_Res(t){0===t.Error?dispatch(o.LogicEvent.ENTER_HALL):M.default.showErrTip(t.Error)}stopAllSound(){this.audioHelper.stopMusic(),this.audioHelper.stopEffectByPath(p.Crash.SOUNDS.ROCKET_BOMB),this.audioHelper.stopEffectByPath(p.Crash.SOUNDS.ROCKET_FLY)}onDestroy(){super.onDestroy(),this.stopAllSound()}};i([U(cc.Sprite)],V.prototype,"imgGameBg",void 0),i([U(sp.Skeleton)],V.prototype,"speStaticStar",void 0),i([U(sp.Skeleton)],V.prototype,"speDynamicStar",void 0),i([U(cc.Node)],V.prototype,"nodGameBet",void 0),i([U(cc.Label)],V.prototype,"labStartTips",void 0),i([U(cc.Label)],V.prototype,"labStopTips",void 0),i([U(cc.Label)],V.prototype,"labStartCountDown",void 0),i([U(cc.ProgressBar)],V.prototype,"pgbStartCountDown",void 0),i([U(cc.Node)],V.prototype,"nodGameStart",void 0),i([U(cc.Node)],V.prototype,"nodStartRocket",void 0),i([U(cc.Sprite)],V.prototype,"imgBackLight",void 0),i([U(sp.Skeleton)],V.prototype,"speGameStart",void 0),i([U(cc.Mask)],V.prototype,"mskTail",void 0),i([U(cc.Sprite)],V.prototype,"imgTail0",void 0),i([U(cc.Sprite)],V.prototype,"imgTail1",void 0),i([U(cc.Label)],V.prototype,"labRate",void 0),i([U(cc.Node)],V.prototype,"nodGameEnd",void 0),i([U(cc.Label)],V.prototype,"labBombRate",void 0),i([U(sp.Skeleton)],V.prototype,"speBomb",void 0),i([U(sp.Skeleton)],V.prototype,"speDescent",void 0),i([U(cc.Node)],V.prototype,"nodEscapeDrop",void 0),i([U(cc.Layout)],V.prototype,"latRecord",void 0),i([U(cc.Label)],V.prototype,"labManual",void 0),i([U(cc.Label)],V.prototype,"labAuto",void 0),i([U(cc.Toggle)],V.prototype,"tggManual",void 0),i([U(cc.Toggle)],V.prototype,"tggAuto",void 0),i([U(cc.Layout)],V.prototype,"latManual",void 0),i([U(cc.EditBox)],V.prototype,"edbBetGold",void 0),i([U(cc.Button)],V.prototype,"btnNextBet",void 0),i([U(cc.Button)],V.prototype,"btnCurrBet",void 0),i([U(cc.Toggle)],V.prototype,"tggSwitchRate",void 0),i([U(cc.Label)],V.prototype,"labSwitchRate",void 0),i([U(cc.Button)],V.prototype,"btnSub",void 0),i([U(cc.Button)],V.prototype,"btnAdd",void 0),i([U(cc.EditBox)],V.prototype,"edbChangeRate",void 0),i([U(cc.Layout)],V.prototype,"latAuto",void 0),i([U(cc.EditBox)],V.prototype,"edbBetGoldAuto",void 0),i([U(cc.Label)],V.prototype,"labRoundTitle",void 0),i([U(cc.Button)],V.prototype,"btnAdd1",void 0),i([U(cc.Button)],V.prototype,"btnSub1",void 0),i([U(cc.EditBox)],V.prototype,"edbRound",void 0),i([U(cc.Toggle)],V.prototype,"tggSwitchRateAuto",void 0),i([U(cc.Label)],V.prototype,"labSwitchRateAuto",void 0),i([U(cc.Button)],V.prototype,"btnSubAuto",void 0),i([U(cc.Button)],V.prototype,"btnAddAuto",void 0),i([U(cc.EditBox)],V.prototype,"edbChangeRateAuto",void 0),i([U(cc.Label)],V.prototype,"labStopProfitTitle",void 0),i([U(cc.EditBox)],V.prototype,"edbStopProfit",void 0),i([U(cc.Label)],V.prototype,"labStopLossTitle",void 0),i([U(cc.EditBox)],V.prototype,"edbStopLess",void 0),i([U(cc.Button)],V.prototype,"btnAutoBet",void 0),i([U(cc.Button)],V.prototype,"btnCancelAutoBet",void 0),i([U(cc.Label)],V.prototype,"labBetListTitle",void 0),i([U(cc.Label)],V.prototype,"labTotalBetCount",void 0),i([U(cc.Label)],V.prototype,"labTotalBetGold",void 0),i([U(cc.Label)],V.prototype,"labPlayerTtile",void 0),i([U(cc.Label)],V.prototype,"labBetGoldTitle",void 0),i([U(cc.Label)],V.prototype,"labIncomeTitle",void 0),i([U(u.default)],V.prototype,"lsvBetPlayer",void 0),i([U(cc.Label)],V.prototype,"labGameNo",void 0),i([U(cc.Label)],V.prototype,"labHash1",void 0),i([U(cc.Label)],V.prototype,"labSeed",void 0),i([U(cc.Label)],V.prototype,"labHash2",void 0),i([U(cc.Label)],V.prototype,"labAcak",void 0),i([U(cc.Label)],V.prototype,"labPoint",void 0),i([U(I.default)],V.prototype,"titleItemPageUser",void 0),i([U(cc.Prefab)],V.prototype,"pfbCrashEscapePlayerItem",void 0),V=i([x,n.injectService(r.LobbyService.instance)],V),a.default=V,cc._RF.pop()},{"../../../../script/common/config/Config":void 0,"../../../../script/common/event/LogicEvent":void 0,"../../../../script/common/item/TitleItemPageUser":void 0,"../../../../script/common/manager/Manager":void 0,"../../../../script/common/net/LobbyService":void 0,"../../../../script/common/utils/NumberUtils":void 0,"../../../../script/common/view/IndicatorView":void 0,"../../../../script/data/AppData":void 0,"../../../../script/data/UserData":void 0,"../../../../script/framework/base/Defines":void 0,"../../../../script/framework/decorator/Decorators":void 0,"../../../../script/framework/event/EventApi":void 0,"../../../../script/framework/extentions/DateUtils":void 0,"../../../../script/framework/extentions/Operation":void 0,"../../../../script/framework/external/protoc":void 0,"../../../../script/framework/ui/UIView":void 0,"../../../../script/global/UtilMgr":void 0,"../../../../script/msgbox/PanelHelp":void 0,"../component/CrashBetPlayerListView":"CrashBetPlayerListView","../config/CrashConfig":"CrashConfig","../data/CrashData":"CrashData","../data/CrashGameData":"CrashGameData","../define/CrashColorDefine":"CrashColorDefine","../define/CrashRateDefine":"CrashRateDefine","./CrashBetPlayerItem":"CrashBetPlayerItem","./CrashEscapePlayerItem":"CrashEscapePlayerItem","./CrashMyRecordView":"CrashMyRecordView","./CrashRecordItem":"CrashRecordItem","./CrashTotalRecordView":"CrashTotalRecordView"}],CrashInterface:[function(t,e,a){"use strict";cc._RF.push(e,"7fc03u5ypNIeraTOEehJgHK","CrashInterface"),Object.defineProperty(a,"__esModule",{value:!0}),cc._RF.pop()},{}],CrashLanguageEN:[function(t,e,a){"use strict";cc._RF.push(e,"6b6c8pJo2FKupYKJdzS6rBt","CrashLanguageEN"),Object.defineProperty(a,"__esModule",{value:!0}),a.CRASH_LAN_EN=void 0,a.CRASH_LAN_EN={language:cc.sys.LANGUAGE_ENGLISH,data:{gameName:"\u0926\u0941 \u0930\u094d \u0918\u091f \u0928\u093e ",labPageName:"Lorem Ipsum",labManual:"Manual",labAuto:"Mobil",labSwitchRate:"Uang tunai otomatis",labRoundTitle:"jumlah taruhan",labStopProfitTitle:"Berhenti untuk menang",labStopLossTitle:"Hentikan Kerugian",labBetListTitle:"Putaran Saat Ini",labTotalBetCount:"Total {0} taruhan",labPlayerTtile:"Info Pengguna",labBetGoldTitle:"Jumlah Taruhan",labIncomeTitle:"Keuntungan",labStartTips:"Place your bet",labStopTips:"Stop bet",labRecordPageName:"Riwayat Dunia",InputBetGold:"Masukkan Jumlah Taruhan {0}-{1}",InputRate:"Silahkan masukkan peluang pembayaran otomatis",InputRound:"Silakan masukkan jumlah putaran otomatis",InputProfit:"Silakan masukkan Berhenti untuk menang",InputLoss:"Silakan masukkan Hentikan Kerugian",labCurrServerSeed:"Server Seed",labCurrServerSeedValue:"Ini akan ditayangkan besok",labPrevServerSeed:"Server Seed:\n(hash)",labPublicSeed:"Public Seed",labGameNo:"Game No. {0}",labPoint:"Point Tabrakan:",labRoundHash:"Round hash",labAcak:"Acak",labGameNoTitle:"Game No.",labDate:"Waktu",labBetRate:"Ledakan",labBetGold:"Pembayaran",labIncome:"Keuntungan",labMyRecordPageName:"Riwayat saya",stopProfitInvdicator:"Gunakan stop on profit untuk menghentikan autobet setelah mendapatkan keuntungan dalam jumlah tertentu. Misalnya, jika Anda memulai dengan Rp10000 dan menetapkan Stop on profit menjadi Rp1000: jika saldo Anda melebihi Rp11000, autobet akan berhenti.",stopLossInvdicator:"Gunakan stop on loss untuk menghentikan autobet setelah kehilangan jumlah tertentu. Misalnya, jika Anda memulai dengan Rp10000 dan mengatur Stop on loss ke Rp1000: jika saldo Anda di bawah Rp9000, maka autobet akan berhenti.",todayNotFind:"Tidak dapat melakukan kueri hari ini",cancelAutoBet:"Batalkan taruhan otomatis",nextBetGoldSucceed:"The next bet amount is {0} successful"}},cc._RF.pop()},{}],CrashLanguageHI:[function(t,e,a){"use strict";cc._RF.push(e,"b0225DL955OKaU7w9vNAiug","CrashLanguageHI"),Object.defineProperty(a,"__esModule",{value:!0}),a.CRASH_LAN_HI=void 0,a.CRASH_LAN_HI={language:cc.sys.LANGUAGE_HINDI,data:{gameName:"\u0926\u0941 \u0930\u094d \u0918\u091f \u0928\u093e ",labPageName:"Lorem Ipsum",labManual:"Manual",labAuto:"Mobil",labSwitchRate:"Uang tunai otomatis",labRoundTitle:"jumlah taruhan",labStopProfitTitle:"Berhenti untuk menang",labStopLossTitle:"Hentikan Kerugian",labBetListTitle:"Putaran Saat Ini",labTotalBetCount:"Total {0} taruhan",labPlayerTtile:"Info Pengguna",labBetGoldTitle:"Jumlah Taruhan",labIncomeTitle:"Keuntungan",labStartTips:"Place your bet",labStopTips:"Stop bet",labRecordPageName:"Riwayat Dunia",InputBetGold:"Masukkan Jumlah Taruhan {0}-{1}",InputRate:"Silahkan masukkan peluang pembayaran otomatis",InputRound:"Silakan masukkan jumlah putaran otomatis",InputProfit:"Silakan masukkan Berhenti untuk menang",InputLoss:"Silakan masukkan Hentikan Kerugian",labCurrServerSeed:"Server Seed",labCurrServerSeedValue:"Ini akan ditayangkan besok",labPrevServerSeed:"Server Seed:\n(hash)",labPublicSeed:"Public Seed",labGameNo:"Game No. {0}",labPoint:"Point Tabrakan:",labRoundHash:"Round hash",labAcak:"Acak",labGameNoTitle:"Game No.",labDate:"Waktu",labBetRate:"Ledakan",labBetGold:"Pembayaran",labIncome:"Keuntungan",labMyRecordPageName:"Riwayat saya",stopProfitInvdicator:"Gunakan stop on profit untuk menghentikan autobet setelah mendapatkan keuntungan dalam jumlah tertentu. Misalnya, jika Anda memulai dengan Rp10000 dan menetapkan Stop on profit menjadi Rp1000: jika saldo Anda melebihi Rp11000, autobet akan berhenti.",stopLossInvdicator:"Gunakan stop on loss untuk menghentikan autobet setelah kehilangan jumlah tertentu. Misalnya, jika Anda memulai dengan Rp10000 dan mengatur Stop on loss ke Rp1000: jika saldo Anda di bawah Rp9000, maka autobet akan berhenti.",todayNotFind:"Tidak dapat melakukan kueri hari ini",cancelAutoBet:"Batalkan taruhan otomatis",nextBetGoldSucceed:"The next bet amount is {0} successful"}},cc._RF.pop()},{}],CrashLanguageZH:[function(t,e,a){"use strict";cc._RF.push(e,"ae02fp0wWFHor9+4vtwUXsS","CrashLanguageZH"),Object.defineProperty(a,"__esModule",{value:!0}),a.CRASH_LAN_ZH=void 0,a.CRASH_LAN_ZH={language:cc.sys.LANGUAGE_CHINESE,data:{gameName:"\u7206\u70b9",labPageName:"\u7206\u70b9",labManual:"\u624b\u52a8\u4e0b\u6ce8",labAuto:"\u81ea\u52a8\u4e0b\u6ce8",labSwitchRate:"\u500d\u7387",labRoundTitle:"\u4e0b\u6ce8\u5c40\u6570",labStopProfitTitle:"\u6b62\u76c8",labStopLossTitle:"\u6b62\u635f",labBetListTitle:"\u4e0b\u6ce8\u73a9\u5bb6\u5217\u8868",labTotalBetCount:"\u603b\u91d1\u989d {0}",labPlayerTtile:"\u73a9\u5bb6",labBetGoldTitle:"\u7b79\u7801",labIncomeTitle:"\u6536\u76ca",InputBetGold:"Masukkan Jumlah Taruhan {0}-{1}",InputRate:"Silahkan masukkan peluang pembayaran otomatis",InputRound:"Silakan masukkan jumlah putaran otomatis",InputProfit:"Silakan masukkan Berhenti untuk menang",InputLoss:"Silakan masukkan Hentikan Kerugian"}},cc._RF.pop()},{}],CrashLogic:[function(t,e,a){"use strict";cc._RF.push(e,"5c9derz+C9EV4lxQyGRL1Vk","CrashLogic");var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(a,"__esModule",{value:!0});const s=t("../../../script/common/base/Logic"),o=t("../../../script/common/event/LogicEvent"),r=t("../../../script/common/manager/Manager"),n=t("../../../script/common/net/LobbyService"),l=t("../../../script/framework/assetManager/ResourceLoader"),h=t("./data/CrashGameData"),c=i(t("./view/CrashGameView"));r.Manager.logicManager.push(class extends s.Logic{constructor(){super(...arguments),this.logicType=o.LogicType.GAME}onLoad(){super.onLoad()}bindingEvents(){super.bindingEvents(),this.registerEvent(o.LogicEvent.ENTER_GAME,this.onEnterGame)}get bundle(){return"crash"}onEnterComplete(t){super.onEnterComplete(t),t.type==this.logicType||(this.removeNetComponent(),this._loader.unLoadResources())}onEnterGame(t){t.bundle==this.bundle?(this.data=t.data,r.Manager.gameData=h.Crash.gameData,r.Manager.gameData.clear(),this.onLanguageChange(),n.LobbyService.instance.pauseMessageQueue(),this._loader.loadResources()):(this.removeNetComponent(),this._loader.unLoadResources())}onLoadResourceComplete(t){t!=l.ResourceLoaderError.LOADING&&(cc.log(`${this.bundle}\u8d44\u6e90\u52a0\u8f7d\u5b8c\u6210!!!`),super.onLoadResourceComplete(t),r.Manager.uiManager.open({type:c.default,bundle:this.bundle,args:[this.data]}).then(()=>{n.LobbyService.instance.resumeMessageQueue()}).catch(t=>{n.LobbyService.instance.resumeMessageQueue(),cc.error(`\u6253\u5f00\u6e38\u620f\u754c\u9762\uff1a${c.default.name}\u65f6\u62a5\u9519\u4e86:`,t)}))}getLoadResources(){return[{preloadView:c.default,bundle:this.bundle}]}onLanguageChange(){super.onLanguageChange(),h.Crash.gameData.onLanguageChange()}}),cc._RF.pop()},{"../../../script/common/base/Logic":void 0,"../../../script/common/event/LogicEvent":void 0,"../../../script/common/manager/Manager":void 0,"../../../script/common/net/LobbyService":void 0,"../../../script/framework/assetManager/ResourceLoader":void 0,"./data/CrashGameData":"CrashGameData","./view/CrashGameView":"CrashGameView"}],CrashMyRecordItem:[function(t,e,a){"use strict";cc._RF.push(e,"0bbf1e55hVFOZr9XMra/0P3","CrashMyRecordItem");var i=this&&this.__decorate||function(t,e,a,i){var s,o=arguments.length,r=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,a):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,a,i);else for(var n=t.length-1;n>=0;n--)(s=t[n])&&(r=(o<3?s(r):o>3?s(e,a,r):s(e,a))||r);return o>3&&r&&Object.defineProperty(e,a,r),r},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(a,"__esModule",{value:!0});const o=t("../../../../script/common/manager/Manager"),r=t("../../../../script/common/net/LobbyService"),n=s(t("../../../../script/common/utils/NumberUtils")),l=t("../../../../script/framework/base/Defines"),h=t("../../../../script/framework/decorator/Decorators"),c=t("../../../../script/framework/event/EventApi"),d=s(t("../../../../script/framework/ui/UIView")),u=t("../define/CrashColorDefine"),{ccclass:p,property:g}=cc._decorator;let m=class extends d.default{constructor(){super(...arguments),this.labGameNoTitle=null,this.labDate=null,this.labBetRate=null,this.labBetGold=null,this.labIncome=null,this._data=null}onLoad(){super.onLoad(),this.initData(),this.initView()}start(){}initData(){this._data=null}initView(){this.labGameNoTitle.string="",this.labDate.string="",this.labBetRate.string="",this.labBetGold.string="",this.labIncome.string="",this.labIncome.node.color=u.CrashColorDefine.ProfitLoss.NORMAL}bindingEvents(){super.bindingEvents(),l.ENABLE_CHANGE_LANGUAGE&&this.registerEvent(c.EventApi.CHANGE_LANGUAGE,this.onLanguageChange)}onLanguageChange(){this.labGameNoTitle.language=o.Manager.makeLanguage("labGameNoTitle",!0),this.labDate.language=o.Manager.makeLanguage("labDate",!0),this.labBetRate.language=o.Manager.makeLanguage("labBetRate",!0),this.labBetGold.language=o.Manager.makeLanguage("labBetGold",!0),this.labIncome.language=o.Manager.makeLanguage("labIncome",!0)}getIncomeColor(t){return t<0?u.CrashColorDefine.ProfitLoss.RED:t>0?u.CrashColorDefine.ProfitLoss.GREEN:u.CrashColorDefine.ProfitLoss.NORMAL}getIncomeString(t){let e=n.default.converToC(t);return t>0&&(e=`+${e}`),e}onShow(t){this.onLanguageChange(),this._data=t,this.labGameNoTitle.string=t.gameNo.toString(),this.labDate.string=new Date(Number(t.betTimestamp)).format("MM/dd hh:mm"),this.labBetRate.string=n.default.converToC(t.betMulti),this.labBetGold.string=n.default.converToC(t.betGold),this.labIncome.string=this.getIncomeString(t.incomeGold),this.labIncome.node.color=this.getIncomeColor(t.incomeGold)}reset(){this.initData(),this.initView()}};i([g(cc.Label)],m.prototype,"labGameNoTitle",void 0),i([g(cc.Label)],m.prototype,"labDate",void 0),i([g(cc.Label)],m.prototype,"labBetRate",void 0),i([g(cc.Label)],m.prototype,"labBetGold",void 0),i([g(cc.Label)],m.prototype,"labIncome",void 0),m=i([p,h.injectService(r.LobbyService.instance)],m),a.default=m,cc._RF.pop()},{"../../../../script/common/manager/Manager":void 0,"../../../../script/common/net/LobbyService":void 0,"../../../../script/common/utils/NumberUtils":void 0,"../../../../script/framework/base/Defines":void 0,"../../../../script/framework/decorator/Decorators":void 0,"../../../../script/framework/event/EventApi":void 0,"../../../../script/framework/ui/UIView":void 0,"../define/CrashColorDefine":"CrashColorDefine"}],CrashMyRecordView:[function(t,e,a){"use strict";cc._RF.push(e,"24b448yqQNEDLueSt3Z+ohN","CrashMyRecordView");var i=this&&this.__decorate||function(t,e,a,i){var s,o=arguments.length,r=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,a):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,a,i);else for(var n=t.length-1;n>=0;n--)(s=t[n])&&(r=(o<3?s(r):o>3?s(e,a,r):s(e,a))||r);return o>3&&r&&Object.defineProperty(e,a,r),r},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(a,"__esModule",{value:!0});const o=s(t("../../../../script/common/component/ListView")),r=s(t("../../../../script/common/item/NoneItem")),n=s(t("../../../../script/common/item/TitleItemPage")),l=t("../../../../script/common/manager/Manager"),h=t("../../../../script/common/net/LobbyService"),c=s(t("../../../../script/common/utils/TypeUtils")),d=s(t("../../../../script/data/AppData")),u=t("../../../../script/framework/base/Defines"),p=t("../../../../script/framework/decorator/Decorators"),g=t("../../../../script/framework/event/EventApi"),m=t("../../../../script/framework/external/protoc"),b=s(t("../../../../script/framework/ui/UIView")),C=s(t("../../../../script/msgbox/PanelHelp")),{ccclass:f,property:_}=cc._decorator;let R=class extends b.default{constructor(){super(...arguments),this.labGameNoTitle=null,this.labDate=null,this.labBetRate=null,this.labBetGold=null,this.labIncome=null,this.lsvRecord=null,this.titleItemPage=null,this.noneItem=null,this._appData=null,this._isLastPage=!1,this._dataList=null}static getPrefabUrl(){return"prefabs/CrashMyRecordView"}onLoad(){super.onLoad(),this.initData(),this.initView(),this.C2S_CrashMyRecord()}start(){}show(t){super.show(t),this.onLanguageChange()}initData(){this._appData=G.DataMgr.get(d.default),this._isLastPage=!1,this._dataList=[]}initView(){this.labGameNoTitle.string="",this.labDate.string="",this.labBetRate.string="",this.labBetGold.string="",this.labIncome.string="",this.noneItem.node.active=!1}bindingEvents(){super.bindingEvents(),u.ENABLE_CHANGE_LANGUAGE&&this.registerEvent(g.EventApi.CHANGE_LANGUAGE,this.onLanguageChange),this.registerEvent("Event_S2C_CrashMyRecord",this.onEvent_S2C_CrashMyRecord)}onLanguageChange(){this.titleItemPage.languagePageName(l.Manager.makeLanguage("labMyRecordPageName",!0)),this.labGameNoTitle.language=l.Manager.makeLanguage("labGameNoTitle",!0),this.labDate.language=l.Manager.makeLanguage("labDate",!0),this.labBetRate.language=l.Manager.makeLanguage("labBetRate",!0),this.labBetGold.language=l.Manager.makeLanguage("labBetGold",!0),this.labIncome.language=l.Manager.makeLanguage("labIncome",!0)}getLastRecordId(){let t=-1;return this._dataList.length>0&&(t=this._dataList[this._dataList.length-1].id),t}C2S_CrashMyRecord(t){c.default.isNull(t)&&(t=-1);let e={serial:l.Manager.netManager.getNewSeqId(),id:t,count:20},a=m.MST.C2S_CrashMyRecord.create(e),i=m.MST.C2S_CrashMyRecord.encode(a).finish();this.service.sendMsg(m.MST.C2S_CrashMyRecord,m.MST.OuterOpcode_CrashGame.C2S_CrashMyRecord,i)}onEvent_S2C_CrashMyRecord(t){0===t.code?(-1===t.id&&t.myRecordInfo.length<=0?(this.noneItem.node.active=!0,this.lsvRecord.node.active=!1):(this.noneItem.node.active=!1,this.lsvRecord.node.active=!0),this._isLastPage=t.myRecordInfo.length<20,-1===t.id?(this._dataList=[].concat(t.myRecordInfo),this.lsvRecord.set(t.myRecordInfo)):(this._dataList=this._dataList.concat(t.myRecordInfo),this.lsvRecord.insert(t.myRecordInfo))):C.default.showErrTip(t.code)}onClick(t,e,a){switch(t){case"btnClose":this.close()}}onPullTop(t){this.C2S_CrashMyRecord()}onPullBottom(t){this._isLastPage?G.Logger.log("Crash \u6d4f\u89c8\u4e2a\u4eba\u5386\u53f2\u8bb0\u5f55 \u5df2\u662f\u6700\u540e\u4e00\u9875 \u65e0\u9700\u8bf7\u6c42\u7ffb\u9875"):this.C2S_CrashMyRecord(this.getLastRecordId())}};i([_(cc.Label)],R.prototype,"labGameNoTitle",void 0),i([_(cc.Label)],R.prototype,"labDate",void 0),i([_(cc.Label)],R.prototype,"labBetRate",void 0),i([_(cc.Label)],R.prototype,"labBetGold",void 0),i([_(cc.Label)],R.prototype,"labIncome",void 0),i([_(o.default)],R.prototype,"lsvRecord",void 0),i([_(n.default)],R.prototype,"titleItemPage",void 0),i([_(r.default)],R.prototype,"noneItem",void 0),R=i([f,p.injectService(h.LobbyService.instance)],R),a.default=R,cc._RF.pop()},{"../../../../script/common/component/ListView":void 0,"../../../../script/common/item/NoneItem":void 0,"../../../../script/common/item/TitleItemPage":void 0,"../../../../script/common/manager/Manager":void 0,"../../../../script/common/net/LobbyService":void 0,"../../../../script/common/utils/TypeUtils":void 0,"../../../../script/data/AppData":void 0,"../../../../script/framework/base/Defines":void 0,"../../../../script/framework/decorator/Decorators":void 0,"../../../../script/framework/event/EventApi":void 0,"../../../../script/framework/external/protoc":void 0,"../../../../script/framework/ui/UIView":void 0,"../../../../script/msgbox/PanelHelp":void 0}],CrashNetController:[function(t,e,a){"use strict";cc._RF.push(e,"38177rPutFL8Jw+gM0UDclH","CrashNetController");var i=this&&this.__decorate||function(t,e,a,i){var s,o=arguments.length,r=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,a):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,a,i);else for(var n=t.length-1;n>=0;n--)(s=t[n])&&(r=(o<3?s(r):o>3?s(e,a,r):s(e,a))||r);return o>3&&r&&Object.defineProperty(e,a,r),r},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(a,"__esModule",{value:!0});const o=t("../../../../script/common/manager/Manager"),r=t("../../../../script/common/net/CmdResStruct"),n=t("../../../../script/common/net/LobbyService"),l=s(t("../../../../script/data/AppData")),h=s(t("../../../../script/data/UserData")),c=s(t("../../../../script/framework/controller/Controller")),d=t("../../../../script/framework/decorator/Decorators"),u=t("../../../../script/framework/external/protoc"),p=s(t("../data/CrashData")),g=t("../define/CrashDefine"),{ccclass:m,property:b}=cc._decorator;let C=class extends c.default{bindingEvents(){super.bindingEvents(),this.registerRes(),this.registerEvent(u.MST.OuterOpcode_CrashGame.M2C_GetCrashInfo_Res,this.onM2C_GetCrashInfo_Res),this.registerEvent(u.MST.OuterOpcode_CrashGame.M2C_CrashStart_mes,this.onM2C_CrashStart_mes),this.registerEvent(u.MST.OuterOpcode_CrashGame.M2C_MyCrashBet_Res,this.onM2C_MyCrashBet_Res),this.registerEvent(u.MST.OuterOpcode_CrashGame.M2C_CrashBet_Mes,this.onM2C_CrashBet_Mes),this.registerEvent(u.MST.OuterOpcode_CrashGame.M2C_CrashStop_Mes,this.onM2C_CrashStop_Mes),this.registerEvent(u.MST.OuterOpcode_CrashGame.M2C_CrashStartBet_Mes,this.onM2C_CrashStartBet_Mes),this.registerEvent(u.MST.OuterOpcode_CrashGame.M2C_CrashEscape_Mes,this.onM2C_CrashEscape_Mes),this.registerEvent(u.MST.OuterOpcode_CrashGame.M2C_CrashStopBet_Mes,this.onM2C_CrashStopBet_Mes),this.registerEvent(u.MST.OuterOpcode_CrashGame.M2C_CrashCancelAutoBet_Res,this.onM2C_CrashCancelAutoBet_Res),this.registerEvent(u.MST.OuterOpcode_CrashGame.M2C_CrashCancelAutoBet_Mes,this.onM2C_CrashCancelAutoBet_Mes),this.registerEvent(u.MST.OuterOpcode_CrashGame.M2C_CrashHash_Mes,this.onM2C_CrashHash_Mes),this.registerEvent(u.MST.OuterOpcode_CrashGame.M2C_CrashHashRecord_Res,this.onM2C_CrashHashRecord_Res),this.registerEvent(u.MST.OuterOpcode_CrashGame.S2C_CrashMyRecord,this.onS2C_CrashMyRecord),this.registerEvent(u.MST.OuterOpcode_Map.M2C_TransferMap_Res,this.onM2C_TransferMap_Res)}registerRes(){r.CmdResStruct.register(u.MST.OuterOpcode_CrashGame.M2C_GetCrashInfo_Res,u.MST.M2C_GetCrashInfo_Res),r.CmdResStruct.register(u.MST.OuterOpcode_CrashGame.M2C_CrashStart_mes,u.MST.M2C_CrashStart_mes),r.CmdResStruct.register(u.MST.OuterOpcode_CrashGame.M2C_MyCrashBet_Res,u.MST.M2C_MyCrashBet_Res),r.CmdResStruct.register(u.MST.OuterOpcode_CrashGame.M2C_CrashBet_Mes,u.MST.M2C_CrashBet_Mes),r.CmdResStruct.register(u.MST.OuterOpcode_CrashGame.M2C_CrashStop_Mes,u.MST.M2C_CrashStop_Mes),r.CmdResStruct.register(u.MST.OuterOpcode_CrashGame.M2C_CrashStartBet_Mes,u.MST.M2C_CrashStartBet_Mes),r.CmdResStruct.register(u.MST.OuterOpcode_CrashGame.M2C_CrashEscape_Mes,u.MST.M2C_CrashEscape_Mes),r.CmdResStruct.register(u.MST.OuterOpcode_CrashGame.M2C_CrashStopBet_Mes,u.MST.M2C_CrashStopBet_Mes),r.CmdResStruct.register(u.MST.OuterOpcode_CrashGame.M2C_CrashCancelAutoBet_Res,u.MST.M2C_CrashCancelAutoBet_Res),r.CmdResStruct.register(u.MST.OuterOpcode_CrashGame.M2C_CrashCancelAutoBet_Mes,u.MST.M2C_CrashCancelAutoBet_Mes),r.CmdResStruct.register(u.MST.OuterOpcode_CrashGame.M2C_CrashHash_Mes,u.MST.M2C_CrashHash_Mes),r.CmdResStruct.register(u.MST.OuterOpcode_CrashGame.M2C_CrashHashRecord_Res,u.MST.M2C_CrashHashRecord_Res),r.CmdResStruct.register(u.MST.OuterOpcode_CrashGame.S2C_CrashMyRecord,u.MST.S2C_CrashMyRecord),r.CmdResStruct.register(u.MST.OuterOpcode_Map.M2C_TransferMap_Res,u.MST.M2C_TransferMap_Res)}onM2C_GetCrashInfo_Res(t){let e=G.DataMgr.get(p.default);e.betList.length=0,e.myBetList.length=0,e.rateRecordList.length=0;for(let i of t.Bets){let t={betInfo:i,isEscape:e.getRate()>=i.Multiple};e.betList.push(t)}for(let i of t.MyBet){let t={betInfo:i,isEscape:e.getRate()>=i.Multiple};e.myBetList.push(t)}e.betPlayerMap.clear();let a=0;for(let i=e.myBetList.length-1;i>=0;--i)e.betPlayerMap.set(a++,e.myBetList[i]);for(let i=e.betList.length-1;i>=0&&(e.betPlayerMap.set(a++,e.betList[i]),!(e.betPlayerMap.size>=g.CrashDefine.BET_LIST_COUNT));--i);switch(e.status=t.Status,e.status){case u.MST.CrashStatus.StartBet:e.stopBetTimestamp=Number(t.StartTimeStamp);break;case u.MST.CrashStatus.GameBegin:e.startGameTimestamp=Number(t.StartTimeStamp);break;case u.MST.CrashStatus.GameOver:t.Multi=t.MultipleRecord[t.MultipleRecord.length-1];break;default:e.stopBetTimestamp=0,e.startGameTimestamp=0}e.rateRecordList=[].concat(t.MultipleRecord),e.betTotalGold=Number(t.TotalGold),e.betTotalCount=Number(t.TotalPlayer),e.autoBetData=t.AtuoBetInfo,e.hashInfo.serverSeed=t.SeedInfo.ServerSeedHash,e.hashInfo.publicSeed=t.SeedInfo.PublicSeed,e.hashInfo.gameNo=t.GameNo,t.Multi&&(e.roundBombRate=Number(t.Multi)),dispatch("Event_M2C_GetCrashInfo_Res",t)}onM2C_CrashStart_mes(t){let e=G.DataMgr.get(p.default);e.status=u.MST.CrashStatus.GameBegin,e.startGameTimestamp=Number(t.StartTimeStamp),t.Multi&&(e.roundBombRate=Number(t.Multi)),dispatch("Event_M2C_CrashStart_mes",t)}onM2C_MyCrashBet_Res(t){dispatch("Event_M2C_MyCrashBet_Res",t)}onM2C_CrashBet_Mes(t){let e=G.DataMgr.get(p.default),a=G.DataMgr.get(h.default);e.betTotalGold=Number(t.TotalGold),e.betTotalCount=Number(t.TotalPlayer);for(let s of t.Bets){let t={betInfo:s,isEscape:!1};s.player.UnitId===a.id?e.myBetList.push(t):e.betList.push(t)}e.betPlayerMap.clear();let i=0;for(let s=e.myBetList.length-1;s>=0;--s)e.betPlayerMap.set(i++,e.myBetList[s]);for(let s=e.betList.length-1;s>=0&&(e.betPlayerMap.set(i++,e.betList[s]),!(e.betPlayerMap.size>=g.CrashDefine.BET_LIST_COUNT));--s);dispatch("Event_M2C_CrashBet_Mes",t)}onM2C_CrashStop_Mes(t){let e=G.DataMgr.get(p.default);e.status=u.MST.CrashStatus.GameOver,e.rateRecordList.push(Number(t.Multiples)),e.bombTimestamp=Number(t.ExplosionTimeStamp),e.hashInfo.roundHash=t.HashResult,e.hashInfo.acak=t.Acak,e.hashInfo.point=Number(t.Multiples),dispatch("Event_M2C_CrashStop_Mes",t)}onM2C_CrashStartBet_Mes(t){let e=G.DataMgr.get(p.default),a=G.DataMgr.get(l.default);e.initNext(),e.status=u.MST.CrashStatus.StartBet,e.startBetTimestamp=a.getServerTimestamp(),e.stopBetTimestamp=Number(t.StopBetTimeStamp),e.hashInfo.gameNo=t.GameNo,e.roundBombRate=null,dispatch("Event_M2C_CrashStartBet_Mes",t)}onM2C_CrashEscape_Mes(t){dispatch("Event_M2C_CrashEscape_Mes",t)}onM2C_CrashStopBet_Mes(t){G.DataMgr.get(p.default).status=u.MST.CrashStatus.StopBet,dispatch("Event_M2C_CrashStopBet_Mes",t)}onM2C_CrashCancelAutoBet_Res(t){G.DataMgr.get(p.default).autoBetData=null,dispatch("Event_M2C_CrashCancelAutoBet_Res",t)}onM2C_CrashCancelAutoBet_Mes(t){G.DataMgr.get(p.default).autoBetData=null,dispatch("Event_M2C_CrashCancelAutoBet_Mes",t)}onM2C_CrashHash_Mes(t){let e=G.DataMgr.get(p.default);e.hashInfo.serverSeed=t.SeedInfo.ServerSeed,e.hashInfo.serverSeedHash=t.SeedInfo.ServerSeedHash,e.hashInfo.publicSeed=t.SeedInfo.PublicSeed,dispatch("Event_M2C_CrashHash_Mes",t)}onM2C_CrashHashRecord_Res(t){G.DataMgr.get(p.default).totalRecordData=t,dispatch("Event_M2C_CrashHashRecord_Res",t)}onS2C_CrashMyRecord(t){dispatch("Event_S2C_CrashMyRecord",t)}onM2C_TransferMap_Res(t){G.DataMgr.get(h.default).inGame=t.RoomName,dispatch("Event_M2C_TransferMap_Res",t)}};C=i([m,d.injectService(n.LobbyService.instance)],C),a.default=C,o.Manager.netManager.push(C),cc._RF.pop()},{"../../../../script/common/manager/Manager":void 0,"../../../../script/common/net/CmdResStruct":void 0,"../../../../script/common/net/LobbyService":void 0,"../../../../script/data/AppData":void 0,"../../../../script/data/UserData":void 0,"../../../../script/framework/controller/Controller":void 0,"../../../../script/framework/decorator/Decorators":void 0,"../../../../script/framework/external/protoc":void 0,"../data/CrashData":"CrashData","../define/CrashDefine":"CrashDefine"}],CrashRateDefine:[function(t,e,a){"use strict";cc._RF.push(e,"2c40cULFVRP4pAJtg2tASSj","CrashRateDefine"),Object.defineProperty(a,"__esModule",{value:!0}),a.CrashRateDefine=void 0,function(t){let e;t.RateInterval=[{rate:1,move:.05,append:.01,startTime:0},{rate:1.21,move:.06,append:.01,startTime:3},{rate:1.45,move:.1,append:0,startTime:6},{rate:1.75,move:.12,append:0,startTime:9},{rate:2.11,move:.14,append:0,startTime:12},{rate:2.39,move:.14,append:.02,startTime:14},{rate:2.73,move:.13,append:.03,startTime:16},{rate:3.08,move:.21,append:0,startTime:18},{rate:3.71,move:.22,append:.02,startTime:21},{rate:4.49,move:.27,append:.02,startTime:24},{rate:5.09,move:.32,append:0,startTime:26},{rate:5.73,move:.36,append:.02,startTime:28},{rate:7.37,move:.44,append:.03,startTime:32},{rate:9.43,move:.56,append:.04,startTime:36},{rate:12.07,move:.72,append:.05,startTime:40},{rate:17.44,move:1.02,append:.1,startTime:46},{rate:22.52,move:1.42,append:.12,startTime:50},{rate:31.42,move:2.02,append:.15,startTime:55}],function(t){t[t.RED=100]="RED",t[t.GREEN=120]="GREEN",t[t.BLUE=200]="BLUE",t[t.YEELOW=2e3]="YEELOW"}(e=t.ColorRate||(t.ColorRate={}))}(a.CrashRateDefine||(a.CrashRateDefine={})),cc._RF.pop()},{}],CrashRecordItem:[function(t,e,a){"use strict";cc._RF.push(e,"6dd53mKcoVHY7AAwkFceOZW","CrashRecordItem");var i=this&&this.__decorate||function(t,e,a,i){var s,o=arguments.length,r=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,a):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,a,i);else for(var n=t.length-1;n>=0;n--)(s=t[n])&&(r=(o<3?s(r):o>3?s(e,a,r):s(e,a))||r);return o>3&&r&&Object.defineProperty(e,a,r),r},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(a,"__esModule",{value:!0});const o=t("../../../../script/common/net/LobbyService"),r=s(t("../../../../script/common/utils/NumberUtils")),n=t("../../../../script/framework/decorator/Decorators"),l=s(t("../../../../script/framework/ui/UIView")),h=t("../define/CrashColorDefine"),c=t("../define/CrashRateDefine"),{ccclass:d,property:u}=cc._decorator;let p=class extends l.default{constructor(){super(...arguments),this.imgBg=null,this.labRate=null,this._rate=null}onLoad(){super.onLoad(),this.initData(),this.initView()}start(){}initData(){this._rate=null}initView(){this.imgBg.node.active=!1,this.labRate.string=""}refreshValue(){this.imgBg.node.active=null!==this._rate,this.labRate.string=r.default.converToC(this._rate)}refreshColor(){if(isNaN(this._rate))return;let t=h.CrashColorDefine.Record.WHITE;this._rate>=c.CrashRateDefine.ColorRate.YEELOW?t=h.CrashColorDefine.Record.YEELOW:this._rate>=c.CrashRateDefine.ColorRate.BLUE?t=h.CrashColorDefine.Record.BLUE:this._rate>=c.CrashRateDefine.ColorRate.GREEN?t=h.CrashColorDefine.Record.GREEN:this._rate>=c.CrashRateDefine.ColorRate.RED&&(t=h.CrashColorDefine.Record.RED),this.labRate.node.color=t}setRate(t){this._rate=t,this.refreshValue(),this.refreshColor()}clear(){this.initData(),this.initView()}};i([u(cc.Sprite)],p.prototype,"imgBg",void 0),i([u(cc.Label)],p.prototype,"labRate",void 0),p=i([d,n.injectService(o.LobbyService.instance)],p),a.default=p,cc._RF.pop()},{"../../../../script/common/net/LobbyService":void 0,"../../../../script/common/utils/NumberUtils":void 0,"../../../../script/framework/decorator/Decorators":void 0,"../../../../script/framework/ui/UIView":void 0,"../define/CrashColorDefine":"CrashColorDefine","../define/CrashRateDefine":"CrashRateDefine"}],CrashTotalRecordItem:[function(t,e,a){"use strict";cc._RF.push(e,"6aab0BVs7dOEZvS/o0OUXeP","CrashTotalRecordItem");var i=this&&this.__decorate||function(t,e,a,i){var s,o=arguments.length,r=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,a):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,a,i);else for(var n=t.length-1;n>=0;n--)(s=t[n])&&(r=(o<3?s(r):o>3?s(e,a,r):s(e,a))||r);return o>3&&r&&Object.defineProperty(e,a,r),r},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(a,"__esModule",{value:!0});const o=t("../../../../script/common/manager/Manager"),r=t("../../../../script/common/net/LobbyService"),n=s(t("../../../../script/common/utils/NumberUtils")),l=s(t("../../../../script/common/utils/TypeUtils")),h=t("../../../../script/framework/base/Defines"),c=t("../../../../script/framework/decorator/Decorators"),d=t("../../../../script/framework/event/EventApi"),u=s(t("../../../../script/framework/extentions/DateUtils")),p=s(t("../../../../script/framework/ui/UIView")),g=s(t("../../../../script/msgbox/PanelHelp")),m=t("../config/CrashConfig"),b=s(t("../data/CrashData")),{ccclass:C,property:f}=cc._decorator;let _=class extends p.default{constructor(){super(...arguments),this.labGameNo=null,this.labDate=null,this.labRoundHash=null,this.labRoundHashValue=null,this.labAcak=null,this.labAcakValue=null,this.labPoint=null,this.labPointValue=null,this.labCheck=null,this.imgLine=null,this._data=null}onLoad(){super.onLoad(),this.initData(),this.initView()}start(){}initData(){this._data=null}initView(){this.labGameNo.string="",this.labDate.string="",this.labRoundHash.string="",this.labRoundHashValue.string="",this.labAcak.string="",this.labAcakValue.string="",this.labPoint.string="",this.labPointValue.string=""}bindingEvents(){super.bindingEvents(),h.ENABLE_CHANGE_LANGUAGE&&this.registerEvent(d.EventApi.CHANGE_LANGUAGE,this.onLanguageChange)}onLanguageChange(){this.labPoint.language=o.Manager.makeLanguage("labPoint",!0),this.labRoundHash.language=o.Manager.makeLanguage("labRoundHash",!0),this.labAcak.language=o.Manager.makeLanguage("labAcak",!0)}onShow(t){this.onLanguageChange(),this._data=t,this.labGameNo.language=o.Manager.makeLanguage(["labGameNo",t.GameNo],!0),this.labDate.string=u.default.getYMDHMS(t.Timestamp),this.labPointValue.string=`${n.default.converToC(t.Multiple)}x`,this.labRoundHashValue.string=t.RoundHashCell.RoundHash,this.labAcakValue.string=t.RoundHashCell.Acak.toString()}reset(){this.initData(),this.initView()}openCheckWeb(){let t=G.DataMgr.get(b.default),e=t.totalRecordData.SeedInfo.ServerSeed;if(l.default.isNull(e)||e.length<=0)return void g.default.showTip(o.Manager.makeLanguage("todayNotFind",!0));let a=t.totalRecordData.SeedInfo.PublicSeed,i=this._data.GameNo,s=`${m.CrashConfig.CHECK_SHA256_URL}${e}${a}${i}`;cc.sys.openURL(s)}onClick(t,e,a){switch(t){case"btnCheck":this.openCheckWeb()}}};i([f(cc.Label)],_.prototype,"labGameNo",void 0),i([f(cc.Label)],_.prototype,"labDate",void 0),i([f(cc.Label)],_.prototype,"labRoundHash",void 0),i([f(cc.Label)],_.prototype,"labRoundHashValue",void 0),i([f(cc.Label)],_.prototype,"labAcak",void 0),i([f(cc.Label)],_.prototype,"labAcakValue",void 0),i([f(cc.Label)],_.prototype,"labPoint",void 0),i([f(cc.Label)],_.prototype,"labPointValue",void 0),i([f(cc.Label)],_.prototype,"labCheck",void 0),i([f(cc.Sprite)],_.prototype,"imgLine",void 0),_=i([C,c.injectService(r.LobbyService.instance)],_),a.default=_,cc._RF.pop()},{"../../../../script/common/manager/Manager":void 0,"../../../../script/common/net/LobbyService":void 0,"../../../../script/common/utils/NumberUtils":void 0,"../../../../script/common/utils/TypeUtils":void 0,"../../../../script/framework/base/Defines":void 0,"../../../../script/framework/decorator/Decorators":void 0,"../../../../script/framework/event/EventApi":void 0,"../../../../script/framework/extentions/DateUtils":void 0,"../../../../script/framework/ui/UIView":void 0,"../../../../script/msgbox/PanelHelp":void 0,"../config/CrashConfig":"CrashConfig","../data/CrashData":"CrashData"}],CrashTotalRecordView:[function(t,e,a){"use strict";cc._RF.push(e,"086f8XlpV5FILBYwk0EmAKh","CrashTotalRecordView");var i=this&&this.__decorate||function(t,e,a,i){var s,o=arguments.length,r=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,a):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,a,i);else for(var n=t.length-1;n>=0;n--)(s=t[n])&&(r=(o<3?s(r):o>3?s(e,a,r):s(e,a))||r);return o>3&&r&&Object.defineProperty(e,a,r),r},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(a,"__esModule",{value:!0});const o=s(t("../../../../script/common/component/ListView")),r=s(t("../../../../script/common/item/NoneItem")),n=s(t("../../../../script/common/item/TitleItemPage")),l=t("../../../../script/common/manager/Manager"),h=t("../../../../script/common/net/LobbyService"),c=s(t("../../../../script/common/utils/TypeUtils")),d=s(t("../../../../script/data/AppData")),u=t("../../../../script/framework/base/Defines"),p=t("../../../../script/framework/decorator/Decorators"),g=t("../../../../script/framework/event/EventApi"),m=s(t("../../../../script/framework/extentions/DateUtils")),b=t("../../../../script/framework/external/protoc"),C=s(t("../../../../script/framework/ui/UIView")),f=s(t("../../../../script/msgbox/PanelHelp")),{ccclass:_,property:R}=cc._decorator;let v=class extends C.default{constructor(){super(...arguments),this.btnLeft=null,this.labDate=null,this.btnRight=null,this.labCurrServerSeed=null,this.labCurrServerSeedValue=null,this.labPrevServerSeed=null,this.labPrevServerSeedValue=null,this.labPublicSeed=null,this.labPublicSeedValue=null,this.lsvRecord=null,this.titleItemPage=null,this.noneItem=null,this._appData=null,this._currFindTimestamp=null,this._isLastPage=!1,this._todayRecordDataList=null}static getPrefabUrl(){return"prefabs/CrashTotalRecordView"}onLoad(){super.onLoad(),this.initData(),this.initView(),this.C2M_CrashHashRecord_Req(this._currFindTimestamp)}start(){}show(t){super.show(t),this.onLanguageChange()}initData(){this._appData=G.DataMgr.get(d.default),this._currFindTimestamp=m.default.getDayTimestamp(this._appData.getClientTimestamp()),this._isLastPage=!1,this._todayRecordDataList=[]}initView(){this.btnRight.interactable=!1,this.labDate.string=m.default.getYMD(this._currFindTimestamp,"-"),this.labCurrServerSeedValue.string="",this.labPrevServerSeedValue.string="",this.labPublicSeedValue.string="",this.noneItem.node.active=!1}bindingEvents(){super.bindingEvents(),u.ENABLE_CHANGE_LANGUAGE&&this.registerEvent(g.EventApi.CHANGE_LANGUAGE,this.onLanguageChange),this.registerEvent("Event_M2C_CrashHashRecord_Res",this.onEvent_M2C_CrashHashRecord_Res)}onLanguageChange(){this.titleItemPage.languagePageName(l.Manager.makeLanguage("labRecordPageName",!0)),this.labCurrServerSeed.language=l.Manager.makeLanguage("labCurrServerSeed",!0),this.labPrevServerSeed.language=l.Manager.makeLanguage("labPrevServerSeed",!0),this.labPublicSeed.language=l.Manager.makeLanguage("labPublicSeed",!0)}refreshLeftRightBtn(){this._currFindTimestamp>=m.default.getDayTimestamp(this._appData.getClientTimestamp())?this.btnRight.interactable=!1:this.btnRight.interactable=!0,this.btnLeft.interactable=!0,this._currFindTimestamp<=m.default.getTimestampByDate(m.default.getDayBeforeAfter(this._appData.getClientTimestamp(),-6))&&(this.btnLeft.interactable=!1)}getLastRecordId(){let t=-1;return this._todayRecordDataList.length>0&&(t=this._todayRecordDataList[this._todayRecordDataList.length-1].ID),t}clickPrevDayData(){let t=this._currFindTimestamp-864e5;this._todayRecordDataList.length=0,this._isLastPage=!1,this.C2M_CrashHashRecord_Req(t)}clickNextDayData(){let t=this._currFindTimestamp+864e5;this._todayRecordDataList.length=0,this._isLastPage=!1,this.C2M_CrashHashRecord_Req(t)}C2M_CrashHashRecord_Req(t,e){c.default.isNull(e)&&(e=-1);let a={RpcId:l.Manager.netManager.getNewSeqId(),Date:m.default.getYMD(t,"-"),ID:e,PageNumber:20},i=b.MST.C2M_CrashHashRecord_Req.create(a),s=b.MST.C2M_CrashHashRecord_Req.encode(i).finish();this.service.sendMsg(b.MST.C2M_CrashHashRecord_Req,b.MST.OuterOpcode_CrashGame.C2M_CrashHashRecord_Req,s)}onEvent_M2C_CrashHashRecord_Res(t){0===t.Error?(t.SeedInfo.ServerSeed.length<=0?this.labCurrServerSeedValue.language=l.Manager.makeLanguage("labCurrServerSeedValue",!0):this.labCurrServerSeedValue.string=t.SeedInfo.ServerSeed,-1===t.ID&&t.RecordInfo.length<=0?(this.noneItem.node.active=!0,this.lsvRecord.node.active=!1):(this.noneItem.node.active=!1,this.lsvRecord.node.active=!0),this._isLastPage=t.RecordInfo.length<20,this.labDate.string=t.Date,this._currFindTimestamp=m.default.getTimestampByDate(t.Date),this.labPrevServerSeedValue.string=t.SeedInfo.ServerSeedHash,this.labPublicSeedValue.string=t.SeedInfo.PublicSeed,-1===t.ID?(this._todayRecordDataList=[].concat(t.RecordInfo),this.lsvRecord.set(t.RecordInfo)):(this._todayRecordDataList=this._todayRecordDataList.concat(t.RecordInfo),this.lsvRecord.insert(t.RecordInfo)),this.refreshLeftRightBtn()):f.default.showErrTip(t.Error)}onClick(t,e,a){switch(t){case"btnLeft":this.clickPrevDayData();break;case"btnRight":this.clickNextDayData();break;case"btnClose":this.close()}}onPullTop(t){this.C2M_CrashHashRecord_Req(this._currFindTimestamp)}onPullBottom(t){this._isLastPage?G.Logger.log("Crash \u6d4f\u89c8\u603b\u5386\u53f2\u8bb0\u5f55 \u5df2\u662f\u6700\u540e\u4e00\u9875 \u65e0\u9700\u8bf7\u6c42\u7ffb\u9875"):this.C2M_CrashHashRecord_Req(this._currFindTimestamp,this.getLastRecordId())}};i([R(cc.Button)],v.prototype,"btnLeft",void 0),i([R(cc.Label)],v.prototype,"labDate",void 0),i([R(cc.Button)],v.prototype,"btnRight",void 0),i([R(cc.Label)],v.prototype,"labCurrServerSeed",void 0),i([R(cc.Label)],v.prototype,"labCurrServerSeedValue",void 0),i([R(cc.Label)],v.prototype,"labPrevServerSeed",void 0),i([R(cc.Label)],v.prototype,"labPrevServerSeedValue",void 0),i([R(cc.Label)],v.prototype,"labPublicSeed",void 0),i([R(cc.Label)],v.prototype,"labPublicSeedValue",void 0),i([R(o.default)],v.prototype,"lsvRecord",void 0),i([R(n.default)],v.prototype,"titleItemPage",void 0),i([R(r.default)],v.prototype,"noneItem",void 0),v=i([_,p.injectService(h.LobbyService.instance)],v),a.default=v,cc._RF.pop()},{"../../../../script/common/component/ListView":void 0,"../../../../script/common/item/NoneItem":void 0,"../../../../script/common/item/TitleItemPage":void 0,"../../../../script/common/manager/Manager":void 0,"../../../../script/common/net/LobbyService":void 0,"../../../../script/common/utils/TypeUtils":void 0,"../../../../script/data/AppData":void 0,"../../../../script/framework/base/Defines":void 0,"../../../../script/framework/decorator/Decorators":void 0,"../../../../script/framework/event/EventApi":void 0,"../../../../script/framework/extentions/DateUtils":void 0,"../../../../script/framework/external/protoc":void 0,"../../../../script/framework/ui/UIView":void 0,"../../../../script/msgbox/PanelHelp":void 0}],CrashUtils:[function(t,e,a){"use strict";cc._RF.push(e,"c9abfXz6LRLwKAY1js5vfAu","CrashUtils");var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(a,"__esModule",{value:!0});const s=i(t("../../../../script/common/utils/NumberUtils")),o=i(t("../../../../script/framework/extentions/Operation")),r=t("../define/CrashRateDefine");a.default=class{static getRateByRunTime(t){if(t<=0)return G.Logger.warn(`\u500d\u7387\u8d1f\u6570 ${t}`),null;let e=null,a=r.CrashRateDefine.RateInterval[r.CrashRateDefine.RateInterval.length-1];if(t<o.default.mul(a.startTime,1e3))for(let s of r.CrashRateDefine.RateInterval){if(o.default.mul(s.startTime,1e3)>t)break;e=s}else e=a;let i=o.default.sub(o.default.div(t,1e3),e.startTime),n=e.rate+e.move*i+i*(e.append+e.append*i)/2;return Math.floor(s.default.converToS(n))}},cc._RF.pop()},{"../../../../script/common/utils/NumberUtils":void 0,"../../../../script/framework/extentions/Operation":void 0,"../define/CrashRateDefine":"CrashRateDefine"}]},{},["CrashLogic","CrashBetPlayerListView","CrashConfig","CrashData","CrashGameData","CrashLanguageEN","CrashLanguageHI","CrashLanguageZH","CrashColorDefine","CrashDefine","CrashRateDefine","CrashInterface","CrashNetController","CrashUtils","CrashBetPlayerItem","CrashCheckView","CrashEscapeItemNode","CrashEscapePlayerItem","CrashGameView","CrashMyRecordItem","CrashMyRecordView","CrashRecordItem","CrashTotalRecordItem","CrashTotalRecordView"]);