window.__require=function e(t,o,a){function i(n,s){if(!o[n]){if(!t[n]){var l=n.split("/");if(l=l[l.length-1],!t[l]){var c="function"==typeof __require&&__require;if(!s&&c)return c(l,!0);if(r)return r(l,!0);throw new Error("Cannot find module '"+n+"'")}n=l}var u=o[n]={exports:{}};t[n][0].call(u.exports,function(e){return i(t[n][1][e]||e)},u,u.exports,e,t,o,a)}return o[n].exports}for(var r="function"==typeof __require&&__require,n=0;n<a.length;n++)i(a[n]);return i}({RouletteBigWinItem:[function(e,t,o){"use strict";cc._RF.push(t,"b7a8eHmdbhAQ4Zq8ONa+IkF","RouletteBigWinItem");var a=this&&this.__decorate||function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../../script/common/net/LobbyService"),n=i(e("../../../../script/common/utils/NumberUtils")),s=e("../../../../script/framework/decorator/Decorators"),l=i(e("../../../../script/framework/ui/UIView")),c=e("../../../../script/global/UtilMgr"),{ccclass:u,property:d}=cc._decorator;let h=class extends l.default{constructor(){super(...arguments),this.iconSp=null,this.imgAvatar=null,this.uname=null,this.labRp=null,this.labNo=null}onLoad(){super.onLoad(),this.initData(),this.initView()}start(){}initData(){}initView(){}updateItem(e,t){let o=e.betInfo;this.uname.string=o.player.Nick,this.labRp.string=String(n.default.converToC(o.BetGold)),this.labNo.string=t+1,t>2?this.iconSp.node.active=!1:this.labNo.node.active=!1,c.UtilMgr.loadHeadImg(this.imgAvatar,o.player.HeaderUrl,o.player.UnitId,this)}clear(){this.initView()}};a([d(cc.Sprite)],h.prototype,"iconSp",void 0),a([d(cc.Sprite)],h.prototype,"imgAvatar",void 0),a([d(cc.Label)],h.prototype,"uname",void 0),a([d(cc.Label)],h.prototype,"labRp",void 0),a([d(cc.Label)],h.prototype,"labNo",void 0),h=a([u,s.injectService(r.LobbyService.instance)],h),o.default=h,cc._RF.pop()},{"../../../../script/common/net/LobbyService":void 0,"../../../../script/common/utils/NumberUtils":void 0,"../../../../script/framework/decorator/Decorators":void 0,"../../../../script/framework/ui/UIView":void 0,"../../../../script/global/UtilMgr":void 0}],RouletteColorDefine:[function(e,t,o){"use strict";cc._RF.push(t,"6529d0fvKhDPra09esTtso6","RouletteColorDefine"),Object.defineProperty(o,"__esModule",{value:!0}),o.RouletteColorDefine=void 0,function(e){e.Record={RED:cc.color(243,61,104,255),GREEN:cc.color(58,206,126,255),BLUE:cc.color(85,173,255,255),YEELOW:cc.color(248,194,48,255),WHITE:cc.color(255,255,255,255)},e.Tail={RED:cc.color(255,93,119,255),GREEN:cc.color(89,215,174,255),BLUE:cc.color(103,181,246,255),YEELOW:cc.color(255,226,126,255),WHITE:cc.color(255,255,255,255)},e.BetMode={SELECTED:cc.color(255,255,255),UN_SELECt:cc.color(147,147,157)},e.EnableRate={ENABLE:cc.color(255,255,255),DISABLE:cc.color(147,147,157)},e.ProfitLoss={NORMAL:cc.color(255,255,255,255),GREEN:cc.color(0,255,91,255),RED:cc.color(255,0,0,255)}}(o.RouletteColorDefine||(o.RouletteColorDefine={})),cc._RF.pop()},{}],RouletteConfig:[function(e,t,o){"use strict";cc._RF.push(t,"b045btLoQVAE7NabwlUWuXC","RouletteConfig"),Object.defineProperty(o,"__esModule",{value:!0}),o.RouletteConfig=void 0,(o.RouletteConfig||(o.RouletteConfig={})).BetGoldButton=[2e3,2e4,1e5,.5,2],cc._RF.pop()},{}],RouletteData:[function(e,t,o){"use strict";cc._RF.push(t,"f899d+yX0hHMag3RydtW9nD","RouletteData");var a=this&&this.__decorate||function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(o,"__esModule",{value:!0});const r=i(e("../../../../script/base/BaseData")),n=i(e("../../../../script/data/AppData"));let s=class extends r.default{constructor(){super(),this._appData=null,this.gameRecordList=null,this.onRoomBets=null,this.Status=null,this.stopBetTimeStamp=null,this.EndTimeStamp=null,this.onRoomTotalBet=null,this.curRound=null,this.roundHash=null,this.StartTimeStamp=null,this.StopTimeStamp=null,this.endIndex=null,this.hashSalt=null,this.randomNum=null,this.betBigRankInfo=null,this._appData=G.DataMgr.get(n.default),this.gameRecordList=[],this.onRoomBets=[],this.betBigRankInfo=[]}clearRouletteData(){this.onRoomBets=[],this.onRoomTotalBet=[{color:0,chips:0},{color:1,chips:0},{color:2,chips:0}]}destroy(){}};s=a([i(e("../../../../script/framework/decorator/ClassDecorator")).default.classname],s),o.default=s,cc._RF.pop()},{"../../../../script/base/BaseData":void 0,"../../../../script/data/AppData":void 0,"../../../../script/framework/decorator/ClassDecorator":void 0}],RouletteGameData:[function(e,t,o){"use strict";cc._RF.push(t,"0b445EKiz9IaY9Rv+eyIgkd","RouletteGameData"),Object.defineProperty(o,"__esModule",{value:!0}),o.Roulette=void 0;const a=e("../../../../script/common/base/GameData"),i=e("../../../../script/common/language/LanguageImpl"),r=e("../../../../script/common/manager/Manager"),n=e("./RouletteLanguageEN"),s=e("./RouletteLanguageZH"),l=e("./RouletteLanguageHI");class c extends a.GameData{onLanguageChange(){let e=s.ROULETTE_LAN_ZH;r.Manager.language.getLanguage()==n.ROULETTE_LAN_EN.language?e=n.ROULETTE_LAN_EN:r.Manager.language.getLanguage()==l.ROULETTE_LAN_HI.language&&(e=l.ROULETTE_LAN_HI),i.i18n[`${this.bundle}`]={},i.i18n[`${this.bundle}`]=e.data}get bundle(){return"roulette"}}(function(e){let t;e.gameData=new c,function(e){e.BGM="audio/audio_bgm",e.RUN="audio/audio_zhuanpan01",e.RESULT="audio/audio_result"}(t=e.SOUNDS||(e.SOUNDS={}))})(o.Roulette||(o.Roulette={})),cc._RF.pop()},{"../../../../script/common/base/GameData":void 0,"../../../../script/common/language/LanguageImpl":void 0,"../../../../script/common/manager/Manager":void 0,"./RouletteLanguageEN":"RouletteLanguageEN","./RouletteLanguageHI":"RouletteLanguageHI","./RouletteLanguageZH":"RouletteLanguageZH"}],RouletteInterface:[function(e,t,o){"use strict";cc._RF.push(t,"9faa22PsTFMnKHheZEFYR7I","RouletteInterface"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],RouletteLanguageEN:[function(e,t,o){"use strict";cc._RF.push(t,"1368acL2RVGZbr/gC4lXyTp","RouletteLanguageEN"),Object.defineProperty(o,"__esModule",{value:!0}),o.ROULETTE_LAN_EN=void 0,o.ROULETTE_LAN_EN={language:cc.sys.LANGUAGE_ENGLISH,data:{gameName:"roulette",labPageName:"Roulette",labCurRound:"Current Round",labBigWin:"Biggest Winner",history:"History",myHistory:"My History",worldHistory:"World History",fairGame:"Fair game",labCopyCheck:"Copy and Check",InputBetGold:"Masukkan Jumlah Taruhan {0}-{1}",NotBetState:"Currently not in the betting stage, please wait",labGameNo:"Game No. {0}",labRecordPageName:"Lottery Record",labRoundHash:"Round hash",labMyBetRecord:"Personal betting record",labBetGold:"Chips",labWinChips:"WinChips",labResult:"Result",toLogin:"Please login first"}},cc._RF.pop()},{}],RouletteLanguageHI:[function(e,t,o){"use strict";cc._RF.push(t,"e57cf4yjQxHj7krL0rOiUn4","RouletteLanguageHI"),Object.defineProperty(o,"__esModule",{value:!0}),o.ROULETTE_LAN_HI=void 0,o.ROULETTE_LAN_HI={language:cc.sys.LANGUAGE_HINDI,data:{gameName:"roulette",labPageName:"Roulette",labCurRound:"Putaran Saat Ini",labBigWin:"Pemenang Terbesar",history:"Riwayat",myHistory:"Riwayat saya",worldHistory:"Riwayat Dunia",fairGame:"Permainan yang adil",labCopyCheck:"Salin dan Periksa",InputBetGold:"Masukkan Jumlah Taruhan {0}-{1}",NotBetState:"Currently not in the betting stage, please wait",labGameNo:"Game No. {0}",labRecordPageName:"Riwayat Dunia",labRoundHash:"Round hash",labMyBetRecord:"Riwayat saya",labBetGold:"Pembayaran",labWinChips:"Keuntungan",labResult:"Hsasil",toLogin:"Please login first"}},cc._RF.pop()},{}],RouletteLanguageZH:[function(e,t,o){"use strict";cc._RF.push(t,"efd5d41FDlOHbIth5thQ6pC","RouletteLanguageZH"),Object.defineProperty(o,"__esModule",{value:!0}),o.ROULETTE_LAN_ZH=void 0,o.ROULETTE_LAN_ZH={language:cc.sys.LANGUAGE_CHINESE,data:{gameName:"roulette",labPageName:"Roulette",labCurRound:"Current Round",labBigWin:"Biggest Winner",history:"History",myHistory:"My History",worldHistory:"World History",fairGame:"Fair game",labCopyCheck:"Copy and Check",InputBetGold:"Masukkan Jumlah Taruhan {0}-{1}",NotBetState:"Currently not in the betting stage, please wait",labGameNo:"Game No. {0}",labRecordPageName:"Riwayat Dunia",labRoundHash:"Round hash",labMyBetRecord:"Riwayat saya",labBetGold:"Chips",labWinChips:"WinChips",labResult:"Result",toLogin:"Please login first"}},cc._RF.pop()},{}],RouletteLogic:[function(e,t,o){"use strict";cc._RF.push(t,"9882fvM2+tJ9IeqwSIxa9PA","RouletteLogic");var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(o,"__esModule",{value:!0});const i=e("../../../script/common/base/Logic"),r=e("../../../script/common/event/LogicEvent"),n=e("../../../script/common/manager/Manager"),s=e("../../../script/common/net/LobbyService"),l=e("../../../script/framework/assetManager/ResourceLoader"),c=e("./data/RouletteGameData"),u=a(e("./view/RouletteView"));n.Manager.logicManager.push(class extends i.Logic{constructor(){super(...arguments),this.logicType=r.LogicType.GAME}onLoad(){super.onLoad()}bindingEvents(){super.bindingEvents(),this.registerEvent(r.LogicEvent.ENTER_GAME,this.onEnterGame)}get bundle(){return"roulette"}onEnterComplete(e){super.onEnterComplete(e),e.type==this.logicType||(this.removeNetComponent(),this._loader.unLoadResources())}onEnterGame(e){e.bundle==this.bundle?(this.data=e.data,n.Manager.gameData=c.Roulette.gameData,n.Manager.gameData.clear(),this.onLanguageChange(),s.LobbyService.instance.pauseMessageQueue(),this._loader.loadResources()):(this.removeNetComponent(),this._loader.unLoadResources())}onLoadResourceComplete(e){e!=l.ResourceLoaderError.LOADING&&(cc.log(`${this.bundle}\u8d44\u6e90\u52a0\u8f7d\u5b8c\u6210!!!`),super.onLoadResourceComplete(e),n.Manager.uiManager.open({type:u.default,bundle:this.bundle,args:[this.data]}).then(()=>{s.LobbyService.instance.resumeMessageQueue()}).catch(e=>{s.LobbyService.instance.resumeMessageQueue(),cc.error(`\u6253\u5f00y\u6e38\u620f\u754c\u9762\uff1a${u.default.name}\u65f6\u62a5\u9519\u4e86:`,e)}))}getLoadResources(){return[{preloadView:u.default,bundle:this.bundle}]}onLanguageChange(){super.onLanguageChange(),c.Roulette.gameData.onLanguageChange()}}),cc._RF.pop()},{"../../../script/common/base/Logic":void 0,"../../../script/common/event/LogicEvent":void 0,"../../../script/common/manager/Manager":void 0,"../../../script/common/net/LobbyService":void 0,"../../../script/framework/assetManager/ResourceLoader":void 0,"./data/RouletteGameData":"RouletteGameData","./view/RouletteView":"RouletteView"}],RouletteMyBetRecordItem:[function(e,t,o){"use strict";cc._RF.push(t,"0af6bjfIfRIma8ArBlKoqOx","RouletteMyBetRecordItem");var a=this&&this.__decorate||function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../../script/common/manager/Manager"),n=e("../../../../script/common/net/LobbyService"),s=i(e("../../../../script/common/utils/NumberUtils")),l=e("../../../../script/framework/base/Defines"),c=e("../../../../script/framework/decorator/Decorators"),u=e("../../../../script/framework/event/EventApi"),d=i(e("../../../../script/framework/ui/UIView")),h=e("../define/RouletteColorDefine"),{ccclass:p,property:g}=cc._decorator;let m=class extends d.default{constructor(){super(...arguments),this.icon0=null,this.icon1=null,this.icon2=null,this.labGameNo=null,this.labBetChips=null,this.labWinChips=null,this.imgLine=null,this._data=null}onLoad(){super.onLoad(),this.initData(),this.initView()}start(){}initData(){this._data=null}initView(){this.labGameNo.string="",this.labBetChips.string="",this.labWinChips.string="",this.icon0.active=!1,this.icon1.active=!1,this.icon2.active=!1}bindingEvents(){super.bindingEvents(),l.ENABLE_CHANGE_LANGUAGE&&this.registerEvent(u.EventApi.CHANGE_LANGUAGE,this.onLanguageChange)}onLanguageChange(){}onShow(e){this.onLanguageChange(),this._data=e,this.labGameNo.language=r.Manager.makeLanguage(["labGameNo",e.round],!0),this[`icon${e.color}`].active=!0,this.labBetChips.string=String(s.default.converToC(e.betChips)),this.labWinChips.string=String(s.default.converToC(e.winChips)),this.labWinChips.node.color=this.getIncomeColor(e.winChips)}getIncomeColor(e){return e<0?h.RouletteColorDefine.ProfitLoss.RED:e>0?h.RouletteColorDefine.ProfitLoss.GREEN:h.RouletteColorDefine.ProfitLoss.NORMAL}reset(){this.initData(),this.initView()}};a([g(cc.Node)],m.prototype,"icon0",void 0),a([g(cc.Node)],m.prototype,"icon1",void 0),a([g(cc.Node)],m.prototype,"icon2",void 0),a([g(cc.Label)],m.prototype,"labGameNo",void 0),a([g(cc.Label)],m.prototype,"labBetChips",void 0),a([g(cc.Label)],m.prototype,"labWinChips",void 0),a([g(cc.Sprite)],m.prototype,"imgLine",void 0),m=a([p,c.injectService(n.LobbyService.instance)],m),o.default=m,cc._RF.pop()},{"../../../../script/common/manager/Manager":void 0,"../../../../script/common/net/LobbyService":void 0,"../../../../script/common/utils/NumberUtils":void 0,"../../../../script/framework/base/Defines":void 0,"../../../../script/framework/decorator/Decorators":void 0,"../../../../script/framework/event/EventApi":void 0,"../../../../script/framework/ui/UIView":void 0,"../define/RouletteColorDefine":"RouletteColorDefine"}],RouletteMyBetRecordView:[function(e,t,o){"use strict";cc._RF.push(t,"c6ee7EYvPxPQI1NCUxiR2qD","RouletteMyBetRecordView");var a=this&&this.__decorate||function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(o,"__esModule",{value:!0});const r=i(e("../../../../script/common/component/ListView")),n=i(e("../../../../script/common/item/NoneItem")),s=i(e("../../../../script/common/item/TitleItemPage")),l=e("../../../../script/common/manager/Manager"),c=e("../../../../script/common/net/LobbyService"),u=i(e("../../../../script/common/utils/TypeUtils")),d=i(e("../../../../script/data/AppData")),h=e("../../../../script/framework/base/Defines"),p=e("../../../../script/framework/decorator/Decorators"),g=e("../../../../script/framework/event/EventApi"),m=e("../../../../script/framework/external/protoc"),R=i(e("../../../../script/framework/ui/UIView")),_=i(e("../../../../script/msgbox/PanelHelp")),f=i(e("../data/RouletteData")),{ccclass:b,property:v}=cc._decorator;let C=class extends R.default{constructor(){super(...arguments),this.lsvRecord=null,this.titleItemPage=null,this.noneItem=null,this.labResult=null,this.labBetGold=null,this.labWinChips=null,this._appData=null,this._rouletteData=null,this._isLastPage=!1,this._gameRecordDataList=null,this.currentIndexPage=0}static getPrefabUrl(){return"prefabs/RouletteMyBetRecordView"}onLoad(){super.onLoad(),this.initData(),this.initView(),this.C2R_GetGameRecords_Req()}start(){}show(e){super.show(e),this.onLanguageChange()}initData(){this._appData=G.DataMgr.get(d.default),this._rouletteData=G.DataMgr.get(f.default),this._isLastPage=!1,this._gameRecordDataList=[]}initView(){this.noneItem.node.active=!1}bindingEvents(){super.bindingEvents(),h.ENABLE_CHANGE_LANGUAGE&&this.registerEvent(g.EventApi.CHANGE_LANGUAGE,this.onLanguageChange),this.registerEvent("Event_onR2C_GetBetInfo_Res",this.onEvent_onR2C_GetBetInfo_Res)}onLanguageChange(){this.titleItemPage.languagePageName(l.Manager.makeLanguage("labMyBetRecord",!0)),this.labResult.language=l.Manager.makeLanguage("labResult",!0),this.labBetGold.language=l.Manager.makeLanguage("labBetGold",!0),this.labWinChips.language=l.Manager.makeLanguage("labWinChips",!0)}getLastRecordId(){return this.currentIndexPage+20}C2R_GetGameRecords_Req(e){u.default.isNull(e)&&(e=0);let t={RpcId:l.Manager.netManager.getNewSeqId(),index:e,limit:20},o=m.MST.C2R_GetBetInfo_Req.create(t),a=m.MST.C2R_GetBetInfo_Req.encode(o).finish();this.service.sendMsg(m.MST.C2R_GetBetInfo_Req,m.MST.OuterOpcode_Roulette.C2R_GetBetInfo_Req,a)}onEvent_onR2C_GetBetInfo_Res(e){0===e.Error?(0===e.index&&e.records.length<=0?(this.noneItem.node.active=!0,this.lsvRecord.node.active=!1):(this.noneItem.node.active=!1,this.lsvRecord.node.active=!0),this._isLastPage=e.records.length<20,0===e.index?(this._gameRecordDataList=[].concat(e.records),this.lsvRecord.set(e.records)):(this._gameRecordDataList=this._gameRecordDataList.concat(e.records),this.lsvRecord.insert(e.records))):_.default.showErrTip(e.Error)}onClick(e,t,o){switch(e){case"btnClose":this.close()}}onPullTop(e){this.C2R_GetGameRecords_Req(0)}onPullBottom(e){this._isLastPage?G.Logger.log("Crash \u6d4f\u89c8\u603b\u5386\u53f2\u8bb0\u5f55 \u5df2\u662f\u6700\u540e\u4e00\u9875 \u65e0\u9700\u8bf7\u6c42\u7ffb\u9875"):this.C2R_GetGameRecords_Req(this.getLastRecordId())}};a([v(r.default)],C.prototype,"lsvRecord",void 0),a([v(s.default)],C.prototype,"titleItemPage",void 0),a([v(n.default)],C.prototype,"noneItem",void 0),a([v(cc.Label)],C.prototype,"labResult",void 0),a([v(cc.Label)],C.prototype,"labBetGold",void 0),a([v(cc.Label)],C.prototype,"labWinChips",void 0),C=a([b,p.injectService(c.LobbyService.instance)],C),o.default=C,cc._RF.pop()},{"../../../../script/common/component/ListView":void 0,"../../../../script/common/item/NoneItem":void 0,"../../../../script/common/item/TitleItemPage":void 0,"../../../../script/common/manager/Manager":void 0,"../../../../script/common/net/LobbyService":void 0,"../../../../script/common/utils/TypeUtils":void 0,"../../../../script/data/AppData":void 0,"../../../../script/framework/base/Defines":void 0,"../../../../script/framework/decorator/Decorators":void 0,"../../../../script/framework/event/EventApi":void 0,"../../../../script/framework/external/protoc":void 0,"../../../../script/framework/ui/UIView":void 0,"../../../../script/msgbox/PanelHelp":void 0,"../data/RouletteData":"RouletteData"}],RouletteMyRecordItem:[function(e,t,o){"use strict";cc._RF.push(t,"3ca05kz1qlI6ZpkP1zuNzxu","RouletteMyRecordItem");var a=this&&this.__decorate||function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../../script/common/net/LobbyService"),n=i(e("../../../../script/common/utils/NumberUtils")),s=e("../../../../script/framework/decorator/Decorators"),l=i(e("../../../../script/framework/ui/UIView")),c=e("../../../../script/global/UtilMgr"),{ccclass:u,property:d}=cc._decorator;let h=class extends l.default{constructor(){super(...arguments),this.iconSp=null,this.imgAvatar=null,this.uname=null,this.labRp=null,this.colorIcon0=null,this.colorIcon1=null,this.colorIcon2=null}onLoad(){super.onLoad(),this.initData(),this.initView()}start(){}initData(){}initView(){}updateItem(e,t){let o=e.betInfo;this.uname.string=o.player.Nick,this.labRp.string=n.default.converToC(o.BetGold);for(let a=0;a<3;a++){const e=this[`colorIcon${a}`];e.active=!1,a==o.Color&&(e.active=!0)}c.UtilMgr.loadHeadImg(this.imgAvatar,o.player.HeaderUrl,o.player.UnitId,this)}clear(){this.initView()}};a([d(cc.Sprite)],h.prototype,"iconSp",void 0),a([d(cc.Sprite)],h.prototype,"imgAvatar",void 0),a([d(cc.Label)],h.prototype,"uname",void 0),a([d(cc.Label)],h.prototype,"labRp",void 0),a([d(cc.Node)],h.prototype,"colorIcon0",void 0),a([d(cc.Node)],h.prototype,"colorIcon1",void 0),a([d(cc.Node)],h.prototype,"colorIcon2",void 0),h=a([u,s.injectService(r.LobbyService.instance)],h),o.default=h,cc._RF.pop()},{"../../../../script/common/net/LobbyService":void 0,"../../../../script/common/utils/NumberUtils":void 0,"../../../../script/framework/decorator/Decorators":void 0,"../../../../script/framework/ui/UIView":void 0,"../../../../script/global/UtilMgr":void 0}],RouletteNetController:[function(e,t,o){"use strict";cc._RF.push(t,"32a36IIi0tIspdGLf5JgxUX","RouletteNetController");var a=this&&this.__decorate||function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../script/common/manager/Manager"),n=e("../../../script/common/net/CmdResStruct"),s=e("../../../script/common/net/LobbyService"),l=i(e("../../../script/data/UserData")),c=i(e("../../../script/framework/controller/Controller")),u=e("../../../script/framework/decorator/Decorators"),d=e("../../../script/framework/external/protoc"),h=i(e("../../../script/msgbox/PanelHelp")),p=i(e("../script/data/RouletteData")),{ccclass:g,property:m}=cc._decorator;let R=class extends c.default{bindingEvents(){super.bindingEvents(),this.registerRes(),this.registerEvent(d.MST.OuterOpcode_Map.M2C_TransferMap_Res,this.onM2C_TransferMap_Res),this.registerEvent(d.MST.OuterOpcode_Roulette.M2C_GetRouletteInfo_Res,this.onM2C_GetRouletteInfo_Res),this.registerEvent(d.MST.OuterOpcode_Roulette.M2C_RouletteStartBet_Mes,this.onM2C_RouletteStartBet_Mes),this.registerEvent(d.MST.OuterOpcode_Roulette.M2C_MyRouletteBet_Res,this.onM2C_MyRouletteBet_Res),this.registerEvent(d.MST.OuterOpcode_Roulette.M2C_RouletteStart_mes,this.onM2C_RouletteStart_mes),this.registerEvent(d.MST.OuterOpcode_Roulette.R2C_PaybackPhase_Mes,this.onR2C_PaybackPhase_Mes),this.registerEvent(d.MST.OuterOpcode_Roulette.R2C_Bet_Mes,this.onR2C_Bet_Mes),this.registerEvent(d.MST.OuterOpcode_Roulette.R2C_GetBetRandInfo_Res,this.onR2C_GetBetRandInfo_Res),this.registerEvent(d.MST.OuterOpcode_Roulette.R2C_GetGameRecords_Res,this.onR2C_GetGameRecords_Res),this.registerEvent(d.MST.OuterOpcode_Roulette.R2C_GetBetInfo_Res,this.onR2C_GetBetInfo_Res)}registerRes(){n.CmdResStruct.register(d.MST.OuterOpcode_Map.M2C_TransferMap_Res,d.MST.M2C_TransferMap_Res),n.CmdResStruct.register(d.MST.OuterOpcode_Roulette.M2C_GetRouletteInfo_Res,d.MST.M2C_GetRouletteInfo_Res),n.CmdResStruct.register(d.MST.OuterOpcode_Roulette.M2C_RouletteStartBet_Mes,d.MST.M2C_RouletteStartBet_Mes),n.CmdResStruct.register(d.MST.OuterOpcode_Roulette.M2C_MyRouletteBet_Res,d.MST.M2C_MyRouletteBet_Res),n.CmdResStruct.register(d.MST.OuterOpcode_Roulette.M2C_RouletteStart_mes,d.MST.M2C_RouletteStart_mes),n.CmdResStruct.register(d.MST.OuterOpcode_Roulette.R2C_PaybackPhase_Mes,d.MST.R2C_PaybackPhase_Mes),n.CmdResStruct.register(d.MST.OuterOpcode_Roulette.R2C_Bet_Mes,d.MST.R2C_Bet_Mes),n.CmdResStruct.register(d.MST.OuterOpcode_Roulette.R2C_GetBetRandInfo_Res,d.MST.R2C_GetBetRandInfo_Res),n.CmdResStruct.register(d.MST.OuterOpcode_Roulette.R2C_GetGameRecords_Res,d.MST.R2C_GetGameRecords_Res),n.CmdResStruct.register(d.MST.OuterOpcode_Roulette.R2C_GetBetInfo_Res,d.MST.R2C_GetBetInfo_Res)}onM2C_TransferMap_Res(e){G.DataMgr.get(l.default).inGame=e.RoomName,dispatch("Event_M2C_TransferMap_Res",e)}onM2C_GetRouletteInfo_Res(e){if(0!==e.Error)return void h.default.showErrTip(e.Error);let t=G.DataMgr.get(p.default);t.Status=e.Status,t.EndTimeStamp=e.EndTimeStamp,t.gameRecordList.length=0,t.onRoomBets=[];for(let o of e.Bets){let e={betInfo:o};t.onRoomBets.push(e)}t.onRoomBets.reverse(),t.onRoomTotalBet=e.betRecord,t.gameRecordList=[].concat(e.MultipleRecord),t.curRound=e.round,t.hashSalt=e.hashSalt,t.randomNum=e.randomNo,t.roundHash=e.roundHash,e.Status==d.MST.RouletteStatus.BetPhase&&(t.stopBetTimeStamp=Number(e.EndTimeStamp)),dispatch("Event_M2C_GetRouletteInfo_Res")}onM2C_RouletteStartBet_Mes(e){let t=G.DataMgr.get(p.default);t.Status=d.MST.RouletteStatus.BetPhase,t.stopBetTimeStamp=Number(e.StopBetTimeStamp),t.roundHash=e.randHash,t.clearRouletteData(),dispatch("Event_M2C_RouletteStartBet_Mes")}onM2C_MyRouletteBet_Res(e){0===e.Error||h.default.showErrTip(e.Error)}onM2C_RouletteStart_mes(e){let t=G.DataMgr.get(p.default);t.Status=d.MST.RouletteStatus.AnimationPhase,t.StopTimeStamp=Number(e.StopTimeStamp),t.endIndex=e.endIndex,dispatch("Event_M2C_RouletteStart_mes")}onR2C_PaybackPhase_Mes(e){let t=G.DataMgr.get(p.default);t.Status=d.MST.RouletteStatus.PaybackPhase;let o=t.gameRecordList;t.curRound=e.nextRound,t.hashSalt=e.hashSalt,t.randomNum=e.randomNum,t.endIndex=e.color,o.push(Number(e.color)),dispatch("Event_R2C_PaybackPhase_Mes")}onR2C_Bet_Mes(e){let t=G.DataMgr.get(p.default);if(!e.info)return;let o=t.onRoomTotalBet,a={betInfo:e.info};t.onRoomBets||(t.onRoomBets=[]),t.onRoomBets.push(a),t.onRoomBets.reverse();for(let i=0;i<o.length;i++){const t=o[i];if(t.color==e.info.Color){let o=Number(t.chips);o+=Number(e.info.BetGold),t.chips=o}}dispatch("Event_R2C_Bet_Mes")}onR2C_GetBetRandInfo_Res(e){if(0!==e.Error)return void h.default.showErrTip(e.Error);let t=G.DataMgr.get(p.default);t.betBigRankInfo=[];for(let o of e.records){let e={betInfo:o};t.betBigRankInfo.push(e)}dispatch("Event_R2C_GetBetRandInfo_Res")}onR2C_GetGameRecords_Res(e){dispatch("Event_R2C_GetGameRecords_Res",e)}onR2C_GetBetInfo_Res(e){0===e.Error?dispatch("Event_onR2C_GetBetInfo_Res",e):h.default.showErrTip(e.Error)}};R=a([g,u.injectService(s.LobbyService.instance)],R),o.default=R,r.Manager.netManager.push(R),cc._RF.pop()},{"../../../script/common/manager/Manager":void 0,"../../../script/common/net/CmdResStruct":void 0,"../../../script/common/net/LobbyService":void 0,"../../../script/data/UserData":void 0,"../../../script/framework/controller/Controller":void 0,"../../../script/framework/decorator/Decorators":void 0,"../../../script/framework/external/protoc":void 0,"../../../script/msgbox/PanelHelp":void 0,"../script/data/RouletteData":"RouletteData"}],RouletteRecordItem:[function(e,t,o){"use strict";cc._RF.push(t,"8f2906q9ZVJDqWsOadynJ49","RouletteRecordItem");var a=this&&this.__decorate||function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../../script/common/net/LobbyService"),n=e("../../../../script/framework/decorator/Decorators"),s=i(e("../../../../script/framework/ui/UIView")),{ccclass:l,property:c}=cc._decorator;let u=class extends s.default{constructor(){super(...arguments),this.icon0=null,this.icon1=null,this.icon2=null}onLoad(){super.onLoad(),this.initData(),this.initView()}start(){}initData(){}initView(){this.icon0.node.active=!1,this.icon1.node.active=!1,this.icon2.node.active=!1}setColor(e){this.icon0.node.active=!1,this.icon1.node.active=!1,this.icon2.node.active=!1,this[`icon${e}`].node.active=!0}clear(){this.initView()}};a([c(cc.Sprite)],u.prototype,"icon0",void 0),a([c(cc.Sprite)],u.prototype,"icon1",void 0),a([c(cc.Sprite)],u.prototype,"icon2",void 0),u=a([l,n.injectService(r.LobbyService.instance)],u),o.default=u,cc._RF.pop()},{"../../../../script/common/net/LobbyService":void 0,"../../../../script/framework/decorator/Decorators":void 0,"../../../../script/framework/ui/UIView":void 0}],RouletteTotalRecordItem:[function(e,t,o){"use strict";cc._RF.push(t,"118f3KSbUpE5Lw/qoxh4Zc7","RouletteTotalRecordItem");var a=this&&this.__decorate||function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../../script/common/manager/Manager"),n=e("../../../../script/common/net/LobbyService"),s=e("../../../../script/framework/base/Defines"),l=e("../../../../script/framework/decorator/Decorators"),c=e("../../../../script/framework/event/EventApi"),u=i(e("../../../../script/framework/ui/UIView")),{ccclass:d,property:h}=cc._decorator;let p=class extends u.default{constructor(){super(...arguments),this.icon0=null,this.icon1=null,this.icon2=null,this.labGameNo=null,this.labRoundHash=null,this.labHashSalt=null,this.labRoundNo=null,this.labCheck=null,this.imgLine=null,this._data=null}onLoad(){super.onLoad(),this.initData(),this.initView()}start(){}initData(){this._data=null}initView(){this.labGameNo.string="",this.labRoundHash.string="",this.labHashSalt.string="",this.labRoundNo.string="",this.icon0.active=!1,this.icon1.active=!1,this.icon2.active=!1}bindingEvents(){super.bindingEvents(),s.ENABLE_CHANGE_LANGUAGE&&this.registerEvent(c.EventApi.CHANGE_LANGUAGE,this.onLanguageChange)}onLanguageChange(){this.labRoundHash.language=r.Manager.makeLanguage("labRoundHash",!0)}onShow(e){this.onLanguageChange(),this._data=e,this.labGameNo.language=r.Manager.makeLanguage(["labGameNo",e.round],!0),this.labHashSalt.string=e.hashSalt,this.labRoundHash.string=e.roundHash,this.labRoundNo.string=String(e.randomNo),this[`icon${e.color}`].active=!0}reset(){this.initData(),this.initView()}};a([h(cc.Node)],p.prototype,"icon0",void 0),a([h(cc.Node)],p.prototype,"icon1",void 0),a([h(cc.Node)],p.prototype,"icon2",void 0),a([h(cc.Label)],p.prototype,"labGameNo",void 0),a([h(cc.Label)],p.prototype,"labRoundHash",void 0),a([h(cc.Label)],p.prototype,"labHashSalt",void 0),a([h(cc.Label)],p.prototype,"labRoundNo",void 0),a([h(cc.Label)],p.prototype,"labCheck",void 0),a([h(cc.Sprite)],p.prototype,"imgLine",void 0),p=a([d,l.injectService(n.LobbyService.instance)],p),o.default=p,cc._RF.pop()},{"../../../../script/common/manager/Manager":void 0,"../../../../script/common/net/LobbyService":void 0,"../../../../script/framework/base/Defines":void 0,"../../../../script/framework/decorator/Decorators":void 0,"../../../../script/framework/event/EventApi":void 0,"../../../../script/framework/ui/UIView":void 0}],RouletteTotalRecordView:[function(e,t,o){"use strict";cc._RF.push(t,"15e1724SYRL35MwxDcD8MvH","RouletteTotalRecordView");var a=this&&this.__decorate||function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(o,"__esModule",{value:!0});const r=i(e("../../../../script/common/component/ListView")),n=i(e("../../../../script/common/item/NoneItem")),s=i(e("../../../../script/common/item/TitleItemPage")),l=e("../../../../script/common/manager/Manager"),c=e("../../../../script/common/net/LobbyService"),u=i(e("../../../../script/common/utils/TypeUtils")),d=i(e("../../../../script/data/AppData")),h=e("../../../../script/framework/base/Defines"),p=e("../../../../script/framework/decorator/Decorators"),g=e("../../../../script/framework/event/EventApi"),m=e("../../../../script/framework/external/protoc"),R=i(e("../../../../script/framework/ui/UIView")),_=i(e("../../../../script/msgbox/PanelHelp")),f=i(e("../data/RouletteData")),{ccclass:b,property:v}=cc._decorator;let C=class extends R.default{constructor(){super(...arguments),this.lsvRecord=null,this.titleItemPage=null,this.noneItem=null,this._appData=null,this._rouletteData=null,this._isLastPage=!1,this._gameRecordDataList=null}static getPrefabUrl(){return"prefabs/RouletteTotalRecordView"}onLoad(){super.onLoad(),this.initData(),this.initView();let e=this._rouletteData.curRound;this.C2R_GetGameRecords_Req(e)}start(){}show(e){super.show(e),this.onLanguageChange()}initData(){this._appData=G.DataMgr.get(d.default),this._rouletteData=G.DataMgr.get(f.default),this._isLastPage=!1,this._gameRecordDataList=[]}initView(){this.noneItem.node.active=!1}bindingEvents(){super.bindingEvents(),h.ENABLE_CHANGE_LANGUAGE&&this.registerEvent(g.EventApi.CHANGE_LANGUAGE,this.onLanguageChange),this.registerEvent("Event_R2C_GetGameRecords_Res",this.onEvent_R2C_GetGameRecords_Res)}onLanguageChange(){this.titleItemPage.languagePageName(l.Manager.makeLanguage("labRecordPageName",!0))}getLastRecordId(){let e=-1;return this._gameRecordDataList.length>0&&(e=this._gameRecordDataList[this._gameRecordDataList.length-1].round),e}C2R_GetGameRecords_Req(e){u.default.isNull(e)&&(e=-1);let t={RpcId:l.Manager.netManager.getNewSeqId(),limit:20,round:e},o=m.MST.C2R_GetGameRecords_Req.create(t),a=m.MST.C2R_GetGameRecords_Req.encode(o).finish();this.service.sendMsg(m.MST.C2R_GetGameRecords_Req,m.MST.OuterOpcode_Roulette.C2R_GetGameRecords_Req,a)}onEvent_R2C_GetGameRecords_Res(e){0===e.Error?(-1===e.round&&e.records.length<=0?(this.noneItem.node.active=!0,this.lsvRecord.node.active=!1):(this.noneItem.node.active=!1,this.lsvRecord.node.active=!0),this._isLastPage=e.records.length<20,-1===e.round?(this._gameRecordDataList=[].concat(e.records),this.lsvRecord.set(e.records)):(this._gameRecordDataList=this._gameRecordDataList.concat(e.records),this.lsvRecord.insert(e.records))):_.default.showErrTip(e.Error)}onClick(e,t,o){switch(e){case"btnClose":this.close()}}onPullTop(e){this.C2R_GetGameRecords_Req(0)}onPullBottom(e){this._isLastPage?G.Logger.log("Crash \u6d4f\u89c8\u603b\u5386\u53f2\u8bb0\u5f55 \u5df2\u662f\u6700\u540e\u4e00\u9875 \u65e0\u9700\u8bf7\u6c42\u7ffb\u9875"):this.C2R_GetGameRecords_Req(this.getLastRecordId())}};a([v(r.default)],C.prototype,"lsvRecord",void 0),a([v(s.default)],C.prototype,"titleItemPage",void 0),a([v(n.default)],C.prototype,"noneItem",void 0),C=a([b,p.injectService(c.LobbyService.instance)],C),o.default=C,cc._RF.pop()},{"../../../../script/common/component/ListView":void 0,"../../../../script/common/item/NoneItem":void 0,"../../../../script/common/item/TitleItemPage":void 0,"../../../../script/common/manager/Manager":void 0,"../../../../script/common/net/LobbyService":void 0,"../../../../script/common/utils/TypeUtils":void 0,"../../../../script/data/AppData":void 0,"../../../../script/framework/base/Defines":void 0,"../../../../script/framework/decorator/Decorators":void 0,"../../../../script/framework/event/EventApi":void 0,"../../../../script/framework/external/protoc":void 0,"../../../../script/framework/ui/UIView":void 0,"../../../../script/msgbox/PanelHelp":void 0,"../data/RouletteData":"RouletteData"}],RouletteView:[function(e,t,o){"use strict";cc._RF.push(t,"dac51FZP99ILJv58nQyBcHl","RouletteView");var a=this&&this.__decorate||function(e,t,o,a){var i,r=arguments.length,n=r<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,a);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(n=(r<3?i(n):r>3?i(t,o,n):i(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(o,"__esModule",{value:!0});const r=e("../../../../script/common/net/LobbyService"),n=e("../../../../script/common/event/LogicEvent"),s=i(e("../../../../script/framework/ui/UIView")),l=i(e("../../../../script/data/AppData")),c=i(e("../../../../script/data/UserData")),u=e("../../../../script/framework/decorator/Decorators"),d=e("../../../../script/framework/external/protoc"),h=e("../../../../script/common/manager/Manager"),p=e("../../../../script/common/config/Config"),g=i(e("../../../../script/msgbox/PanelHelp")),m=e("../../../../script/framework/base/Defines"),R=e("../../../../script/framework/event/EventApi"),_=i(e("./RouletteRecordItem")),f=i(e("../data/RouletteData")),b=i(e("../../../../script/framework/extentions/DateUtils")),v=i(e("../../../../script/framework/extentions/Operation")),C=e("../config/RouletteConfig"),y=i(e("../../../../script/common/item/TitleItemPageUser")),M=e("../define/RouletteColorDefine"),L=i(e("../../../../script/common/utils/NumberUtils")),B=i(e("./RouletteMyRecordItem")),S=i(e("./RouletteBigWinItem")),E=i(e("./RouletteTotalRecordView")),N=i(e("./RouletteMyBetRecordView")),D=e("../data/RouletteGameData"),w=i(e("../../../../script/login/LoginNewView")),{ccclass:I,property:T}=cc._decorator;let k=class extends s.default{constructor(){super(...arguments),this._appData=null,this._userData=null,this._rouletteData=null,this.groupNode=null,this.titleItemPageUser=null,this.groupParent=null,this.gemstoneSpine=null,this.endNumLabel=null,this.upPointer=null,this.downPointer=null,this.labStartCountDown=null,this.edbBetGold=null,this.latRecord=null,this.labCurRound=null,this.labBigWin=null,this.tggCurRound=null,this.tggBigWin=null,this.nodCurRoundList=null,this.nodBigWinList=null,this.latManual=null,this.lsvBetPlayer=null,this.nodVerify=null,this.labMyRecord=null,this.labHistoryTitle=null,this.labWorldRecord=null,this.labFairGame=null,this.labCopyCheck=null,this.maxNum=2,this.minNum=0,this.time=0,this.totalTime=0,this.lineWidth=0,this.totalWidth=0,this.rolling=!1,this.numArray=[],this.curNum=0,this.rollRound=2,this.groupMax=9,this.itemWidth=112,this.dialTime=6,this.itemTotal=29,this.groupWidth=0,this.endNum=0}static getPrefabUrl(){return"prefabs/RouletteView"}onLoad(){super.onLoad(),n.dispatchEnterComplete({type:n.LogicType.GAME,views:[this]}),this.initData(),this.initView(),this.refreshDefaultByPos(),this.playPointerByNum(),this.startCountDown(),this.audioHelper.playMusic(D.Roulette.SOUNDS.BGM,this.bundle)}bindingEvents(){super.bindingEvents(),m.ENABLE_CHANGE_LANGUAGE&&this.registerEvent(R.EventApi.CHANGE_LANGUAGE,this.onLanguageChange),this.registerEvent("Event_M2C_TransferMap_Res",this.onEvent_M2C_TransferMap_Res),this.registerEvent("Event_M2C_GetRouletteInfo_Res",this.onEvent_M2C_GetRouletteInfo_Res),this.registerEvent("Event_M2C_RouletteStartBet_Mes",this.onEvent_M2C_RouletteStartBet_Mes),this.registerEvent("Event_M2C_RouletteStart_mes",this.onEvent_M2C_RouletteStart_mes),this.registerEvent("Event_R2C_PaybackPhase_Mes",this.onEvent_R2C_PaybackPhase_Mes),this.registerEvent("Event_R2C_Bet_Mes",this.onEvent_R2C_Bet_Mes),this.registerEvent("Event_R2C_GetBetRandInfo_Res",this.onEvent_R2C_GetBetRandInfo_Res)}show(e){super.show(e),this.onLanguageChange(),this.requestGetRouletteInfo()}requestGetRouletteInfo(){let e=d.MST.C2M_GetRouletteInfo_Req.create({RpcId:h.Manager.netManager.getNewSeqId()}),t=d.MST.C2M_GetRouletteInfo_Req.encode(e).finish();r.LobbyService.instance.sendMsg(d.MST.C2M_GetRouletteInfo_Req,d.MST.OuterOpcode_Roulette.C2M_GetRouletteInfo_Req,t)}onLanguageChange(){this.titleItemPageUser.languagePageName(h.Manager.makeLanguage("labPageName",!0)),this.labCurRound.language=h.Manager.makeLanguage("labCurRound",!0),this.labBigWin.language=h.Manager.makeLanguage("labBigWin",!0),this.labHistoryTitle.language=h.Manager.makeLanguage("history",!0),this.labMyRecord.language=h.Manager.makeLanguage("myHistory",!0),this.labWorldRecord.language=h.Manager.makeLanguage("worldHistory",!0),this.labFairGame.language=h.Manager.makeLanguage("fairGame",!0),this.labCopyCheck.language=h.Manager.makeLanguage("labCopyCheck",!0)}initData(){this._appData=G.DataMgr.get(l.default),this._userData=G.DataMgr.get(c.default),this._rouletteData=G.DataMgr.get(f.default),this.groupWidth=this.itemTotal*this.itemWidth}initView(){}refreshDefaultByPos(){this.groupParent.removeAllChildren(),this.groupParent.setPosition(0,0);for(let t=0;t<this.groupMax;t++){let e=cc.instantiate(this.groupNode);e.name="groupPre"+t,this.groupParent.addChild(e)}this.groupParent.getComponent(cc.Layout).updateLayout();let e=0;switch(this.curNum){case 0:e=6*this.itemWidth;break;case 1:e=5*this.itemWidth-.5*this.itemWidth+10;break;case 2:e=25}this.groupParent.x+=e}onEvent_M2C_RouletteStart_mes(){let e=this,t=G.DataMgr.get(f.default);this.dialTime=(t.StopTimeStamp-this._appData.getServerTimestamp())/1e3,this.endNum=t.endIndex,console.log("--------\u6eda\u52a8\u65f6\u95f4-------\x3e:"+this.dialTime),this.endNumLabel.string=`\u7ed3\u679c\u989c\u8272:${["purpler","red","green"][this.endNum]}`,this.gemstoneSpine.active=!1;let o=this.getDiffX(),a=this.rollRound*this.groupWidth+o;cc.tween(this.groupParent).by(this.dialTime,{position:cc.v2(-a,0)},cc.easeInOut(2)).call(function(){e.rolling=!1,e.curNum=e.endNum,e.refreshDefaultByPos(),e.playPointerByNum(),e.playGemstoneSpine(),e.hideCurItem(),e.audioHelper.playEffect(D.Roulette.SOUNDS.RESULT,e.bundle)}).start(),this.rolling=!0,this.showCurItem(),this.loopPointerSpine(),this.resumeRate(),this.audioHelper.playEffect(D.Roulette.SOUNDS.RUN,this.bundle)}getDiffX(){let e=(this.itemTotal/2+.5-1-2)*this.itemWidth,t=0;if(0==this.curNum)switch(this.endNum){case 0:t=e+2*this.itemWidth+35;break;case 1:t=e-3*this.itemWidth-50-5;break;case 2:t=e+20*this.itemWidth-35}else if(1==this.curNum)switch(this.endNum){case 0:t=e+this.itemWidth-10;break;case 1:t=e-5*this.itemWidth+15;break;case 2:t=e+18*this.itemWidth+30}else switch(this.endNum){case 0:t=e+2*this.itemWidth+35;break;case 1:t=e+this.itemWidth-15;break;case 2:t=e+14*this.itemWidth-10}return t}hideCurItem(){let e;switch(this.endNum){case 0:e=10;break;case 1:e=11;break;case 2:e=14}for(let t=0;t<this.groupMax;t++)this.groupParent.getChildByName("groupPre"+t).getChildByName(`item${e}`).active=!1}showCurItem(){for(let e=0;e<this.groupMax;e++){let t=this.groupParent.getChildByName("groupPre"+e);t.getChildByName("item10").active=!0,t.getChildByName("item11").active=!0,t.getChildByName("item14").active=!0}}playGemstoneSpine(){this.gemstoneSpine.active=!0,this.gemstoneSpine.getChildByName("spine").getComponent(sp.Skeleton).setAnimation(0,`${["zi","hong","lu"][this.endNum]}`,!1)}loopPointerSpine(){this.upPointer.getComponent(sp.Skeleton).setAnimation(0,"animation",!0),this.downPointer.getComponent(sp.Skeleton).setAnimation(0,"animation",!0)}playPointerByNum(){let e=["zi","hong","lu"];this.upPointer.getComponent(sp.Skeleton).setAnimation(0,`${e[this.endNum]}`,!0),this.downPointer.getComponent(sp.Skeleton).setAnimation(0,`${e[this.endNum]}`,!0)}onClick(e,t){switch(e){case"testChou":if(this.rolling)return;let t=Math.floor(Math.random()*(this.maxNum+1-this.minNum))+this.minNum;this.endNum=t;let o=["purpler","red","green"];this.endNumLabel.string=`\u7ed3\u679c\u989c\u8272:${o[this.endNum]}`;break;case"btnClose":this.reqEnterLobby();break;case"btnBet0":this.checkLogined()&&this.addBetGold(C.RouletteConfig.BetGoldButton[0],this.edbBetGold);break;case"btnBet1":this.checkLogined()&&this.addBetGold(C.RouletteConfig.BetGoldButton[1],this.edbBetGold);break;case"btnBet2":this.checkLogined()&&this.addBetGold(C.RouletteConfig.BetGoldButton[2],this.edbBetGold);break;case"btnBet3":this.checkLogined()&&this.mulBetGold(C.RouletteConfig.BetGoldButton[3],this.edbBetGold);break;case"btnBet4":this.checkLogined()&&this.mulBetGold(C.RouletteConfig.BetGoldButton[4],this.edbBetGold);break;case"tggCurRound":this.clickMyRecord();break;case"tggBigWin":this.clickWordRecord();break;case"btnPurple":this.checkLogined()&&this.onC2M_MyRouletteBet_Req(0);break;case"btnGreen":this.checkLogined()&&this.onC2M_MyRouletteBet_Req(2);break;case"btnRed":this.checkLogined()&&this.onC2M_MyRouletteBet_Req(1);break;case"btnWorldRecord":h.Manager.uiManager.open({type:E.default,bundle:this.bundle});break;case"btnMyRecord":h.Manager.uiManager.open({type:N.default,bundle:this.bundle});break;case"btnCopyNo":let a=this.nodVerify.getChildByName("roundHashNode").getChildByName("labRoundHash").getComponent(cc.Label);window.platformUtil.copyToClip(a.string)}}checkLogined(){return!!this._userData.id||(g.default.showTip(h.Manager.makeLanguage("toLogin",!0)),h.Manager.uiManager.open({type:w.default,bundle:m.BUNDLE_RESOURCES}),!1)}getEditboxBetGold(e){let t=e.string,o=0;return t.length>0&&(o=Number(t)),o}onC2M_MyRouletteBet_Req(e){let t=this.getEditboxBetGold(this.edbBetGold);if(t<2e3||t>33e5)return void g.default.showTip(h.Manager.makeLanguage(["InputBetGold",2e3,33e5],!0));if(this._rouletteData.Status!=d.MST.RouletteStatus.BetPhase)return void g.default.showTip(h.Manager.makeLanguage("NotBetState",!0));let o=d.MST.C2M_MyRouletteBet_Req.create({RpcId:h.Manager.netManager.getNewSeqId(),BetGold:L.default.converToS(t),BetIndex:e}),a=d.MST.C2M_MyRouletteBet_Req.encode(o).finish();this.service.sendMsg(d.MST.C2M_MyRouletteBet_Req,d.MST.OuterOpcode_Roulette.C2M_MyRouletteBet_Req,a)}clickMyRecord(){this.nodBigWinList.active=!1,this.nodCurRoundList.active=!0}clickWordRecord(){this.nodBigWinList.active=!0,this.nodCurRoundList.active=!1,this.requestGetBetRankInfo()}requestGetBetRankInfo(){let e=d.MST.C2R_GetBetRankInfo_Req.create({RpcId:h.Manager.netManager.getNewSeqId()}),t=d.MST.C2R_GetBetRankInfo_Req.encode(e).finish();r.LobbyService.instance.sendMsg(d.MST.C2R_GetBetRankInfo_Req,d.MST.OuterOpcode_Roulette.C2R_GetBetRankInfo_Req,t)}onChangedBetGold(e,t){let o=e.split("");for(let r=o.length-1;r>=0;--r)/[0-9]/g.test(o[r])||o.splice(r,1);let a=o.join(",").replace(/,/g,""),i=Number(a);e=i<=0?"":i.toString(),t.string=e}addBetGold(e,t){let o=0;t.string.length>0&&(o=Number(t.string)),t.string=v.default.add(e,o).toString()}mulBetGold(e,t){let o=0;t.string.length>0&&(o=Number(t.string)),t.string=Math.floor(v.default.mul(e,o)).toString()}reqEnterLobby(){let e=d.MST.C2M_TransferMap_Req.create({RpcId:h.Manager.netManager.getNewSeqId(),RoomName:p.Config.GameId.Lobby}),t=d.MST.C2M_TransferMap_Req.encode(e).finish();r.LobbyService.instance.sendMsg(d.MST.C2M_TransferMap_Req,d.MST.OuterOpcode_Map.C2M_TransferMap_Req,t)}onEvent_M2C_TransferMap_Res(e){0===e.Error?dispatch(n.LogicEvent.ENTER_HALL):g.default.showErrTip(e.Error)}onEvent_M2C_RouletteStartBet_Mes(){this.startCountDown(),this.resumeRate(),this.onEvent_R2C_PaybackPhase_Mes(),this.refreshCurRoomBetsList(),this.refreshTotalBaoshi()}startCountDown(){this.stopCountDown(),this.schedule(this.updateCountDonw)}stopCountDown(){this.labStartCountDown.string="0.00",this.unschedule(this.updateCountDonw)}updateCountDonw(){let e=this._rouletteData.stopBetTimeStamp-this._appData.getServerTimestamp();if(e<=0)return e=0,this.stopCountDown(),void(this.labStartCountDown.string="0.00");this.labStartCountDown.string=b.default.getMsToS(e)}refreshGame(){switch(this._rouletteData.Status){case d.MST.RouletteStatus.BetPhase:this.startCountDown();break;case d.MST.RouletteStatus.AnimationPhase:case d.MST.RouletteStatus.PaybackPhase:}}onEvent_M2C_GetRouletteInfo_Res(){this.refreshGame(),this.resumeRate(),this.refreshCurRoomBetsList(),this.onEvent_R2C_PaybackPhase_Mes(),this.refreshTotalBaoshi(),this.refreshMultipleRecord()}resumeRate(){let e=this._rouletteData.Status==d.MST.RouletteStatus.BetPhase;this.enableEditboxRate(this.edbBetGold,e),this.enableBtnBetRate(e),e||(this.labStartCountDown.string="0.00")}enableBtnBetRate(e){let t=this.latManual.getChildByName("nodBetRaise").getChildByName("imgBetBg");for(let n=0;n<5;n++)t.getChildByName("btnBet"+n).getComponent(cc.Button).enabled=e;let o=this.latManual.getChildByName("noBetBtn"),a=o.getChildByName("btnPurple").getComponent(cc.Button),i=o.getChildByName("btnGreen").getComponent(cc.Button),r=o.getChildByName("btnRed").getComponent(cc.Button);a.enabled=e,i.enabled=e,r.enabled=e}enableEditboxRate(e,t){e.enabled=t;let o=e.node.getChildByName("TEXT_LABEL"),a=e.node.getChildByName("PLACEHOLDER_LABEL");t?(o.color=M.RouletteColorDefine.EnableRate.ENABLE,a.color=M.RouletteColorDefine.EnableRate.ENABLE):(o.color=M.RouletteColorDefine.EnableRate.DISABLE,a.color=M.RouletteColorDefine.EnableRate.DISABLE)}onEvent_R2C_PaybackPhase_Mes(){let e=this._rouletteData,t=this.nodVerify.getChildByName("labGameNo").getComponent(cc.Label),o=this.nodVerify.getChildByName("hashNode").getChildByName("labHash").getComponent(cc.Label),a=this.nodVerify.getChildByName("roundNode").getChildByName("labRoundNum").getComponent(cc.Label),i=this.nodVerify.getChildByName("roundHashNode").getChildByName("labRoundHash").getComponent(cc.Label);t.string=`Game No.${e.curRound}`,o.string=e.hashSalt,a.string=String(e.randomNum),i.string=e.roundHash,this.refreshMultipleRecord()}refreshTotalBaoshi(){let e=this._rouletteData.onRoomTotalBet;if(!e||e.length<=0)return;let t=this.nodCurRoundList.getChildByName("latBaoshi").getChildByName("purp").getChildByName("labChips"),o=this.nodCurRoundList.getChildByName("latBaoshi").getChildByName("red").getChildByName("labChips"),a=this.nodCurRoundList.getChildByName("latBaoshi").getChildByName("green").getChildByName("labChips");for(let i=0;i<e.length;i++){const r=e[i];0==r.color?t.getComponent(cc.Label).string=L.default.converToC(r.chips):1==r.color?o.getComponent(cc.Label).string=L.default.converToC(r.chips):a.getComponent(cc.Label).string=L.default.converToC(r.chips)}}onEvent_R2C_Bet_Mes(){this.refreshCurRoomBetsList(),this.refreshTotalBaoshi()}onEvent_R2C_GetBetRandInfo_Res(){let e=this._rouletteData,t=this.nodBigWinList.getChildByName("lsvBetPlayer").getChildByName("view").getChildByName("content"),o=e.betBigRankInfo;for(let a=0;a<9;a++){let e=t.getChildByName(`RouletteBigWinItem${a}`),i=e.getComponent(S.default);const r=o[a];e.active=!1,a<o.length&&(e.active=!0,i.updateItem(r,a))}}refreshCurRoomBetsList(){let e=this.lsvBetPlayer.getChildByName("view").getChildByName("content"),t=this._rouletteData.onRoomBets;for(let o=0;o<6;o++){let a=e.getChildByName(`RouletteMyRecordItem${o}`),i=a.getComponent(B.default);const r=t[o];a.active=!1,o<t.length&&(a.active=!0,i.updateItem(r,o),cc.tween(a).set({scaleY:0}).to(.1,{scaleY:1}).start())}}refreshMultipleRecord(){let e=this._rouletteData.gameRecordList.length,t=[];t=e<=this.latRecord.node.childrenCount?[].concat(this._rouletteData.gameRecordList):this._rouletteData.gameRecordList.slice(-this.latRecord.node.childrenCount,e);let o=0;for(let a of this.latRecord.node.children){let e=t[o++],i=a.getComponent(_.default);void 0===e?i.clear():i.setColor(e),o==t.length&&(cc.Tween.stopAllByTarget(a),cc.tween(a).set({opacity:0}).to(.5,{opacity:255}).start())}}stopAllSound(){this.audioHelper.stopMusic(),this.audioHelper.stopEffectByPath(D.Roulette.SOUNDS.RUN),this.audioHelper.stopEffectByPath(D.Roulette.SOUNDS.RESULT)}onDestroy(){super.onDestroy(),this.stopAllSound()}};a([T(cc.Prefab)],k.prototype,"groupNode",void 0),a([T(y.default)],k.prototype,"titleItemPageUser",void 0),a([T(cc.Node)],k.prototype,"groupParent",void 0),a([T(cc.Node)],k.prototype,"gemstoneSpine",void 0),a([T(cc.Label)],k.prototype,"endNumLabel",void 0),a([T(cc.Node)],k.prototype,"upPointer",void 0),a([T(cc.Node)],k.prototype,"downPointer",void 0),a([T(cc.Label)],k.prototype,"labStartCountDown",void 0),a([T(cc.EditBox)],k.prototype,"edbBetGold",void 0),a([T(cc.Layout)],k.prototype,"latRecord",void 0),a([T(cc.Label)],k.prototype,"labCurRound",void 0),a([T(cc.Label)],k.prototype,"labBigWin",void 0),a([T(cc.Toggle)],k.prototype,"tggCurRound",void 0),a([T(cc.Toggle)],k.prototype,"tggBigWin",void 0),a([T(cc.Node)],k.prototype,"nodCurRoundList",void 0),a([T(cc.Node)],k.prototype,"nodBigWinList",void 0),a([T(cc.Node)],k.prototype,"latManual",void 0),a([T(cc.Node)],k.prototype,"lsvBetPlayer",void 0),a([T(cc.Node)],k.prototype,"nodVerify",void 0),a([T(cc.Label)],k.prototype,"labMyRecord",void 0),a([T(cc.Label)],k.prototype,"labHistoryTitle",void 0),a([T(cc.Label)],k.prototype,"labWorldRecord",void 0),a([T(cc.Label)],k.prototype,"labFairGame",void 0),a([T(cc.Label)],k.prototype,"labCopyCheck",void 0),k=a([I,u.injectService(r.LobbyService.instance)],k),o.default=k,cc._RF.pop()},{"../../../../script/common/config/Config":void 0,"../../../../script/common/event/LogicEvent":void 0,"../../../../script/common/item/TitleItemPageUser":void 0,"../../../../script/common/manager/Manager":void 0,"../../../../script/common/net/LobbyService":void 0,"../../../../script/common/utils/NumberUtils":void 0,"../../../../script/data/AppData":void 0,"../../../../script/data/UserData":void 0,"../../../../script/framework/base/Defines":void 0,"../../../../script/framework/decorator/Decorators":void 0,"../../../../script/framework/event/EventApi":void 0,"../../../../script/framework/extentions/DateUtils":void 0,"../../../../script/framework/extentions/Operation":void 0,"../../../../script/framework/external/protoc":void 0,"../../../../script/framework/ui/UIView":void 0,"../../../../script/login/LoginNewView":void 0,"../../../../script/msgbox/PanelHelp":void 0,"../config/RouletteConfig":"RouletteConfig","../data/RouletteData":"RouletteData","../data/RouletteGameData":"RouletteGameData","../define/RouletteColorDefine":"RouletteColorDefine","./RouletteBigWinItem":"RouletteBigWinItem","./RouletteMyBetRecordView":"RouletteMyBetRecordView","./RouletteMyRecordItem":"RouletteMyRecordItem","./RouletteRecordItem":"RouletteRecordItem","./RouletteTotalRecordView":"RouletteTotalRecordView"}]},{},["RouletteNetController","RouletteLogic","RouletteConfig","RouletteData","RouletteGameData","RouletteLanguageEN","RouletteLanguageHI","RouletteLanguageZH","RouletteColorDefine","RouletteInterface","RouletteBigWinItem","RouletteMyBetRecordItem","RouletteMyBetRecordView","RouletteMyRecordItem","RouletteRecordItem","RouletteTotalRecordItem","RouletteTotalRecordView","RouletteView"]);